"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { newObj[key] = obj[key]; } } } newObj.default = obj; return newObj; } } function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; } function _optionalChainDelete(ops) { const result = _optionalChain(ops); return result == null ? true : result; }var _chunkS7NKHRYEjs = require('./chunk-S7NKHRYE.js');var R=class r{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}static fromHex(e){let t=_chunkS7NKHRYEjs.j.hexInputToUint8Array(e);return new r(t)}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}remaining(){return this.buffer.byteLength-this.offset}assertFinished(){if(this.remaining()!==0)throw new Error("Buffer has remaining bytes")}deserializeStr(){let e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeOptionStr(){return this.deserializeOption("string")}deserializeOption(e,t){if(this.deserializeBool()){if(e==="string")return this.deserializeStr();if(e==="bytes")return this.deserializeBytes();if(e==="fixedBytes"){if(t===void 0)throw new Error("Fixed bytes length not provided");return this.deserializeFixedBytes(t)}return this.deserialize(e)}}deserializeBytes(){let e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){let e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){let e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){let e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){let e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<_chunkS7NKHRYEjs.d;){let n=this.deserializeU8();if(e|=BigInt(n&127)<<BigInt(t),(n&128)===0)break;t+=7}if(e>_chunkS7NKHRYEjs.d)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}deserialize(e){return e.deserialize(this)}deserializeVector(e){let t=this.deserializeUleb128AsU32(),n=new Array;for(let i=0;i<t;i+=1)n.push(this.deserialize(e));return n}};var Pe=class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),this.value=_chunkS7NKHRYEjs.j.fromHexInput(e).toUint8Array()}serialize(e){e.serializeFixedBytes(this.value)}serializeForEntryFunction(e){e.serialize(this)}serializeForScriptFunction(e){e.serialize(this)}static deserialize(e,t){let n=e.deserializeFixedBytes(t);return new r(n)}};var Xr=class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),this.value=new Pe(e)}serialize(e){e.serialize(this.value)}serializeForEntryFunction(e){e.serializeU32AsUleb128(this.value.value.length),e.serialize(this)}static deserialize(e,t){let n=Pe.deserialize(e,t);return new r(n.value)}};var z=class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),_chunkS7NKHRYEjs.n.call(void 0, e),this.value=e}serialize(e){e.serializeBool(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(5),e.serialize(this)}deserialize(e){return new Ae(e.deserializeU256())}static deserialize(e){return new r(e.deserializeBool())}},Y= exports.U8 =class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),_chunkS7NKHRYEjs.p.call(void 0, e,0,_chunkS7NKHRYEjs.b),this.value=e}serialize(e){e.serializeU8(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(0),e.serialize(this)}static deserialize(e){return new r(e.deserializeU8())}},xe= exports.U16 =class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),_chunkS7NKHRYEjs.p.call(void 0, e,0,_chunkS7NKHRYEjs.c),this.value=e}serialize(e){e.serializeU16(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(6),e.serialize(this)}static deserialize(e){return new r(e.deserializeU16())}},Ie= exports.U32 =class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),_chunkS7NKHRYEjs.p.call(void 0, e,0,_chunkS7NKHRYEjs.d),this.value=e}serialize(e){e.serializeU32(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(7),e.serialize(this)}static deserialize(e){return new r(e.deserializeU32())}},j= exports.U64 =class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),_chunkS7NKHRYEjs.p.call(void 0, e,BigInt(0),_chunkS7NKHRYEjs.e),this.value=BigInt(e)}serialize(e){e.serializeU64(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(1),e.serialize(this)}static deserialize(e){return new r(e.deserializeU64())}},ve= exports.U128 =class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),_chunkS7NKHRYEjs.p.call(void 0, e,BigInt(0),_chunkS7NKHRYEjs.f),this.value=BigInt(e)}serialize(e){e.serializeU128(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(2),e.serialize(this)}static deserialize(e){return new r(e.deserializeU128())}},Ae= exports.U256 =class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),_chunkS7NKHRYEjs.p.call(void 0, e,BigInt(0),_chunkS7NKHRYEjs.g),this.value=BigInt(e)}serialize(e){e.serializeU256(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(8),e.serialize(this)}static deserialize(e){return new r(e.deserializeU256())}};var S=class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),this.values=e}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){if(this.values[0]!==void 0&&!(this.values[0]instanceof Y)){new pr(this.bcsToBytes()).serializeForScriptFunction(e);return}e.serializeU32AsUleb128(4),e.serialize(this)}static U8(e){let t;if(Array.isArray(e)&&e.length===0)t=[];else if(Array.isArray(e)&&typeof e[0]=="number")t=e;else if(typeof e=="string"){let n=_chunkS7NKHRYEjs.j.fromHexInput(e);t=Array.from(n.toUint8Array())}else if(e instanceof Uint8Array)t=Array.from(e);else throw new Error("Invalid input type, must be an number[], Uint8Array, or hex string");return new r(t.map(n=>new Y(n)))}static U16(e){return new r(e.map(t=>new xe(t)))}static U32(e){return new r(e.map(t=>new Ie(t)))}static U64(e){return new r(e.map(t=>new j(t)))}static U128(e){return new r(e.map(t=>new ve(t)))}static U256(e){return new r(e.map(t=>new Ae(t)))}static Bool(e){return new r(e.map(t=>new z(t)))}static MoveString(e){return new r(e.map(t=>new P(t)))}serialize(e){e.serializeVector(this.values)}static deserialize(e,t){let n=e.deserializeUleb128AsU32(),i=new Array;for(let o=0;o<n;o+=1)i.push(t.deserialize(e));return new r(i)}},pr= exports.Serialized =class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),this.value=_chunkS7NKHRYEjs.j.fromHexInput(e).toUint8Array()}serialize(e){e.serializeBytes(this.value)}serializeForEntryFunction(e){this.serialize(e)}serializeForScriptFunction(e){e.serializeU32AsUleb128(9),this.serialize(e)}static deserialize(e){return new r(e.deserializeBytes())}toMoveVector(e){let t=new R(this.bcsToBytes());t.deserializeUleb128AsU32();let n=t.deserializeVector(e);return new S(n)}},P= exports.MoveString =class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),this.value=e}serialize(e){e.serializeStr(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){let n=new TextEncoder().encode(this.value);S.U8(n).serializeForScriptFunction(e)}static deserialize(e){return new r(e.deserializeStr())}},Z= exports.MoveOption =class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),typeof e<"u"&&e!==null?this.vec=new S([e]):this.vec=new S([]),[this.value]=this.vec.values}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}unwrap(){if(this.isSome())return this.vec.values[0];throw new Error("Called unwrap on a MoveOption with no value")}isSome(){return this.vec.values.length===1}serialize(e){this.vec.serialize(e)}static U8(e){return new r(e!=null?new Y(e):void 0)}static U16(e){return new r(e!=null?new xe(e):void 0)}static U32(e){return new r(e!=null?new Ie(e):void 0)}static U64(e){return new r(e!=null?new j(e):void 0)}static U128(e){return new r(e!=null?new ve(e):void 0)}static U256(e){return new r(e!=null?new Ae(e):void 0)}static Bool(e){return new r(e!=null?new z(e):void 0)}static MoveString(e){return new r(e!=null?new P(e):void 0)}static deserialize(e,t){let n=S.deserialize(e,t);return new r(n.values[0])}};var _sha3 = require('@noble/hashes/sha3');var dt=class dt extends _chunkS7NKHRYEjs.l{constructor(e){super();let{data:t}=e,n=_chunkS7NKHRYEjs.j.fromHexInput(t);if(n.toUint8Array().length!==dt.LENGTH)throw new Error(`Authentication Key length should be ${dt.LENGTH}`);this.data=n}serialize(e){e.serializeFixedBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeFixedBytes(dt.LENGTH);return new dt({data:t})}toUint8Array(){return this.data.toUint8Array()}static fromSchemeAndBytes(e){let{scheme:t,input:n}=e,i=_chunkS7NKHRYEjs.j.fromHexInput(n).toUint8Array(),o=new Uint8Array([...i,t]),s=_sha3.sha3_256.create();s.update(o);let a=s.digest();return new dt({data:a})}static fromPublicKeyAndScheme(e){let{publicKey:t}=e;return t.authKey()}static fromPublicKey(e){let{publicKey:t}=e;return t.authKey()}derivedAddress(){return new (0, _chunkS7NKHRYEjs.Y)(this.data.toUint8Array())}};dt.LENGTH=32;var H=dt;var _t=class extends _chunkS7NKHRYEjs.l{async verifySignatureAsync(e){return this.verifySignature(e)}toUint8Array(){return this.bcsToBytes()}toString(){let e=this.toUint8Array();return _chunkS7NKHRYEjs.j.fromHexInput(e).toString()}},ne= exports.AccountPublicKey =class extends _t{};var q=class extends _chunkS7NKHRYEjs.l{toUint8Array(){return this.bcsToBytes()}toString(){let e=this.toUint8Array();return _chunkS7NKHRYEjs.j.fromHexInput(e).toString()}};var gr=class r extends q{constructor(e){super(),this.value=_chunkS7NKHRYEjs.j.fromHexInput(e).toUint8Array()}serialize(e){e.serializeBytes(this.value)}static deserialize(e){return new r(e.deserializeBytes())}},Yr= exports.AbstractPublicKey =class extends ne{constructor(e){super(),this.accountAddress=e}authKey(){return new H({data:this.accountAddress.toUint8Array()})}verifySignature(e){throw new Error("This function is not implemented for AbstractPublicKey.")}async verifySignatureAsync(e){throw new Error("This function is not implemented for AbstractPublicKey.")}serialize(e){throw new Error("This function is not implemented for AbstractPublicKey.")}};var _ed25519 = require('@noble/curves/ed25519');var _hmac = require('@noble/hashes/hmac');var _sha512 = require('@noble/hashes/sha512');var _bip39 = require('@scure/bip39'); var co = _interopRequireWildcard(_bip39);var gc=/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'?$/,mc= exports.CEDRA_BIP44_REGEX =/^m\/44'\/637'\/[0-9]+'\/[0-9]+\/[0-9]+$/,yc= exports.KeyType =(e=>(e.ED25519="ed25519 seed",e))(yc||{}),uo= exports.HARDENED_OFFSET =2147483648;function lo(r){return mc.test(r)}function po(r){return gc.test(r)}var Xn=(r,e)=>{let t=_hmac.hmac.create(_sha512.sha512,r).update(e).digest();return{key:t.slice(0,32),chainCode:t.slice(32)}},go= exports.CKDPriv =({key:r,chainCode:e},t)=>{let n=new ArrayBuffer(4);new DataView(n).setUint32(0,t);let i=new Uint8Array(n),o=new Uint8Array([0]),s=new Uint8Array([...o,...r,...i]);return Xn(e,s)},fc=r=>r.replace(/'/g,""),mo= exports.splitPath =r=>r.split("/").slice(1).map(fc),Zr= exports.mnemonicToSeed =r=>{let e=r.trim().split(/\s+/).map(t=>t.toLowerCase()).join(" ");return co.mnemonicToSeedSync(e)};var mr=class mr{static formatPrivateKey(e,t){let n=mr.AIP80_PREFIXES[t],i=e;return typeof i=="string"&&i.startsWith(n)&&(i=i.split("-")[2]),`${n}${_chunkS7NKHRYEjs.j.fromHexInput(i).toString()}`}static parseHexInput(e,t,n){let i,o=mr.AIP80_PREFIXES[t];if(typeof e=="string")if(!n&&!e.startsWith(o))i=_chunkS7NKHRYEjs.j.fromHexInput(e),n!==!1&&console.warn("[Cedra SDK] It is recommended that private keys are AIP-80 compliant (https://github.com/cedra-foundation/AIPs/blob/main/aips/aip-80.md). You can fix the private key by formatting it with `PrivateKey.formatPrivateKey(privateKey: string, type: 'ed25519' | 'secp256k1'): string`.");else if(e.startsWith(o))i=_chunkS7NKHRYEjs.j.fromHexString(e.split("-")[2]);else throw n?new Error("Invalid HexString input while parsing private key. Must AIP-80 compliant string."):new Error("Invalid HexString input while parsing private key.");else i=_chunkS7NKHRYEjs.j.fromHexInput(e);return i}};mr.AIP80_PREFIXES={ed25519:"ed25519-priv-",secp256k1:"secp256k1-priv-"};var lt=mr;var $t=r=>typeof r=="string"?_chunkS7NKHRYEjs.j.isValid(r).valid?r:new TextEncoder().encode(r):r;var Yn=[237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16];function Ac(r){let e=r.toUint8Array().slice(32);for(let t=Yn.length-1;t>=0;t-=1){if(e[t]<Yn[t])return!0;if(e[t]>Yn[t])return!1}return!1}var pt=class pt extends ne{constructor(e){super();let t=_chunkS7NKHRYEjs.j.fromHexInput(e);if(t.toUint8Array().length!==pt.LENGTH)throw new Error(`PublicKey length should be ${pt.LENGTH}`);this.key=t}verifySignature(e){let{message:t,signature:n}=e;if(!Ac(n))return!1;let i=$t(t),o=_chunkS7NKHRYEjs.j.fromHexInput(i).toUint8Array(),s=n.toUint8Array(),a=this.key.toUint8Array();return _ed25519.ed25519.verify(s,o,a)}async verifySignatureAsync(e){return this.verifySignature(e)}authKey(){return H.fromSchemeAndBytes({scheme:0,input:this.toUint8Array()})}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new pt(t)}static isPublicKey(e){return e instanceof pt}static isInstance(e){return"key"in e&&_optionalChain([e, 'access', _2 => _2.key, 'optionalAccess', _3 => _3.data, 'optionalAccess', _4 => _4.length])===pt.LENGTH}};pt.LENGTH=32;var x=pt,he=class he extends _chunkS7NKHRYEjs.l{constructor(e,t){super();let n=lt.parseHexInput(e,"ed25519",t);if(n.toUint8Array().length!==he.LENGTH)throw new Error(`PrivateKey length should be ${he.LENGTH}`);this.signingKey=n}static generate(){let e=_ed25519.ed25519.utils.randomPrivateKey();return new he(e,!1)}static fromDerivationPath(e,t){if(!po(e))throw new Error(`Invalid derivation path ${e}`);return he.fromDerivationPathInner(e,Zr(t))}static fromDerivationPathInner(e,t,n=uo){let{key:i,chainCode:o}=Xn(he.SLIP_0010_SEED,t),s=mo(e).map(c=>parseInt(c,10)),{key:a}=s.reduce((c,d)=>go(c,d+n),{key:i,chainCode:o});return new he(a,!1)}publicKey(){let e=_ed25519.ed25519.getPublicKey(this.signingKey.toUint8Array());return new x(e)}sign(e){let t=$t(e),n=_chunkS7NKHRYEjs.j.fromHexInput(t).toUint8Array(),i=_ed25519.ed25519.sign(n,this.signingKey.toUint8Array());return new I(i)}toUint8Array(){return this.signingKey.toUint8Array()}toString(){return this.toAIP80String()}toHexString(){return this.signingKey.toString()}toAIP80String(){return lt.formatPrivateKey(this.signingKey.toString(),"ed25519")}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new he(t,!1)}static isPrivateKey(e){return e instanceof he}};he.LENGTH=32,he.SLIP_0010_SEED="ed25519 seed";var $=he,Wt=class Wt extends q{constructor(e){super();let t=_chunkS7NKHRYEjs.j.fromHexInput(e);if(t.toUint8Array().length!==Wt.LENGTH)throw new Error(`Signature length should be ${Wt.LENGTH}`);this.data=t}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new Wt(t)}};Wt.LENGTH=64;var I=Wt;var gt=class r extends _t{constructor(e){super();let t=e.constructor.name;switch(t){case x.name:this.publicKey=e,this.variant=0;break;default:throw new Error(`Unsupported key for EphemeralPublicKey - ${t}`)}}verifySignature(e){let{message:t,signature:n}=e;return this.publicKey.verifySignature({message:t,signature:n.signature})}async verifySignatureAsync(e){return this.verifySignature(e)}serialize(e){if(this.publicKey instanceof x)e.serializeU32AsUleb128(0),this.publicKey.serialize(e);else throw new Error("Unknown public key type")}static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return new r(x.deserialize(e));default:throw new Error(`Unknown variant index for EphemeralPublicKey: ${t}`)}}static isPublicKey(e){return e instanceof r}},Fe= exports.EphemeralSignature =class r extends q{constructor(e){super();let t=e.constructor.name;switch(t){case I.name:this.signature=e;break;default:throw new Error(`Unsupported signature for EphemeralSignature - ${t}`)}}static fromHex(e){let t=_chunkS7NKHRYEjs.j.fromHexInput(e),n=new R(t.toUint8Array());return r.deserialize(n)}serialize(e){if(this.signature instanceof I)e.serializeU32AsUleb128(0),this.signature.serialize(e);else throw new Error("Unknown signature type")}static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return new r(I.deserialize(e));default:throw new Error(`Unknown variant index for EphemeralSignature: ${t}`)}}};var _jwtdecode = require('jwt-decode');var _poseidonlite = require('poseidon-lite');var Zn=[_poseidonlite.poseidon1,_poseidonlite.poseidon2,_poseidonlite.poseidon3,_poseidonlite.poseidon4,_poseidonlite.poseidon5,_poseidonlite.poseidon6,_poseidonlite.poseidon7,_poseidonlite.poseidon8,_poseidonlite.poseidon9,_poseidonlite.poseidon10,_poseidonlite.poseidon11,_poseidonlite.poseidon12,_poseidonlite.poseidon13,_poseidonlite.poseidon14,_poseidonlite.poseidon15,_poseidonlite.poseidon16],fo=31,Dc=16,yo=(Dc-1)*fo;function Oe(r,e){let n=new TextEncoder().encode(r);return zc(n,e)}function zc(r,e){if(r.length>e)throw new Error(`Inputted bytes of length ${r} is longer than ${e}`);let t=yr(r,e);return xt(t)}function Nc(r,e){if(r.length>e)throw new Error(`Input bytes of length ${r} is longer than ${e}`);let t=Gc(r,e);return Fc(t)}function yr(r,e){if(r.length>e)throw new Error(`Input bytes of length ${r} is longer than ${e}`);return Nc(r,e).concat([BigInt(r.length)])}function Fc(r){if(r.length>yo)throw new Error(`Can't pack more than ${yo}.  Was given ${r.length} bytes`);return Oc(r,fo).map(e=>Pt(e))}function Oc(r,e){let t=[];for(let n=0;n<r.length;n+=e)t.push(r.subarray(n,n+e));return t}function Pt(r){let e=BigInt(0);for(let t=r.length-1;t>=0;t-=1)e=e<<BigInt(8)|BigInt(r[t]);return e}function ei(r,e){let t=BigInt(r),n=new Uint8Array(e);for(let i=0;i<e;i+=1)n[i]=Number(t&BigInt(255)),t>>=BigInt(8);return n}function Gc(r,e){if(e<r.length)throw new Error("Padded size must be greater than or equal to the input array size.");let t=new Uint8Array(e);t.set(r);for(let n=r.length;n<e;n+=1)t[n]=0;return t}function xt(r){if(r.length>Zn.length)throw new Error(`Unable to hash input of length ${r.length}.  Max input length is ${Zn.length}`);return Zn[r.length-1](r)}var tn=class extends _chunkS7NKHRYEjs.l{};var Ao={mainnet:"https://graphql.cedra.dev/v1/graphql",testnet:"https://graphql.cedra.dev/v1/graphql",devnet:"https://graphql-devnet.cedra.dev/v1/graphql",local:"http://127.0.0.1:8090/v1/graphql"},ho= exports.NetworkToNodeAPI ={mainnet:"https://testnet.cedra.dev/v1",testnet:"https://testnet.cedra.dev/v1",devnet:"https://devnet.cedra.dev/v1",local:"http://127.0.0.1:8080/v1"},To= exports.NetworkToFaucetAPI ={devnet:"https://devfaucet-api.cedra.dev",testnet:"https://faucet-api.cedra.dev",local:"http://127.0.0.1:8081"},ti= exports.NetworkToPepperAPI ={mainnet:"https://api.mainnet.cedralabs.com/keyless/pepper/v0",testnet:"https://api.testnet.cedralabs.com/keyless/pepper/v0",devnet:"https://testnet.cedra.dev/keyless/pepper/v0",local:"https://testnet.cedra.dev/keyless/pepper/v0"},ri= exports.NetworkToProverAPI ={mainnet:"https://api.mainnet.cedralabs.com/keyless/prover/v0",testnet:"https://api.testnet.cedralabs.com/keyless/prover/v0",devnet:"https://testnet.cedra.dev/keyless/prover/v0",local:"https://testnet.cedra.dev/keyless/prover/v0"},ni= exports.Network =(o=>(o.MAINNET="mainnet",o.TESTNET="testnet",o.DEVNET="devnet",o.LOCAL="local",o.CUSTOM="custom",o))(ni||{}),ii= exports.NetworkToChainId ={mainnet:1,testnet:2,devnet:3,local:4},xp= exports.NetworkToNetworkName ={mainnet:"mainnet",testnet:"testnet",devnet:"devnet",local:"local",custom:"custom"};var Qt=(o=>(o.FULLNODE="Fullnode",o.INDEXER="Indexer",o.FAUCET="Faucet",o.PEPPER="Pepper",o.PROVER="Prover",o))(Qt||{}),bo= exports.DEFAULT_MAX_GAS_AMOUNT =2e5,wo= exports.DEFAULT_TXN_EXP_SEC_FROM_NOW =20,rn= exports.DEFAULT_TXN_TIMEOUT_SEC =20,It= exports.CEDRA_COIN ="0x1::cedra_coin::CedraCoin",So= exports.CEDRA_FA ="0x000000000000000000000000000000000000000000000000000000000000000a",Co= exports.RAW_TRANSACTION_SALT ="CEDRA::RawTransaction",oi= exports.RAW_TRANSACTION_WITH_DATA_SALT ="CEDRA::RawTransactionWithData",Le= exports.ProcessorType =(c=>(c.ACCOUNT_TRANSACTION_PROCESSOR="account_transactions_processor",c.DEFAULT="default_processor",c.EVENTS_PROCESSOR="events_processor",c.FUNGIBLE_ASSET_PROCESSOR="fungible_asset_processor",c.STAKE_PROCESSOR="stake_processor",c.TOKEN_V2_PROCESSOR="token_v2_processor",c.USER_TRANSACTION_PROCESSOR="user_transaction_processor",c.OBJECT_PROCESSOR="objects_processor",c))(Le||{}),Eo= exports.FIREBASE_AUTH_ISS_PATTERN =/^https:\/\/securetoken\.google\.com\/[a-zA-Z0-9-_]+$/;function _o(r,e){let t=e.bcsToBytes(),n=new R(t);return r.deserialize(n)}var Bc=(s=>(s[s.API_ERROR=0]="API_ERROR",s[s.EXTERNAL_API_ERROR=1]="EXTERNAL_API_ERROR",s[s.SESSION_EXPIRED=2]="SESSION_EXPIRED",s[s.INVALID_STATE=3]="INVALID_STATE",s[s.INVALID_SIGNATURE=4]="INVALID_SIGNATURE",s[s.UNKNOWN=5]="UNKNOWN",s))(Bc||{}),Mc= exports.KeylessErrorResolutionTip =(d=>(d.REAUTHENTICATE="Re-authentiate to continue using your keyless account",d.REAUTHENTICATE_UNSURE="Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support",d.UPDATE_REQUEST_PARAMS="Update the invalid request parameters and reauthenticate.",d.RATE_LIMIT_EXCEEDED="Cache the keyless account and reuse it to avoid making too many requests.  Keyless accounts are valid until either the EphemeralKeyPair expires, when the JWK is rotated, or when the proof verifying key is changed, whichever comes soonest.",d.SERVER_ERROR="Try again later.  See cedraApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx",d.CALL_PRECHECK="Call `await account.checkKeylessAccountValidity()` to wait for asyncronous changes and check for account validity before signing or serializing.",d.REINSTANTIATE="Try instantiating the account again.  Avoid manipulating the account object directly",d.JOIN_SUPPORT_GROUP="For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx",d.UNKNOWN="Error unknown. For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx",d))(Mc||{}),nn= exports.KeylessErrorType =(m=>(m[m.EPHEMERAL_KEY_PAIR_EXPIRED=0]="EPHEMERAL_KEY_PAIR_EXPIRED",m[m.PROOF_NOT_FOUND=1]="PROOF_NOT_FOUND",m[m.ASYNC_PROOF_FETCH_FAILED=2]="ASYNC_PROOF_FETCH_FAILED",m[m.INVALID_PROOF_VERIFICATION_FAILED=3]="INVALID_PROOF_VERIFICATION_FAILED",m[m.INVALID_PROOF_VERIFICATION_KEY_NOT_FOUND=4]="INVALID_PROOF_VERIFICATION_KEY_NOT_FOUND",m[m.INVALID_JWT_SIG=5]="INVALID_JWT_SIG",m[m.INVALID_JWT_JWK_NOT_FOUND=6]="INVALID_JWT_JWK_NOT_FOUND",m[m.INVALID_JWT_ISS_NOT_RECOGNIZED=7]="INVALID_JWT_ISS_NOT_RECOGNIZED",m[m.INVALID_JWT_FEDERATED_ISS_NOT_SUPPORTED=8]="INVALID_JWT_FEDERATED_ISS_NOT_SUPPORTED",m[m.INVALID_TW_SIG_VERIFICATION_FAILED=9]="INVALID_TW_SIG_VERIFICATION_FAILED",m[m.INVALID_TW_SIG_PUBLIC_KEY_NOT_FOUND=10]="INVALID_TW_SIG_PUBLIC_KEY_NOT_FOUND",m[m.INVALID_EXPIRY_HORIZON=11]="INVALID_EXPIRY_HORIZON",m[m.JWT_PARSING_ERROR=12]="JWT_PARSING_ERROR",m[m.JWK_FETCH_FAILED=13]="JWK_FETCH_FAILED",m[m.JWK_FETCH_FAILED_FEDERATED=14]="JWK_FETCH_FAILED_FEDERATED",m[m.RATE_LIMIT_EXCEEDED=15]="RATE_LIMIT_EXCEEDED",m[m.PEPPER_SERVICE_INTERNAL_ERROR=16]="PEPPER_SERVICE_INTERNAL_ERROR",m[m.PEPPER_SERVICE_BAD_REQUEST=17]="PEPPER_SERVICE_BAD_REQUEST",m[m.PEPPER_SERVICE_OTHER=18]="PEPPER_SERVICE_OTHER",m[m.PROVER_SERVICE_INTERNAL_ERROR=19]="PROVER_SERVICE_INTERNAL_ERROR",m[m.PROVER_SERVICE_BAD_REQUEST=20]="PROVER_SERVICE_BAD_REQUEST",m[m.PROVER_SERVICE_OTHER=21]="PROVER_SERVICE_OTHER",m[m.FULL_NODE_CONFIG_LOOKUP_ERROR=22]="FULL_NODE_CONFIG_LOOKUP_ERROR",m[m.FULL_NODE_VERIFICATION_KEY_LOOKUP_ERROR=23]="FULL_NODE_VERIFICATION_KEY_LOOKUP_ERROR",m[m.FULL_NODE_JWKS_LOOKUP_ERROR=24]="FULL_NODE_JWKS_LOOKUP_ERROR",m[m.FULL_NODE_OTHER=25]="FULL_NODE_OTHER",m[m.SIGNATURE_TYPE_INVALID=26]="SIGNATURE_TYPE_INVALID",m[m.SIGNATURE_EXPIRED=27]="SIGNATURE_EXPIRED",m[m.MAX_EXPIRY_HORIZON_EXCEEDED=28]="MAX_EXPIRY_HORIZON_EXCEEDED",m[m.EPHEMERAL_SIGNATURE_VERIFICATION_FAILED=29]="EPHEMERAL_SIGNATURE_VERIFICATION_FAILED",m[m.TRAINING_WHEELS_SIGNATURE_MISSING=30]="TRAINING_WHEELS_SIGNATURE_MISSING",m[m.TRAINING_WHEELS_SIGNATURE_VERIFICATION_FAILED=31]="TRAINING_WHEELS_SIGNATURE_VERIFICATION_FAILED",m[m.PROOF_VERIFICATION_FAILED=32]="PROOF_VERIFICATION_FAILED",m[m.UNKNOWN=33]="UNKNOWN",m))(nn||{}),Po={0:["The ephemeral keypair has expired.",2,"Re-authentiate to continue using your keyless account"],1:["The required proof could not be found.",3,"Call `await account.checkKeylessAccountValidity()` to wait for asyncronous changes and check for account validity before signing or serializing."],2:["The required proof failed to fetch.",3,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],3:["The provided proof is invalid.",3,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],4:["The verification key used to authenticate was updated.",2,"Re-authentiate to continue using your keyless account"],5:["The JWK was found, but JWT failed verification",3,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],6:["The JWK required to verify the JWT could not be found. The JWK may have been rotated out.",2,"Re-authentiate to continue using your keyless account"],7:["The JWT issuer is not recognized.",3,"Update the invalid request parameters and reauthenticate."],8:["The JWT issuer is not supported by the Federated Keyless ",0,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],9:["The training wheels signature is invalid.",3,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],10:["The public key used to verify the training wheels signature was not found.",2,"Re-authentiate to continue using your keyless account"],11:["The expiry horizon is invalid.",2,"Re-authentiate to continue using your keyless account"],13:["Failed to fetch JWKS.",1,"For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],14:["Failed to fetch JWKS for Federated Keyless provider.",1,"For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],15:["Rate limit exceeded. Too many requests in a short period.",0,"Cache the keyless account and reuse it to avoid making too many requests.  Keyless accounts are valid until either the EphemeralKeyPair expires, when the JWK is rotated, or when the proof verifying key is changed, whichever comes soonest."],16:["Internal error from Pepper service.",0,"Try again later.  See cedraApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],17:["Bad request sent to Pepper service.",0,"Update the invalid request parameters and reauthenticate."],18:["Unknown error from Pepper service.",0,"Try again later.  See cedraApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],19:["Internal error from Prover service.",0,"Try again later.  See cedraApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],20:["Bad request sent to Prover service.",0,"Update the invalid request parameters and reauthenticate."],21:["Unknown error from Prover service.",0,"Try again later.  See cedraApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],12:["Error when parsing JWT. This should never happen. Join https://t.me/+h5CN-W35yUFiYzkx for support",3,"Try instantiating the account again.  Avoid manipulating the account object directly"],22:["Error when looking up on-chain keyless configuration.",0,"Try again later.  See cedraApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],23:["Error when looking up on-chain verification key.",0,"Try again later.  See cedraApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],24:["Error when looking up on-chain JWKS.",0,"Try again later.  See cedraApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],25:["Unknown error from full node.",0,"Try again later.  See cedraApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],26:["The signature is not a valid Keyless signature.",4,"For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],27:["The ephemeral key pair used to sign the message has expired.",4,"Re-authentiate to continue using your keyless account"],28:["The expiry horizon on the signature exceeds the maximum allowed value.",4,"Re-authentiate to continue using your keyless account"],29:["Failed to verify the ephemeral signature with the ephemeral public key.",4,"Re-authentiate to continue using your keyless account"],30:["The training wheels signature is missing but is required by the Keyless configuration.",4,"Re-authentiate to continue using your keyless account"],31:["Failed to verify the training wheels signature with the training wheels public key.",4,"Re-authentiate to continue using your keyless account"],32:["The proof verification failed.",4,"Re-authentiate to continue using your keyless account"],33:["An unknown error has occurred.",5,"Error unknown. For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"]},E= exports.KeylessError =class r extends Error{constructor(e){let{innerError:t,category:n,resolutionTip:i,type:o,message:s=Po[o][0],details:a}=e;super(s),this.name="KeylessError",this.innerError=t,this.category=n,this.resolutionTip=i,this.type=o,this.details=a,this.message=r.constructMessage(s,i,t,a)}static constructMessage(e,t,n,i){let o=`
Message: ${e}`;return i&&(o+=`
Details: ${i}`),n instanceof Te?o+=`
CedraApiError: ${n.message}`:n!==void 0&&(o+=`
Error: ${_chunkS7NKHRYEjs.ba.call(void 0, n)}`),o+=`
KeylessErrorResolutionTip: ${t}`,o}static fromErrorType(e){let{error:t,type:n,details:i}=e,[o,s,a]=Po[n];return new r({message:o,details:i,innerError:t,category:s,resolutionTip:a,type:n})}},Te= exports.CedraApiError =class extends Error{constructor({apiType:e,cedraRequest:t,cedraResponse:n}){super(Vc({apiType:e,cedraRequest:t,cedraResponse:n})),this.name="CedraApiError",this.url=n.url,this.status=n.status,this.statusText=n.statusText,this.data=n.data,this.request=t}};function Vc({apiType:r,cedraRequest:e,cedraResponse:t}){let n=_optionalChain([t, 'access', _5 => _5.headers, 'optionalAccess', _6 => _6.traceparent, 'optionalAccess', _7 => _7.split, 'call', _8 => _8("-"), 'access', _9 => _9[1]]),i=n?`(trace_id:${n}) `:"",o=`Request to [${r}]: ${e.method} ${_nullishCoalesce(t.url, () => (e.url))} ${i}failed with`;return r==="Indexer"&&_optionalChain([t, 'access', _10 => _10.data, 'optionalAccess', _11 => _11.errors, 'optionalAccess', _12 => _12[0], 'optionalAccess', _13 => _13.message])!=null?`${o}: ${t.data.errors[0].message}`:_optionalChain([t, 'access', _14 => _14.data, 'optionalAccess', _15 => _15.message])!=null&&_optionalChain([t, 'access', _16 => _16.data, 'optionalAccess', _17 => _17.error_code])!=null?`${o}: ${JSON.stringify(t.data)}`:`${o} status: ${t.statusText}(code:${t.status}) and response body: ${Hc(t.data)}`}var si=400;function Hc(r){let e=JSON.stringify(r);return e.length<=si?e:`truncated(original_size:${e.length}): ${e.slice(0,si/2)}...${e.slice(-si/2)}`}async function Lc(r,e){let{url:t,method:n,body:i,contentType:o,params:s,overrides:a,originMethod:c}=r,d={..._optionalChain([a, 'optionalAccess', _18 => _18.HEADERS]),"x-cedra-client":`cedra-typescript-sdk/${""}`,"content-type":_nullishCoalesce(o, () => ("application/json")),"x-cedra-typescript-sdk-origin-method":c};return _optionalChain([a, 'optionalAccess', _19 => _19.AUTH_TOKEN])&&(d.Authorization=`Bearer ${_optionalChain([a, 'optionalAccess', _20 => _20.AUTH_TOKEN])}`),_optionalChain([a, 'optionalAccess', _21 => _21.API_KEY])&&(d.Authorization=`Bearer ${_optionalChain([a, 'optionalAccess', _22 => _22.API_KEY])}`),e.provider({url:t,method:n,body:i,params:s,headers:d,overrides:a})}async function on(r,e,t){let{url:n,path:i}=r,o=i?`${n}/${i}`:n,s=await Lc({...r,url:o},e.client),a={status:s.status,statusText:_nullishCoalesce(s.statusText, () => ("No status text provided")),data:s.data,headers:s.headers,config:s.config,request:s.request,url:o};if(a.status===401)throw new Te({apiType:t,cedraRequest:r,cedraResponse:a});if(t==="Indexer"){let c=a.data;if(c.errors)throw new Te({apiType:t,cedraRequest:r,cedraResponse:a});a.data=c.data}else if((t==="Pepper"||t==="Prover")&&a.status>=400)throw new Te({apiType:t,cedraRequest:r,cedraResponse:a});if(a.status>=200&&a.status<300)return a;throw new Te({apiType:t,cedraRequest:r,cedraResponse:a})}async function sn(r){let{cedraConfig:e,overrides:t,params:n,contentType:i,acceptType:o,path:s,originMethod:a,type:c}=r,d=e.getRequestUrl(c);return on({url:d,method:"GET",originMethod:a,path:s,contentType:i,acceptType:o,params:n,overrides:{...e.clientConfig,...t}},e,r.type)}async function G(r){let{cedraConfig:e}=r;return sn({...r,type:"Fullnode",overrides:{...e.clientConfig,...e.fullnodeConfig,...r.overrides,HEADERS:{..._optionalChain([e, 'access', _23 => _23.clientConfig, 'optionalAccess', _24 => _24.HEADERS]),..._optionalChain([e, 'access', _25 => _25.fullnodeConfig, 'optionalAccess', _26 => _26.HEADERS])}}})}async function eg(r){return sn({...r,type:"Pepper"})}async function an(r){let e=new Array(0),t,n=r.params;do{let i=await sn({type:"Fullnode",cedraConfig:r.cedraConfig,originMethod:r.originMethod,path:r.path,params:n,overrides:r.overrides});t=i.headers["x-cedra-cursor"],delete i.headers,e.push(...i.data),n.start=t}while(t!=null);return e}async function ai(r){let e=new Array(0),t,n=r.params,i=n.limit;do{let{response:o,cursor:s}=await cn({...r});if(t=s,e.push(...o.data),_optionalChain([r, 'optionalAccess', _27 => _27.params])&&(r.params.start=t),i!==void 0){let a=i-e.length;if(a<=0)break;n.limit=a}}while(t!=null);return e}async function cn(r){let e,t={};typeof _optionalChain([r, 'access', _28 => _28.params, 'optionalAccess', _29 => _29.cursor])=="string"&&(t.start=r.params.cursor),typeof _optionalChain([r, 'access', _30 => _30.params, 'optionalAccess', _31 => _31.limit])=="number"&&(t.limit=r.params.limit);let n=await sn({type:"Fullnode",cedraConfig:r.cedraConfig,originMethod:r.originMethod,path:r.path,params:t,overrides:r.overrides});return e=n.headers["x-cedra-cursor"],{response:n,cursor:e}}async function fr(r){let{type:e,originMethod:t,path:n,body:i,acceptType:o,contentType:s,params:a,cedraConfig:c,overrides:d}=r,f=c.getRequestUrl(e);return on({url:f,method:"POST",originMethod:t,path:n,body:i,contentType:s,acceptType:o,params:a,overrides:d},c,r.type)}async function mt(r){let{cedraConfig:e}=r;return fr({...r,type:"Fullnode",overrides:{...e.clientConfig,...e.fullnodeConfig,...r.overrides,HEADERS:{..._optionalChain([e, 'access', _32 => _32.clientConfig, 'optionalAccess', _33 => _33.HEADERS]),..._optionalChain([e, 'access', _34 => _34.fullnodeConfig, 'optionalAccess', _35 => _35.HEADERS])}}})}async function xo(r){let{cedraConfig:e}=r;return fr({...r,type:"Indexer",overrides:{...e.clientConfig,...e.indexerConfig,...r.overrides,HEADERS:{..._optionalChain([e, 'access', _36 => _36.clientConfig, 'optionalAccess', _37 => _37.HEADERS]),..._optionalChain([e, 'access', _38 => _38.indexerConfig, 'optionalAccess', _39 => _39.HEADERS])}}})}async function Io(r){let{cedraConfig:e}=r,t={...e,clientConfig:{...e.clientConfig}};return  _optionalChainDelete([t, 'optionalAccess', _40 => _40.clientConfig, 'optionalAccess', _41 => delete _41.API_KEY]),fr({...r,type:"Faucet",overrides:{...t.clientConfig,...t.faucetConfig,...r.overrides,HEADERS:{..._optionalChain([t, 'access', _42 => _42.clientConfig, 'optionalAccess', _43 => _43.HEADERS]),..._optionalChain([t, 'access', _44 => _44.faucetConfig, 'optionalAccess', _45 => _45.HEADERS])}}})}async function vo(r){return fr({...r,type:"Pepper"})}async function Ko(r){return fr({...r,type:"Prover"})}var ci=new Map;function Ge(r,e,t){return async(...n)=>{if(ci.has(e)){let{value:o,timestamp:s}=ci.get(e);if(t===void 0||Date.now()-s<=t)return o}let i=await r(...n);return ci.set(e,{value:i,timestamp:Date.now()}),i}}var _bn254 = require('@noble/curves/bn254');var _utils = require('@noble/curves/abstract/utils');var _jsbase64 = require('js-base64');var jc=1e7,ui= exports.MAX_AUD_VAL_BYTES =120,Jc= exports.MAX_UID_KEY_BYTES =30,Xc= exports.MAX_UID_VAL_BYTES =330,Yc= exports.MAX_ISS_VAL_BYTES =120,Zc= exports.MAX_EXTRA_FIELD_BYTES =350,eu= exports.MAX_JWT_HEADER_B64_BYTES =300,tu= exports.MAX_COMMITED_EPK_BYTES =93,Be=class Be extends ne{constructor(e,t){super();let n=_chunkS7NKHRYEjs.j.fromHexInput(t).toUint8Array();if(n.length!==Be.ID_COMMITMENT_LENGTH)throw new Error(`Id Commitment length in bytes should be ${Be.ID_COMMITMENT_LENGTH}`);this.iss=e,this.idCommitment=n}authKey(){let e=new _chunkS7NKHRYEjs.m;return e.serializeU32AsUleb128(3),e.serializeFixedBytes(this.bcsToBytes()),H.fromSchemeAndBytes({scheme:2,input:e.toUint8Array()})}verifySignature(e){try{return un({...e,publicKey:this}),!0}catch(t){if(t instanceof E)return!1;throw t}}async verifySignatureAsync(e){return yi({...e,publicKey:this})}serialize(e){e.serializeStr(this.iss),e.serializeBytes(this.idCommitment)}static deserialize(e){let t=e.deserializeStr(),n=e.deserializeBytes();return new Be(t,n)}static load(e){let t=e.deserializeStr(),n=e.deserializeBytes();return new Be(t,n)}static isPublicKey(e){return e instanceof Be}static create(e){return Ro(e),new Be(e.iss,Ro(e))}static fromJwtAndPepper(e){let{jwt:t,pepper:n,uidKey:i="sub"}=e,o=_jwtdecode.jwtDecode.call(void 0, t);if(typeof o.iss!="string")throw new Error("iss was not found");if(typeof o.aud!="string")throw new Error("aud was not found or an array of values");let s=o[i];return Be.create({iss:o.iss,uidKey:i,uidVal:s,aud:o.aud,pepper:n})}static isInstance(e){return"iss"in e&&typeof e.iss=="string"&&"idCommitment"in e&&e.idCommitment instanceof Uint8Array}};Be.ID_COMMITMENT_LENGTH=32;var K=Be;async function yi(r){let{cedraConfig:e,publicKey:t,message:n,signature:i,jwk:o,keylessConfig:s=await Xt({cedraConfig:e}),options:a}=r;try{if(!(i instanceof ie))throw E.fromErrorType({type:26,details:"Not a keyless signature"});return un({message:n,publicKey:t,signature:i,jwk:o||await fi({cedraConfig:e,publicKey:t,kid:i.getJwkKid()}),keylessConfig:s}),!0}catch(c){if(_optionalChain([a, 'optionalAccess', _46 => _46.throwErrorWithReason]))throw c;return!1}}function un(r){let{publicKey:e,message:t,signature:n,keylessConfig:i,jwk:o}=r,{verificationKey:s,maxExpHorizonSecs:a,trainingWheelsPubkey:c}=i;if(!(n instanceof ie))throw E.fromErrorType({type:26,details:"Not a keyless signature"});if(!(n.ephemeralCertificate.signature instanceof ue))throw E.fromErrorType({type:26,details:"Unsupported ephemeral certificate variant"});let d=n.ephemeralCertificate.signature;if(!(d.proof.proof instanceof yt))throw E.fromErrorType({type:26,details:"Unsupported proof variant for ZeroKnowledgeSig"});let f=d.proof.proof;if(n.expiryDateSecs<_chunkS7NKHRYEjs.ca.call(void 0, ))throw E.fromErrorType({type:27,details:"The expiryDateSecs is in the past"});if(d.expHorizonSecs>a)throw E.fromErrorType({type:28});if(!n.ephemeralPublicKey.verifySignature({message:t,signature:n.ephemeralSignature}))throw E.fromErrorType({type:29});let h=ru({publicKey:e,signature:n,jwk:o,keylessConfig:i});if(!s.verifyProof({publicInputsHash:h,groth16Proof:f}))throw E.fromErrorType({type:32});if(c){if(!d.trainingWheelsSignature)throw E.fromErrorType({type:30});let l=new li(f,h);if(!c.verifySignature({message:l.hash(),signature:d.trainingWheelsSignature}))throw E.fromErrorType({type:31})}}function ru(r){let{publicKey:e,signature:t,jwk:n,keylessConfig:i}=r,o=e instanceof K?e:e.keylessPublicKey;if(!(t.ephemeralCertificate.signature instanceof ue))throw new Error("Signature is not a ZeroKnowledgeSig");let s=t.ephemeralCertificate.signature,a=[];return a.push(...yr(t.ephemeralPublicKey.toUint8Array(),i.maxCommitedEpkBytes)),a.push(Pt(o.idCommitment)),a.push(t.expiryDateSecs),a.push(s.expHorizonSecs),a.push(Oe(o.iss,i.maxIssValBytes)),s.extraField?(a.push(1n),a.push(Oe(s.extraField,i.maxExtraFieldBytes))):(a.push(0n),a.push(Oe(" ",i.maxExtraFieldBytes))),a.push(Oe(_jsbase64.encode.call(void 0, t.jwtHeader,!0)+".",i.maxJwtHeaderB64Bytes)),a.push(n.toScalar()),s.overrideAudVal?(a.push(Oe(s.overrideAudVal,ui)),a.push(1n)):(a.push(Oe("",ui)),a.push(0n)),xt(a)}async function fi(r){let{cedraConfig:e,publicKey:t,kid:n}=r,i=t instanceof K?t:t.keylessPublicKey,{iss:o}=i,s,a=t instanceof W?t.jwkAddress:void 0;try{s=await ou({cedraConfig:e,jwkAddr:a})}catch(f){throw E.fromErrorType({type:24,error:f,details:`Failed to fetch ${a?"Federated":"Patched"}JWKs ${a?`for address ${a}`:"0x1"}`})}let c=s.get(o);if(c===void 0)throw E.fromErrorType({type:7,details:`JWKs for issuer ${o} not found.`});let d=c.find(f=>f.kid===n);if(d===void 0)throw E.fromErrorType({type:6,details:`JWK with kid '${n}' for issuer '${o}' not found.`});return d}function Ro(r){let{uidKey:e,uidVal:t,aud:n,pepper:i}=r,o=[Pt(_chunkS7NKHRYEjs.j.fromHexInput(i).toUint8Array()),Oe(n,ui),Oe(t,Xc),Oe(e,Jc)];return ei(xt(o),K.ID_COMMITMENT_LENGTH)}var ie=class r extends q{constructor(e){super();let{jwtHeader:t,ephemeralCertificate:n,expiryDateSecs:i,ephemeralPublicKey:o,ephemeralSignature:s}=e;this.jwtHeader=t,this.ephemeralCertificate=n,this.expiryDateSecs=i,this.ephemeralPublicKey=o,this.ephemeralSignature=s}getJwkKid(){return au(this.jwtHeader).kid}serialize(e){this.ephemeralCertificate.serialize(e),e.serializeStr(this.jwtHeader),e.serializeU64(this.expiryDateSecs),this.ephemeralPublicKey.serialize(e),this.ephemeralSignature.serialize(e)}static deserialize(e){let t=jt.deserialize(e),n=e.deserializeStr(),i=e.deserializeU64(),o=gt.deserialize(e),s=Fe.deserialize(e);return new r({jwtHeader:n,expiryDateSecs:Number(i),ephemeralCertificate:t,ephemeralPublicKey:o,ephemeralSignature:s})}static getSimulationSignature(){return new r({jwtHeader:"{}",ephemeralCertificate:new jt(new ue({proof:new Jt(new yt({a:new Uint8Array(32),b:new Uint8Array(64),c:new Uint8Array(32)}),0),expHorizonSecs:0}),0),expiryDateSecs:0,ephemeralPublicKey:new gt(new x(new Uint8Array(32))),ephemeralSignature:new Fe(new I(new Uint8Array(64)))})}static isSignature(e){return e instanceof r}},jt= exports.EphemeralCertificate =class r extends q{constructor(e,t){super(),this.signature=e,this.variant=t}toUint8Array(){return this.signature.toUint8Array()}serialize(e){e.serializeU32AsUleb128(this.variant),this.signature.serialize(e)}static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return new r(ue.deserialize(e),t);default:throw new Error(`Unknown variant index for EphemeralCertificate: ${t}`)}}},Ar=class Ar extends _chunkS7NKHRYEjs.l{constructor(e){if(super(),this.data=_chunkS7NKHRYEjs.j.fromHexInput(e).toUint8Array(),this.data.length!==32)throw new Error("Input needs to be 32 bytes")}serialize(e){e.serializeFixedBytes(this.data)}static deserialize(e){let t=e.deserializeFixedBytes(32);return new Ar(t)}toArray(){let e=this.toProjectivePoint();return[e.x.toString(),e.y.toString(),e.pz.toString()]}toProjectivePoint(){let e=new Uint8Array(this.data);e.reverse();let t=(e[0]&128)>>7,{Fp:n}=_bn254.bn254.fields,i=n.create(di(e)),o=n.sqrt(n.add(n.pow(i,3n),Ar.B)),s=n.neg(o),a=o>s==(t===1)?o:s;return _bn254.bn254.G1.ProjectivePoint.fromAffine({x:i,y:a})}};Ar.B=_bn254.bn254.fields.Fp.create(3n);var $e=Ar;function di(r){if(r.length!==32)throw new Error("Input should be 32 bytes");let e=new Uint8Array(r);return e[0]=e[0]&63,_utils.bytesToNumberBE.call(void 0, e)}var hr=class hr extends _chunkS7NKHRYEjs.l{constructor(e){if(super(),this.data=_chunkS7NKHRYEjs.j.fromHexInput(e).toUint8Array(),this.data.length!==64)throw new Error("Input needs to be 64 bytes")}serialize(e){e.serializeFixedBytes(this.data)}static deserialize(e){let t=e.deserializeFixedBytes(64);return new hr(t)}toArray(){let e=this.toProjectivePoint();return[[e.x.c0.toString(),e.x.c1.toString()],[e.y.c0.toString(),e.y.c1.toString()],[e.pz.c0.toString(),e.pz.c1.toString()]]}toProjectivePoint(){let e=new Uint8Array(this.data),t=e.slice(0,32).reverse(),n=e.slice(32,64).reverse(),i=(n[0]&128)>>7,{Fp2:o}=_bn254.bn254.fields,s=o.fromBigTuple([di(t),di(n)]),a=o.sqrt(o.add(o.pow(s,3n),hr.B)),c=o.neg(a),f=(a.c1>c.c1||a.c1===c.c1&&a.c0>c.c0)===(i===1)?a:c;return _bn254.bn254.G2.ProjectivePoint.fromAffine({x:s,y:f})}};hr.B=_bn254.bn254.fields.Fp2.fromBigTuple([19485874751759354771024239261021720505790618469301721065564631296452457478373n,266929791119991161246907387137283842545076965332900288569378510910307636690n]);var vt=hr,yt= exports.Groth16Zkp =class r extends tn{constructor(e){super();let{a:t,b:n,c:i}=e;this.a=new $e(t),this.b=new vt(n),this.c=new $e(i)}serialize(e){this.a.serialize(e),this.b.serialize(e),this.c.serialize(e)}static deserialize(e){let t=$e.deserialize(e).bcsToBytes(),n=vt.deserialize(e).bcsToBytes(),i=$e.deserialize(e).bcsToBytes();return new r({a:t,b:n,c:i})}toSnarkJsJson(){return{protocol:"groth16",curve:"bn128",pi_a:this.a.toArray(),pi_b:this.b.toArray(),pi_c:this.c.toArray()}}},li= exports.Groth16ProofAndStatement =class r extends _chunkS7NKHRYEjs.l{constructor(t,n){super();this.domainSeparator="CEDRA::Groth16ProofAndStatement";if(this.proof=t,this.publicInputsHash=typeof n=="bigint"?ei(n,32):_chunkS7NKHRYEjs.j.fromHexInput(n).toUint8Array(),this.publicInputsHash.length!==32)throw new Error("Invalid public inputs hash")}serialize(t){this.proof.serialize(t),t.serializeFixedBytes(this.publicInputsHash)}static deserialize(t){return new r(yt.deserialize(t),t.deserializeFixedBytes(32))}hash(){return ft(this.bcsToBytes(),this.domainSeparator)}},Jt= exports.ZkProof =class r extends _chunkS7NKHRYEjs.l{constructor(e,t){super(),this.proof=e,this.variant=t}serialize(e){e.serializeU32AsUleb128(this.variant),this.proof.serialize(e)}static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return new r(yt.deserialize(e),t);default:throw new Error(`Unknown variant index for ZkProof: ${t}`)}}},ue= exports.ZeroKnowledgeSig =class r extends q{constructor(e){super();let{proof:t,expHorizonSecs:n,trainingWheelsSignature:i,extraField:o,overrideAudVal:s}=e;this.proof=t,this.expHorizonSecs=n,this.trainingWheelsSignature=i,this.extraField=o,this.overrideAudVal=s}static fromBytes(e){return r.deserialize(new R(e))}serialize(e){this.proof.serialize(e),e.serializeU64(this.expHorizonSecs),e.serializeOption(this.extraField),e.serializeOption(this.overrideAudVal),e.serializeOption(this.trainingWheelsSignature)}static deserialize(e){let t=Jt.deserialize(e),n=Number(e.deserializeU64()),i=e.deserializeOption("string"),o=e.deserializeOption("string"),s=e.deserializeOption(Fe);return new r({proof:t,expHorizonSecs:n,trainingWheelsSignature:s,extraField:i,overrideAudVal:o})}},pi= exports.KeylessConfiguration =class r{constructor(e){let{verificationKey:t,trainingWheelsPubkey:n,maxExpHorizonSecs:i=jc,maxExtraFieldBytes:o=Zc,maxJwtHeaderB64Bytes:s=eu,maxIssValBytes:a=Yc,maxCommitedEpkBytes:c=tu}=e;this.verificationKey=t,this.maxExpHorizonSecs=i,n&&(this.trainingWheelsPubkey=new gt(new x(n))),this.maxExtraFieldBytes=o,this.maxJwtHeaderB64Bytes=s,this.maxIssValBytes=a,this.maxCommitedEpkBytes=c}static create(e,t){return new r({verificationKey:new gi({alphaG1:e.alpha_g1,betaG2:e.beta_g2,deltaG2:e.delta_g2,gammaAbcG1:e.gamma_abc_g1,gammaG2:e.gamma_g2}),maxExpHorizonSecs:Number(t.max_exp_horizon_secs),trainingWheelsPubkey:t.training_wheels_pubkey.vec[0],maxExtraFieldBytes:t.max_extra_field_bytes,maxJwtHeaderB64Bytes:t.max_jwt_header_b64_bytes,maxIssValBytes:t.max_iss_val_bytes,maxCommitedEpkBytes:t.max_commited_epk_bytes})}},gi= exports.Groth16VerificationKey =class r{constructor(e){let{alphaG1:t,betaG2:n,deltaG2:i,gammaAbcG1:o,gammaG2:s}=e;this.alphaG1=new $e(t),this.betaG2=new vt(n),this.deltaG2=new vt(i),this.gammaAbcG1=[new $e(o[0]),new $e(o[1])],this.gammaG2=new vt(s)}hash(){let e=new _chunkS7NKHRYEjs.m;return this.serialize(e),_sha3.sha3_256.create().update(e.toUint8Array()).digest()}serialize(e){this.alphaG1.serialize(e),this.betaG2.serialize(e),this.deltaG2.serialize(e),this.gammaAbcG1[0].serialize(e),this.gammaAbcG1[1].serialize(e),this.gammaG2.serialize(e)}static fromGroth16VerificationKeyResponse(e){return new r({alphaG1:e.alpha_g1,betaG2:e.beta_g2,deltaG2:e.delta_g2,gammaAbcG1:e.gamma_abc_g1,gammaG2:e.gamma_g2})}verifyProof(e){let{publicInputsHash:t,groth16Proof:n}=e;try{let i=n.a.toProjectivePoint(),o=n.b.toProjectivePoint(),s=n.c.toProjectivePoint(),a=this.alphaG1.toProjectivePoint(),c=this.betaG2.toProjectivePoint(),d=this.gammaG2.toProjectivePoint(),f=this.deltaG2.toProjectivePoint(),h=this.gammaAbcG1.map(ct=>ct.toProjectivePoint()),{Fp12:l}=_bn254.bn254.fields,p=h[0].add(h[1].multiply(t)),b=_bn254.bn254.pairing(p,d),F=_bn254.bn254.pairing(i,o),O=_bn254.bn254.pairing(a,c),Ne=_bn254.bn254.pairing(s,f),at=l.mul(O,l.mul(b,Ne));return l.eql(F,at)}catch(i){throw E.fromErrorType({type:32,error:i,details:"Error encountered when checking zero knowledge relation"})}}toSnarkJsJson(){return{protocol:"groth16",curve:"bn128",nPublic:1,vk_alpha_1:this.alphaG1.toArray(),vk_beta_2:this.betaG2.toArray(),vk_gamma_2:this.gammaG2.toArray(),vk_delta_2:this.deltaG2.toArray(),IC:this.gammaAbcG1.map(e=>e.toArray())}}};async function Xt(r){let{cedraConfig:e}=r;try{return await Ge(async()=>{let[t,n]=await Promise.all([nu(r),iu(r)]);return pi.create(n,t)},`keyless-configuration-${e.network}`,1e3*60*5)()}catch(t){throw t instanceof E?t:E.fromErrorType({type:25,error:t})}}function We(r){let{jwt:e,uidKey:t="sub"}=r,n;try{n=_jwtdecode.jwtDecode.call(void 0, e)}catch(o){throw E.fromErrorType({type:12,details:`Failed to parse JWT - ${_chunkS7NKHRYEjs.ba.call(void 0, o)}`})}if(typeof n.iss!="string")throw E.fromErrorType({type:12,details:"JWT is missing 'iss' in the payload. This should never happen."});if(typeof n.aud!="string")throw E.fromErrorType({type:12,details:"JWT is missing 'aud' in the payload or 'aud' is an array of values."});let i=n[t];return{iss:n.iss,aud:n.aud,uidVal:i}}async function nu(r){let{cedraConfig:e,options:t}=r,n="0x1::keyless_account::Configuration";try{let{data:i}=await G({cedraConfig:e,originMethod:"getKeylessConfigurationResource",path:`accounts/${_chunkS7NKHRYEjs.Y.from("0x1").toString()}/resource/${n}`,params:{ledger_version:_optionalChain([t, 'optionalAccess', _47 => _47.ledgerVersion])}});return i.data}catch(i){throw E.fromErrorType({type:22,error:i})}}async function iu(r){let{cedraConfig:e,options:t}=r,n="0x1::keyless_account::Groth16VerificationKey";try{let{data:i}=await G({cedraConfig:e,originMethod:"getGroth16VerificationKeyResource",path:`accounts/${_chunkS7NKHRYEjs.Y.from("0x1").toString()}/resource/${n}`,params:{ledger_version:_optionalChain([t, 'optionalAccess', _48 => _48.ledgerVersion])}});return i.data}catch(i){throw E.fromErrorType({type:23,error:i})}}async function ou(r){let{cedraConfig:e,jwkAddr:t,options:n}=r,i;if(t){let s="0x1::jwks::FederatedJWKs",{data:a}=await G({cedraConfig:e,originMethod:"getKeylessJWKs",path:`accounts/${_chunkS7NKHRYEjs.Y.from(t).toString()}/resource/${s}`,params:{ledger_version:_optionalChain([n, 'optionalAccess', _49 => _49.ledgerVersion])}});i=a}else{let s="0x1::jwks::PatchedJWKs",{data:a}=await G({cedraConfig:e,originMethod:"getKeylessJWKs",path:`accounts/0x1/resource/${s}`,params:{ledger_version:_optionalChain([n, 'optionalAccess', _50 => _50.ledgerVersion])}});i=a}let o=new Map;for(let s of i.data.jwks.entries){let a=[];for(let c of s.jwks){let{data:d}=c.variant,f=new R(_chunkS7NKHRYEjs.j.fromHexInput(d).toUint8Array()),h=mi.deserialize(f);a.push(h)}o.set(_chunkS7NKHRYEjs.k.call(void 0, s.issuer),a)}return o}var mi=class r extends _chunkS7NKHRYEjs.l{constructor(e){super();let{kid:t,kty:n,alg:i,e:o,n:s}=e;this.kid=t,this.kty=n,this.alg=i,this.e=o,this.n=s}serialize(e){e.serializeStr(this.kid),e.serializeStr(this.kty),e.serializeStr(this.alg),e.serializeStr(this.e),e.serializeStr(this.n)}static fromMoveStruct(e){let{data:t}=e.variant,n=new R(_chunkS7NKHRYEjs.j.fromHexInput(t).toUint8Array());return r.deserialize(n)}toScalar(){if(this.alg!=="RS256")throw E.fromErrorType({type:32,details:"Failed to convert JWK to scalar when calculating the public inputs hash. Only RSA 256 is supported currently"});let e=_chunkS7NKHRYEjs.fa.call(void 0, this.n),n=su(e.reverse()).map(i=>Pt(i));return n.push(256n),xt(n)}static deserialize(e){let t=e.deserializeStr(),n=e.deserializeStr(),i=e.deserializeStr(),o=e.deserializeStr(),s=e.deserializeStr();return new r({kid:t,kty:n,alg:i,n:s,e:o})}};function su(r){let e=[];for(let t=0;t<r.length;t+=24){let n=r.slice(t,Math.min(t+24,r.length));if(n.length<24){let i=new Uint8Array(24);i.set(n),e.push(i)}else e.push(n)}return e}function au(r){try{let e=JSON.parse(r);if(e.kid===void 0)throw new Error("JWT header missing kid");return e}catch (e2){throw new Error("Failed to parse JWT header.")}}var W=class r extends ne{constructor(e,t){super(),this.jwkAddress=_chunkS7NKHRYEjs.Y.from(e),this.keylessPublicKey=t}authKey(){let e=new _chunkS7NKHRYEjs.m;return e.serializeU32AsUleb128(4),e.serializeFixedBytes(this.bcsToBytes()),H.fromSchemeAndBytes({scheme:2,input:e.toUint8Array()})}verifySignature(e){try{return un({...e,publicKey:this}),!0}catch (e3){return!1}}serialize(e){this.jwkAddress.serialize(e),this.keylessPublicKey.serialize(e)}static deserialize(e){let t=_chunkS7NKHRYEjs.Y.deserialize(e),n=K.deserialize(e);return new r(t,n)}static isPublicKey(e){return e instanceof r}async verifySignatureAsync(e){return yi({...e,publicKey:this})}static create(e){return new r(e.jwkAddress,K.create(e))}static fromJwtAndPepper(e){return new r(e.jwkAddress,K.fromJwtAndPepper(e))}static isInstance(e){return"jwkAddress"in e&&e.jwkAddress instanceof _chunkS7NKHRYEjs.Y&&"keylessPublicKey"in e&&e.keylessPublicKey instanceof K}};var _secp256k1 = require('@noble/curves/secp256k1');var _bip32 = require('@scure/bip32');var Re=class Re extends _t{constructor(e){super();let t=_chunkS7NKHRYEjs.j.fromHexInput(e),{length:n}=t.toUint8Array();if(n===Re.LENGTH)this.key=t;else if(n===Re.COMPRESSED_LENGTH){let i=_secp256k1.secp256k1.ProjectivePoint.fromHex(t.toUint8Array());this.key=_chunkS7NKHRYEjs.j.fromHexInput(i.toRawBytes(!1))}else throw new Error(`PublicKey length should be ${Re.LENGTH} or ${Re.COMPRESSED_LENGTH}, received ${n}`)}verifySignature(e){let{message:t,signature:n}=e,i=$t(t),o=_chunkS7NKHRYEjs.j.fromHexInput(i).toUint8Array(),s=_sha3.sha3_256.call(void 0, o),a=n.toUint8Array();return _secp256k1.secp256k1.verify(a,s,this.key.toUint8Array(),{lowS:!0})}async verifySignatureAsync(e){return this.verifySignature(e)}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}deserialize(e){let t=e.deserializeBytes();return new je(t)}static deserialize(e){let t=e.deserializeBytes();return new Re(t)}static isPublicKey(e){return e instanceof Re}static isInstance(e){return"key"in e&&_optionalChain([e, 'access', _51 => _51.key, 'optionalAccess', _52 => _52.data, 'optionalAccess', _53 => _53.length])===Re.LENGTH}};Re.LENGTH=65,Re.COMPRESSED_LENGTH=33;var Ue=Re,Me=class Me extends _chunkS7NKHRYEjs.l{constructor(e,t){super();let n=lt.parseHexInput(e,"secp256k1",t);if(n.toUint8Array().length!==Me.LENGTH)throw new Error(`PrivateKey length should be ${Me.LENGTH}`);this.key=n}static generate(){let e=_secp256k1.secp256k1.utils.randomPrivateKey();return new Me(e,!1)}static fromDerivationPath(e,t){if(!lo(e))throw new Error(`Invalid derivation path ${e}`);return Me.fromDerivationPathInner(e,Zr(t))}static fromDerivationPathInner(e,t){let{privateKey:n}=_bip32.HDKey.fromMasterSeed(t).derive(e);if(n===null)throw new Error("Invalid key");return new Me(n,!1)}sign(e){let t=$t(e),n=_chunkS7NKHRYEjs.j.fromHexInput(t),i=_sha3.sha3_256.call(void 0, n.toUint8Array()),o=_secp256k1.secp256k1.sign(i,this.key.toUint8Array(),{lowS:!0});return new je(o.toCompactRawBytes())}publicKey(){let e=_secp256k1.secp256k1.getPublicKey(this.key.toUint8Array(),!1);return new Ue(e)}toUint8Array(){return this.key.toUint8Array()}toString(){return this.toAIP80String()}toHexString(){return this.key.toString()}toAIP80String(){return lt.formatPrivateKey(this.key.toString(),"secp256k1")}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new Me(t,!1)}static isPrivateKey(e){return e instanceof Me}};Me.LENGTH=32;var Qe=Me,Yt=class Yt extends q{constructor(e){super();let t=_chunkS7NKHRYEjs.j.fromHexInput(e);if(t.toUint8Array().length!==Yt.LENGTH)throw new Error(`Signature length should be ${Yt.LENGTH}, received ${t.toUint8Array().length}`);this.data=t}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new Yt(t)}};Yt.LENGTH=64;var je=Yt;var N=class r extends ne{constructor(e){if(super(),this.publicKey=e,e instanceof x)this.variant=0;else if(e instanceof Ue)this.variant=1;else if(e instanceof K)this.variant=3;else if(e instanceof W)this.variant=4;else throw new Error("Unsupported public key type")}verifySignature(e){let{message:t,signature:n}=e;if(this.publicKey instanceof K)throw new Error("Use verifySignatureAsync to verify Keyless signatures");return this.publicKey.verifySignature({message:t,signature:n.signature})}async verifySignatureAsync(e){if(!(e.signature instanceof B)){if(_optionalChain([e, 'access', _54 => _54.options, 'optionalAccess', _55 => _55.throwErrorWithReason]))throw new Error("Signature must be an instance of AnySignature");return!1}return await this.publicKey.verifySignatureAsync({...e,signature:e.signature.signature})}authKey(){return H.fromSchemeAndBytes({scheme:2,input:this.toUint8Array()})}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.publicKey.serialize(e)}static deserialize(e){let t=e.deserializeUleb128AsU32(),n;switch(t){case 0:n=x.deserialize(e);break;case 1:n=Ue.deserialize(e);break;case 3:n=K.deserialize(e);break;case 4:n=W.deserialize(e);break;default:throw new Error(`Unknown variant index for AnyPublicKey: ${t}`)}return new r(n)}static isPublicKey(e){return e instanceof r}isEd25519(){return this.publicKey instanceof x}isSecp256k1PublicKey(){return this.publicKey instanceof Ue}static isInstance(e){return"publicKey"in e&&"variant"in e}},B= exports.AnySignature =class r extends q{constructor(e){if(super(),this.signature=e,e instanceof I)this.variant=0;else if(e instanceof je)this.variant=1;else if(e instanceof ie)this.variant=3;else throw new Error("Unsupported signature type")}toUint8Array(){return console.warn("[Cedra SDK] Calls to AnySignature.toUint8Array() will soon return the underlying signature bytes. Use AnySignature.bcsToBytes() instead."),this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.signature.serialize(e)}static deserialize(e){let t=e.deserializeUleb128AsU32(),n;switch(t){case 0:n=I.deserialize(e);break;case 1:n=je.deserialize(e);break;case 3:n=ie.deserialize(e);break;default:throw new Error(`Unknown variant index for AnySignature: ${t}`)}return new r(n)}static isInstance(e){return"signature"in e&&typeof e.signature=="object"&&e.signature!==null&&"toUint8Array"in e.signature}};function uu(r){let e=r;return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}var br=class extends ne{constructor(e){super(),this.publicKeys=e.publicKeys}createBitmap(e){let{bits:t}=e,n=128,i=new Uint8Array([0,0,0,0]),o=new Set;return t.forEach((s,a)=>{if(a+1>this.publicKeys.length)throw new Error(`Signature index ${a+1} is out of public keys range, ${this.publicKeys.length}.`);if(o.has(s))throw new Error(`Duplicate bit ${s} detected.`);o.add(s);let c=Math.floor(s/8),d=i[c];d|=n>>s%8,i[c]=d}),i}getIndex(e){let t=this.publicKeys.findIndex(n=>n.toString()===e.toString());if(t!==-1)return t;throw new Error(`Public key ${e} not found in multi key set ${this.publicKeys}`)}},be= exports.MultiKey =class r extends br{constructor(e){let{publicKeys:t,signaturesRequired:n}=e;if(super({publicKeys:t}),n<1)throw new Error("The number of required signatures needs to be greater than 0");if(t.length<n)throw new Error(`Provided ${t.length} public keys is smaller than the ${n} required signatures`);this.publicKeys=t.map(i=>i instanceof N?i:new N(i)),this.signaturesRequired=n}verifySignature(e){let{message:t,signature:n}=e;if(n.signatures.length!==this.signaturesRequired)throw new Error("The number of signatures does not match the number of required signatures");let i=n.bitMapToSignerIndices();for(let o=0;o<n.signatures.length;o+=1){let s=n.signatures[o];if(!this.publicKeys[i[o]].verifySignature({message:t,signature:s}))return!1}return!0}async verifySignatureAsync(e){let{signature:t}=e;try{if(!(t instanceof we))throw new Error("Signature is not a MultiKeySignature");if(t.signatures.length!==this.signaturesRequired)throw new Error("The number of signatures does not match the number of required signatures");let n=t.bitMapToSignerIndices();for(let i=0;i<t.signatures.length;i+=1){let o=t.signatures[i];if(!await this.publicKeys[n[i]].verifySignatureAsync({...e,signature:o}))return!1}return!0}catch(n){if(_optionalChain([e, 'access', _56 => _56.options, 'optionalAccess', _57 => _57.throwErrorWithReason]))throw n;return!1}}authKey(){return H.fromSchemeAndBytes({scheme:3,input:this.toUint8Array()})}serialize(e){e.serializeVector(this.publicKeys),e.serializeU8(this.signaturesRequired)}static deserialize(e){let t=e.deserializeVector(N),n=e.deserializeU8();return new r({publicKeys:t,signaturesRequired:n})}getIndex(e){let t=e instanceof N?e:new N(e);return super.getIndex(t)}static isInstance(e){return"publicKeys"in e&&"signaturesRequired"in e}},de=class de extends q{constructor(e){super();let{signatures:t,bitmap:n}=e;if(t.length>de.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${de.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=t.map(o=>o instanceof B?o:new B(o)),!(n instanceof Uint8Array))this.bitmap=de.createBitmap({bits:n});else{if(n.length!==de.BITMAP_LEN)throw new Error(`"bitmap" length should be ${de.BITMAP_LEN}`);this.bitmap=n}let i=this.bitmap.reduce((o,s)=>o+uu(s),0);if(i!==this.signatures.length)throw new Error(`Expecting ${i} signatures from the bitmap, but got ${this.signatures.length}`)}static createBitmap(e){let{bits:t}=e,n=128,i=new Uint8Array([0,0,0,0]),o=new Set;return t.forEach(s=>{if(s>=de.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${de.MAX_SIGNATURES_SUPPORTED-1}.`);if(o.has(s))throw new Error("Duplicate bits detected.");o.add(s);let a=Math.floor(s/8),c=i[a];c|=n>>s%8,i[a]=c}),i}bitMapToSignerIndices(){let e=[];for(let t=0;t<this.bitmap.length;t+=1){let n=this.bitmap[t];for(let i=0;i<8;i+=1)(n&128>>i)!==0&&e.push(t*8+i)}return e}serialize(e){e.serializeVector(this.signatures),e.serializeBytes(this.bitmap)}static deserialize(e){let t=e.deserializeVector(B),n=e.deserializeBytes();return new de({signatures:t,bitmap:n})}};de.BITMAP_LEN=4,de.MAX_SIGNATURES_SUPPORTED=de.BITMAP_LEN*8;var we=de;var Se=class Se extends br{constructor(e){let{publicKeys:t,threshold:n}=e;if(super({publicKeys:t}),t.length>Se.MAX_KEYS||t.length<Se.MIN_KEYS)throw new Error(`Must have between ${Se.MIN_KEYS} and ${Se.MAX_KEYS} public keys, inclusive`);if(n<Se.MIN_THRESHOLD||n>t.length)throw new Error(`Threshold must be between ${Se.MIN_THRESHOLD} and ${t.length}, inclusive`);this.publicKeys=t,this.threshold=n}verifySignature(e){let{message:t,signature:n}=e;if(!(n instanceof ke))return!1;let i=[];for(let o=0;o<4;o+=1)for(let s=0;s<8;s+=1)if((n.bitmap[o]&1<<7-s)!==0){let c=o*8+s;i.push(c)}if(i.length!==n.signatures.length)throw new Error("Bitmap and signatures length mismatch");if(i.length<this.threshold)throw new Error("Not enough signatures");for(let o=0;o<i.length;o+=1)if(!this.publicKeys[i[o]].verifySignature({message:t,signature:n.signatures[o]}))return!1;return!0}async verifySignatureAsync(e){return this.verifySignature(e)}authKey(){return H.fromSchemeAndBytes({scheme:1,input:this.toUint8Array()})}toUint8Array(){let e=new Uint8Array(this.publicKeys.length*x.LENGTH+1);return this.publicKeys.forEach((t,n)=>{e.set(t.toUint8Array(),n*x.LENGTH)}),e[this.publicKeys.length*x.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes(),n=t[t.length-1],i=[];for(let o=0;o<t.length-1;o+=x.LENGTH){let s=o;i.push(new x(t.subarray(s,s+x.LENGTH)))}return new Se({publicKeys:i,threshold:n})}getIndex(e){return super.getIndex(e)}};Se.MAX_KEYS=32,Se.MIN_KEYS=2,Se.MIN_THRESHOLD=1;var At=Se,le=class le extends q{constructor(e){super();let{signatures:t,bitmap:n}=e;if(t.length>le.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${le.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=t,!(n instanceof Uint8Array))this.bitmap=le.createBitmap({bits:n});else{if(n.length!==le.BITMAP_LEN)throw new Error(`"bitmap" length should be ${le.BITMAP_LEN}`);this.bitmap=n}}toUint8Array(){let e=new Uint8Array(this.signatures.length*I.LENGTH+le.BITMAP_LEN);return this.signatures.forEach((t,n)=>{e.set(t.toUint8Array(),n*I.LENGTH)}),e.set(this.bitmap,this.signatures.length*I.LENGTH),e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes(),n=t.subarray(t.length-4),i=[];for(let o=0;o<t.length-n.length;o+=I.LENGTH){let s=o;i.push(new I(t.subarray(s,s+I.LENGTH)))}return new le({signatures:i,bitmap:n})}static createBitmap(e){let{bits:t}=e,n=128,i=new Uint8Array([0,0,0,0]),o=new Set;return t.forEach((s,a)=>{if(s>=le.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${le.MAX_SIGNATURES_SUPPORTED-1}.`);if(o.has(s))throw new Error("Duplicate bits detected.");if(a>0&&s<=t[a-1])throw new Error("The bits need to be sorted in ascending order.");o.add(s);let c=Math.floor(s/8),d=i[c];d|=n>>s%8,i[c]=d}),i}};le.MAX_SIGNATURES_SUPPORTED=32,le.BITMAP_LEN=4;var ke=le;var dn="Multiple possible deserializations found";function iy(r){let e=[x,N,At,be,K,W,Ue],t;for(let n of e)try{let i=R.fromHex(r),o=n.deserialize(i);if(i.assertFinished(),t)throw new Error(`${dn}: ${r}`);t=o}catch(i){if(i instanceof Error&&i.message.includes(dn))throw i}if(!t)throw new Error(`Failed to deserialize public key: ${r}`);return t}function oy(r){let e=[I,B,ke,we,ie,je],t;for(let n of e)try{let i=R.fromHex(r),o=n.deserialize(i);if(i.assertFinished(),t)throw new Error(`${dn}: ${r}`);t=o}catch(i){if(i instanceof Error&&i.message.includes(dn))throw i}if(!t)throw new Error(`Failed to deserialize signature: ${r}`);return t}var J=class extends _chunkS7NKHRYEjs.l{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return De.load(e);case 1:return Je.load(e);case 2:return oe.load(e);case 3:return Ve.load(e);case 4:return Zt.load(e);case 5:return Kt.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}isEd25519(){return this instanceof De}isMultiEd25519(){return this instanceof Je}isSingleKey(){return this instanceof oe}isMultiKey(){return this instanceof Ve}},De= exports.AccountAuthenticatorEd25519 =class r extends J{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=x.deserialize(e),n=I.deserialize(e);return new r(t,n)}},Je= exports.AccountAuthenticatorMultiEd25519 =class r extends J{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=At.deserialize(e),n=ke.deserialize(e);return new r(t,n)}},oe= exports.AccountAuthenticatorSingleKey =class r extends J{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(2),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=N.deserialize(e),n=B.deserialize(e);return new r(t,n)}},Ve= exports.AccountAuthenticatorMultiKey =class r extends J{constructor(e,t){super(),this.public_keys=e,this.signatures=t}serialize(e){e.serializeU32AsUleb128(3),this.public_keys.serialize(e),this.signatures.serialize(e)}static load(e){let t=be.deserialize(e),n=we.deserialize(e);return new r(t,n)}},Zt= exports.AccountAuthenticatorNoAccountAuthenticator =class r extends J{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new r}},Kt= exports.AccountAuthenticatorAbstraction =class r extends J{constructor(e,t,n,i){if(super(),!_chunkS7NKHRYEjs.la.call(void 0, e))throw new Error(`Invalid function info ${e} passed into AccountAuthenticatorAbstraction`);this.functionInfo=e,this.authenticator=n,this.signingMessageDigest=_chunkS7NKHRYEjs.j.fromHexInput(_chunkS7NKHRYEjs.j.fromHexInput(t).toUint8Array()),this.accountIdentity=i}serialize(e){e.serializeU32AsUleb128(5);let{moduleAddress:t,moduleName:n,functionName:i}=_chunkS7NKHRYEjs.ka.call(void 0, this.functionInfo);_chunkS7NKHRYEjs.Y.fromString(t).serialize(e),e.serializeStr(n),e.serializeStr(i),this.accountIdentity?e.serializeU32AsUleb128(1):e.serializeU32AsUleb128(0),e.serializeBytes(this.signingMessageDigest.toUint8Array()),this.accountIdentity?e.serializeBytes(this.authenticator):e.serializeFixedBytes(this.authenticator),this.accountIdentity&&e.serializeBytes(this.accountIdentity)}static load(e){let t=_chunkS7NKHRYEjs.Y.deserialize(e),n=e.deserializeStr(),i=e.deserializeStr(),o=e.deserializeUleb128AsU32();if(o===0){let s=e.deserializeBytes(),a=e.deserializeFixedBytes(e.remaining());return new r(`${t}::${n}::${i}`,s,a)}if(o===1){let s=e.deserializeBytes(),a=e.deserializeBytes(),c=e.deserializeBytes();return new r(`${t}::${n}::${i}`,s,a,c)}throw new Error(`Unknown variant index for AccountAuthenticatorAbstraction: ${o}`)}};var Rt=class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),this.chainId=e}serialize(e){e.serializeU8(this.chainId)}static deserialize(e){let t=e.deserializeU8();return new r(t)}};var U=class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),this.identifier=e}serialize(e){e.serializeStr(this.identifier)}static deserialize(e){let t=e.deserializeStr();return new r(t)}};var wr=class r extends _chunkS7NKHRYEjs.l{constructor(e,t){super(),this.address=e,this.name=t}static fromStr(e){let t=e.split("::");if(t.length!==2)throw new Error("Invalid module id.");return new r(_chunkS7NKHRYEjs.Y.fromString(t[0]),new U(t[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){let t=_chunkS7NKHRYEjs.Y.deserialize(e),n=U.deserialize(e);return new r(t,n)}};var k=class r extends _chunkS7NKHRYEjs.l{deserialize(e){let t=_chunkS7NKHRYEjs.Y.deserialize(e),n=U.deserialize(e),i=U.deserialize(e),o=e.deserializeVector(r);return new He(t,n,i,o)}static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return L.load(e);case 1:return pe.load(e);case 2:return X.load(e);case 3:return Ze.load(e);case 4:return M.load(e);case 5:return Ut.load(e);case 6:return v.load(e);case 7:return A.load(e);case 8:return Xe.load(e);case 9:return Ye.load(e);case 10:return et.load(e);case 255:return V.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${t}`)}}isBool(){return this instanceof L}isAddress(){return this instanceof M}isGeneric(){return this instanceof V}isSigner(){return this instanceof Ut}isVector(){return this instanceof v}isStruct(){return this instanceof A}isU8(){return this instanceof pe}isU16(){return this instanceof Xe}isU32(){return this instanceof Ye}isU64(){return this instanceof X}isU128(){return this instanceof Ze}isU256(){return this instanceof et}isPrimitive(){return this instanceof Ut||this instanceof M||this instanceof L||this instanceof pe||this instanceof Xe||this instanceof Ye||this instanceof X||this instanceof Ze||this instanceof et}},L= exports.TypeTagBool =class r extends k{toString(){return"bool"}serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new r}},pe= exports.TypeTagU8 =class r extends k{toString(){return"u8"}serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new r}},Xe= exports.TypeTagU16 =class r extends k{toString(){return"u16"}serialize(e){e.serializeU32AsUleb128(8)}static load(e){return new r}},Ye= exports.TypeTagU32 =class r extends k{toString(){return"u32"}serialize(e){e.serializeU32AsUleb128(9)}static load(e){return new r}},X= exports.TypeTagU64 =class r extends k{toString(){return"u64"}serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new r}},Ze= exports.TypeTagU128 =class r extends k{toString(){return"u128"}serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new r}},et= exports.TypeTagU256 =class r extends k{toString(){return"u256"}serialize(e){e.serializeU32AsUleb128(10)}static load(e){return new r}},M= exports.TypeTagAddress =class r extends k{toString(){return"address"}serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new r}},Ut= exports.TypeTagSigner =class r extends k{toString(){return"signer"}serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new r}},ln= exports.TypeTagReference =class r extends k{constructor(t){super();this.value=t}toString(){return`&${this.value.toString()}`}serialize(t){t.serializeU32AsUleb128(254)}static load(t){let n=k.deserialize(t);return new r(n)}},V= exports.TypeTagGeneric =class r extends k{constructor(t){super();this.value=t;if(t<0)throw new Error("Generic type parameter index cannot be negative")}toString(){return`T${this.value}`}serialize(t){t.serializeU32AsUleb128(255),t.serializeU32(this.value)}static load(t){let n=t.deserializeU32();return new r(n)}},v= exports.TypeTagVector =class r extends k{constructor(t){super();this.value=t}toString(){return`vector<${this.value.toString()}>`}static u8(){return new r(new pe)}serialize(t){t.serializeU32AsUleb128(6),this.value.serialize(t)}static load(t){let n=k.deserialize(t);return new r(n)}},A= exports.TypeTagStruct =class r extends k{constructor(t){super();this.value=t}toString(){let t="";return this.value.typeArgs.length>0&&(t=`<${this.value.typeArgs.map(n=>n.toString()).join(", ")}>`),`${this.value.address.toString()}::${this.value.moduleName.identifier}::${this.value.name.identifier}${t}`}serialize(t){t.serializeU32AsUleb128(7),this.value.serialize(t)}static load(t){let n=He.deserialize(t);return new r(n)}isTypeTag(t,n,i){return this.value.moduleName.identifier===n&&this.value.name.identifier===i&&this.value.address.equals(t)}isString(){return this.isTypeTag(_chunkS7NKHRYEjs.Y.ONE,"string","String")}isOption(){return this.isTypeTag(_chunkS7NKHRYEjs.Y.ONE,"option","Option")}isObject(){return this.isTypeTag(_chunkS7NKHRYEjs.Y.ONE,"object","Object")}isDelegationKey(){return this.isTypeTag(_chunkS7NKHRYEjs.Y.ONE,"permissioned_delegation","DelegationKey")}isRateLimiter(){return this.isTypeTag(_chunkS7NKHRYEjs.Y.ONE,"rate_limiter","RateLimiter")}},He= exports.StructTag =class r extends _chunkS7NKHRYEjs.l{constructor(e,t,n,i){super(),this.address=e,this.moduleName=t,this.name=n,this.typeArgs=i}serialize(e){e.serialize(this.address),e.serialize(this.moduleName),e.serialize(this.name),e.serializeVector(this.typeArgs)}static deserialize(e){let t=_chunkS7NKHRYEjs.Y.deserialize(e),n=U.deserialize(e),i=U.deserialize(e),o=e.deserializeVector(k);return new r(t,n,i,o)}};function tf(){return new He(_chunkS7NKHRYEjs.Y.ONE,new U("cedra_coin"),new U("CedraCoin"),[])}function _(){return new He(_chunkS7NKHRYEjs.Y.ONE,new U("string"),new U("String"),[])}function rf(r){return new He(_chunkS7NKHRYEjs.Y.ONE,new U("option"),new U("Option"),[r])}function ge(r){return new He(_chunkS7NKHRYEjs.Y.ONE,new U("object"),new U("Object"),[r])}function du(r){let e=r.deserializeUleb128AsU32();switch(e){case 0:return Y.deserialize(r);case 1:return j.deserialize(r);case 2:return ve.deserialize(r);case 3:return _chunkS7NKHRYEjs.Y.deserialize(r);case 4:return S.deserialize(r,Y);case 5:return z.deserialize(r);case 6:return xe.deserialize(r);case 7:return Ie.deserialize(r);case 8:return Ae.deserialize(r);case 9:return pr.deserialize(r);default:throw new Error(`Unknown variant index for ScriptTransactionArgument: ${e}`)}}var ht=class extends _chunkS7NKHRYEjs.l{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Sr.load(e);case 2:return Cr.load(e);case 3:return Er.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},Sr= exports.TransactionPayloadScript =class r extends ht{constructor(e){super(),this.script=e}serialize(e){e.serializeU32AsUleb128(0),this.script.serialize(e)}static load(e){let t=_r.deserialize(e);return new r(t)}},Cr= exports.TransactionPayloadEntryFunction =class r extends ht{constructor(e){super(),this.entryFunction=e}serialize(e){e.serializeU32AsUleb128(2),this.entryFunction.serialize(e)}static load(e){let t=kt.deserialize(e);return new r(t)}},Er= exports.TransactionPayloadMultiSig =class r extends ht{constructor(e){super(),this.multiSig=e}serialize(e){e.serializeU32AsUleb128(3),this.multiSig.serialize(e)}static load(e){let t=Pr.deserialize(e);return new r(t)}},kt= exports.EntryFunction =class r{constructor(e,t,n,i){this.module_name=e,this.function_name=t,this.type_args=n,this.args=i}static build(e,t,n,i){return new r(wr.fromStr(e),new U(t),n,i)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{t.serializeForEntryFunction(e)})}static deserialize(e){let t=wr.deserialize(e),n=U.deserialize(e),i=e.deserializeVector(k),o=e.deserializeUleb128AsU32(),s=new Array;for(let a=0;a<o;a+=1){let c=e.deserializeUleb128AsU32(),d=Xr.deserialize(e,c);s.push(d)}return new r(t,n,i,s)}},_r= exports.Script =class r{constructor(e,t,n){this.bytecode=e,this.type_args=t,this.args=n}serialize(e){e.serializeBytes(this.bytecode),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{t.serializeForScriptFunction(e)})}static deserialize(e){let t=e.deserializeBytes(),n=e.deserializeVector(k),i=e.deserializeUleb128AsU32(),o=new Array;for(let s=0;s<i;s+=1){let a=du(e);o.push(a)}return new r(t,n,o)}},Pr= exports.MultiSig =class r{constructor(e,t){this.multisig_address=e,this.transaction_payload=t}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){let t=_chunkS7NKHRYEjs.Y.deserialize(e),n=e.deserializeBool(),i;return n&&(i=xr.deserialize(e)),new r(t,i)}},xr= exports.MultiSigTransactionPayload =class r extends _chunkS7NKHRYEjs.l{constructor(e){super(),this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new r(kt.deserialize(e))}};var Ce=class r extends _chunkS7NKHRYEjs.l{constructor(e,t,n,i,o,s,a,c){super(),this.sender=e,this.sequence_number=t,this.payload=n,this.max_gas_amount=i,this.gas_unit_price=o,this.expiration_timestamp_secs=s,this.chain_id=a,this.fa_address=c}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e),this.fa_address.serialize(e)}static deserialize(e){let t=_chunkS7NKHRYEjs.Y.deserialize(e),n=e.deserializeU64(),i=ht.deserialize(e),o=e.deserializeU64(),s=e.deserializeU64(),a=e.deserializeU64(),c=Rt.deserialize(e),d=k.deserialize(e);return new r(t,n,i,o,s,a,c,d)}},Do= exports.CommissionRawTransaction =class r extends _chunkS7NKHRYEjs.l{constructor(e,t,n,i,o,s,a,c){super(),this.sender=e,this.sequence_number=t,this.payload=n,this.max_gas_amount=i,this.gas_unit_price=o,this.expiration_timestamp_secs=s,this.chain_id=a,this.fa_address=c}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e),this.fa_address.serialize(e)}static deserialize(e){let t=_chunkS7NKHRYEjs.Y.deserialize(e),n=e.deserializeU64(),i=ht.deserialize(e),o=e.deserializeU64(),s=e.deserializeU64(),a=e.deserializeU64(),c=Rt.deserialize(e),d=k.deserialize(e);return new r(t,n,i,o,s,a,c,d)}},pn= exports.RawTransactionWithData =class extends _chunkS7NKHRYEjs.l{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Dt.load(e);case 1:return zt.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}},Dt= exports.MultiAgentRawTransaction =class r extends pn{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses)}static load(e){let t=Ce.deserialize(e),n=e.deserializeVector(_chunkS7NKHRYEjs.Y);return new r(t,n)}},zt= exports.FeePayerRawTransaction =class r extends pn{constructor(e,t,n){super(),this.raw_txn=e,this.secondary_signer_addresses=t,this.fee_payer_address=n}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses),this.fee_payer_address.serialize(e)}static load(e){let t=Ce.deserialize(e),n=e.deserializeVector(_chunkS7NKHRYEjs.Y),i=_chunkS7NKHRYEjs.Y.deserialize(e);return new r(t,n,i)}};var gn=class extends _chunkS7NKHRYEjs.l{constructor(t){super();this.accountAddress=_chunkS7NKHRYEjs.Y.ONE;this.moduleName=new P("account");this.structName=new P("RotationProofChallenge");this.sequenceNumber=new j(t.sequenceNumber),this.originator=t.originator,this.currentAuthKey=t.currentAuthKey,this.newPublicKey=S.U8(t.newPublicKey.toUint8Array())}serialize(t){t.serialize(this.accountAddress),t.serialize(this.moduleName),t.serialize(this.structName),t.serialize(this.sequenceNumber),t.serialize(this.originator),t.serialize(this.currentAuthKey),t.serialize(this.newPublicKey)}};var tt=class extends _chunkS7NKHRYEjs.l{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Nt.load(e);case 1:return er.load(e);case 2:return Ft.load(e);case 3:return Ot.load(e);case 4:return Tt.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}isEd25519(){return this instanceof Nt}isMultiEd25519(){return this instanceof er}isMultiAgent(){return this instanceof Ft}isFeePayer(){return this instanceof Ot}isSingleSender(){return this instanceof Tt}},Nt= exports.TransactionAuthenticatorEd25519 =class r extends tt{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=x.deserialize(e),n=I.deserialize(e);return new r(t,n)}},er= exports.TransactionAuthenticatorMultiEd25519 =class r extends tt{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=At.deserialize(e),n=ke.deserialize(e);return new r(t,n)}},Ft= exports.TransactionAuthenticatorMultiAgent =class r extends tt{constructor(e,t,n){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=n}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers)}static load(e){let t=J.deserialize(e),n=e.deserializeVector(_chunkS7NKHRYEjs.Y),i=e.deserializeVector(J);return new r(t,n,i)}},Ot= exports.TransactionAuthenticatorFeePayer =class r extends tt{constructor(e,t,n,i){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=n,this.fee_payer=i}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){let t=J.deserialize(e),n=e.deserializeVector(_chunkS7NKHRYEjs.Y),i=e.deserializeVector(J),o=_chunkS7NKHRYEjs.Y.deserialize(e),s=J.deserialize(e),a={address:o,authenticator:s};return new r(t,n,i,a)}},Tt= exports.TransactionAuthenticatorSingleSender =class r extends tt{constructor(e){super(),this.sender=e}serialize(e){e.serializeU32AsUleb128(4),this.sender.serialize(e)}static load(e){let t=J.deserialize(e);return new r(t)}};var rt=class r extends _chunkS7NKHRYEjs.l{constructor(e,t){super(),this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){let t=Ce.deserialize(e),n=tt.deserialize(e);return new r(t,n)}};var mn=class r extends _chunkS7NKHRYEjs.l{constructor(e,t){super(),this.rawTransaction=e,this.feePayerAddress=t}serialize(e){this.rawTransaction.serialize(e),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let t=Ce.deserialize(e),n=e.deserializeBool(),i;return n&&(i=_chunkS7NKHRYEjs.Y.deserialize(e)),new r(t,i)}};var yn=class r extends _chunkS7NKHRYEjs.l{constructor(e,t,n){super(),this.rawTransaction=e,this.feePayerAddress=n,this.secondarySignerAddresses=t}serialize(e){this.rawTransaction.serialize(e),e.serializeVector(this.secondarySignerAddresses),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let t=Ce.deserialize(e),n=e.deserializeVector(_chunkS7NKHRYEjs.Y),i=e.deserializeBool(),o;return i&&(o=_chunkS7NKHRYEjs.Y.deserialize(e)),new r(t,n,o)}};function fn(r){return r.feePayerAddress?new zt(r.rawTransaction,_nullishCoalesce(r.secondarySignerAddresses, () => ([])),r.feePayerAddress):r.secondarySignerAddresses?new Dt(r.rawTransaction,r.secondarySignerAddresses):r.rawTransaction}function ft(r,e){let t=_sha3.sha3_256.create();if(!e.startsWith("CEDRA::"))throw new Error(`Domain separator needs to start with 'CEDRA::'.  Provided - ${e}`);t.update(e);let n=t.digest(),i=r,o=new Uint8Array(n.length+i.length);return o.set(n),o.set(i,n.length),o}function yA(r){return ft(r.bcsToBytes(),`CEDRA::${r.constructor.name}`)}function ze(r){let e=fn(r);return r.feePayerAddress?ft(e.bcsToBytes(),oi):r.secondarySignerAddresses?ft(e.bcsToBytes(),oi):ft(e.bcsToBytes(),Co)}var se=class r{constructor(e){this.signingScheme=0;let{privateKey:t,address:n}=e;this.privateKey=t,this.publicKey=t.publicKey(),this.accountAddress=n?_chunkS7NKHRYEjs.Y.from(n):this.publicKey.authKey().derivedAddress()}static generate(){let e=$.generate();return new r({privateKey:e})}static fromDerivationPath(e){let{path:t,mnemonic:n}=e,i=$.fromDerivationPath(t,n);return new r({privateKey:i})}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return this.publicKey.verifySignatureAsync({...e,signature:e.signature})}signWithAuthenticator(e){return new De(this.publicKey,this.privateKey.sign(e))}signTransactionWithAuthenticator(e){return new De(this.publicKey,this.signTransaction(e))}sign(e){return this.privateKey.sign(e)}signTransaction(e){return this.sign(ze(e))}};function Ai(r){return typeof r=="object"&&r!==null&&"getAnyPublicKey"in r&&typeof r.getAnyPublicKey=="function"}var Ee=class r{constructor(e){this.signingScheme=2;let{privateKey:t,address:n}=e;this.privateKey=t,this.publicKey=new N(t.publicKey()),this.accountAddress=n?_chunkS7NKHRYEjs.Y.from(n):this.publicKey.authKey().derivedAddress()}getAnyPublicKey(){return this.publicKey}static generate(e={}){let{scheme:t=0}=e,n;switch(t){case 0:n=$.generate();break;case 2:n=Qe.generate();break;default:throw new Error(`Unsupported signature scheme ${t}`)}return new r({privateKey:n})}static fromDerivationPath(e){let{scheme:t=0,path:n,mnemonic:i}=e,o;switch(t){case 0:o=$.fromDerivationPath(n,i);break;case 2:o=Qe.fromDerivationPath(n,i);break;default:throw new Error(`Unsupported signature scheme ${t}`)}return new r({privateKey:o})}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return this.publicKey.verifySignatureAsync({...e,signature:e.signature})}signWithAuthenticator(e){return new oe(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new oe(this.publicKey,this.signTransaction(e))}sign(e){return new B(this.privateKey.sign(e))}signTransaction(e){return this.sign(ze(e))}static fromEd25519Account(e){return new r({privateKey:e.privateKey,address:e.accountAddress})}};var nt=class{static generate(e={}){let{scheme:t=0,legacy:n=!0}=e;return t===0&&n?se.generate():Ee.generate({scheme:t})}static fromPrivateKey(e){let{privateKey:t,address:n,legacy:i=!0}=e;return t instanceof $&&i?new se({privateKey:t,address:n}):new Ee({privateKey:t,address:n})}static fromPrivateKeyAndAddress(e){return this.fromPrivateKey(e)}static fromDerivationPath(e){let{scheme:t=0,mnemonic:n,path:i,legacy:o=!0}=e;return t===0&&o?se.fromDerivationPath({mnemonic:n,path:i}):Ee.fromDerivationPath({scheme:t,mnemonic:n,path:i})}static authKey(e){let{publicKey:t}=e;return t.authKey()}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return this.publicKey.verifySignatureAsync(e)}};var _utils3 = require('@noble/hashes/utils');var gu=1209600,tr=class tr extends _chunkS7NKHRYEjs.l{constructor(e){super();let{privateKey:t,expiryDateSecs:n,blinder:i}=e;this.privateKey=t,this.publicKey=new gt(t.publicKey()),this.expiryDateSecs=n||_chunkS7NKHRYEjs.da.call(void 0, _chunkS7NKHRYEjs.ca.call(void 0, )+gu),this.blinder=i!==void 0?_chunkS7NKHRYEjs.j.fromHexInput(i).toUint8Array():mu();let o=yr(this.publicKey.bcsToBytes(),93);o.push(BigInt(this.expiryDateSecs)),o.push(Pt(this.blinder));let s=xt(o);this.nonce=s.toString()}getPublicKey(){return this.publicKey}isExpired(){return Math.floor(Date.now()/1e3)>this.expiryDateSecs}serialize(e){e.serializeU32AsUleb128(this.publicKey.variant),e.serializeBytes(this.privateKey.toUint8Array()),e.serializeU64(this.expiryDateSecs),e.serializeFixedBytes(this.blinder)}static deserialize(e){let t=e.deserializeUleb128AsU32(),n;switch(t){case 0:n=$.deserialize(e);break;default:throw new Error(`Unknown variant index for EphemeralPublicKey: ${t}`)}let i=e.deserializeU64(),o=e.deserializeFixedBytes(31);return new tr({privateKey:n,expiryDateSecs:Number(i),blinder:o})}static fromBytes(e){return tr.deserialize(new R(e))}static generate(e){let t;switch(_optionalChain([e, 'optionalAccess', _58 => _58.scheme])){case 0:default:t=$.generate()}return new tr({privateKey:t,expiryDateSecs:_optionalChain([e, 'optionalAccess', _59 => _59.expiryDateSecs])})}sign(e){if(this.isExpired())throw new Error("EphemeralKeyPair has expired");return new Fe(this.privateKey.sign(e))}};tr.BLINDER_LENGTH=31;var Gt=tr;function mu(){return _utils3.randomBytes.call(void 0, Gt.BLINDER_LENGTH)}var _eventemitter3 = require('eventemitter3'); var _eventemitter32 = _interopRequireDefault(_eventemitter3);function hn(r){return r!=null&&typeof r.checkKeylessAccountValidity=="function"}var rr=class rr extends _chunkS7NKHRYEjs.l{constructor(t){super();this.signingScheme=2;let{address:n,ephemeralKeyPair:i,publicKey:o,uidKey:s,uidVal:a,aud:c,pepper:d,proof:f,proofFetchCallback:h,jwt:l,verificationKeyHash:p}=t;if(this.ephemeralKeyPair=i,this.publicKey=o,this.accountAddress=n?_chunkS7NKHRYEjs.Y.from(n):this.publicKey.authKey().derivedAddress(),this.uidKey=s,this.uidVal=a,this.aud=c,this.jwt=l,this.emitter=new _eventemitter32.default,this.proofOrPromise=f,f instanceof ue)this.proof=f;else{if(h===void 0)throw new Error("Must provide callback for async proof fetch");this.emitter.on("proofFetchFinish",async F=>{await h(F),this.emitter.removeAllListeners()}),this.init(f)}let b=_chunkS7NKHRYEjs.j.fromHexInput(d).toUint8Array();if(b.length!==rr.PEPPER_LENGTH)throw new Error(`Pepper length in bytes should be ${rr.PEPPER_LENGTH}`);if(this.pepper=b,p!==void 0){if(_chunkS7NKHRYEjs.j.hexInputToUint8Array(p).length!==32)throw new Error("verificationKeyHash must be 32 bytes");this.verificationKeyHash=_chunkS7NKHRYEjs.j.hexInputToUint8Array(p)}}getAnyPublicKey(){return new N(this.publicKey)}async init(t){try{this.proof=await t,this.emitter.emit("proofFetchFinish",{status:"Success"})}catch(n){n instanceof Error?this.emitter.emit("proofFetchFinish",{status:"Failed",error:n.toString()}):this.emitter.emit("proofFetchFinish",{status:"Failed",error:"Unknown"})}}serialize(t){if(this.accountAddress.serialize(t),t.serializeStr(this.jwt),t.serializeStr(this.uidKey),t.serializeFixedBytes(this.pepper),this.ephemeralKeyPair.serialize(t),this.proof===void 0)throw new Error("Cannot serialize - proof undefined");this.proof.serialize(t),t.serializeOption(this.verificationKeyHash,32)}static partialDeserialize(t){let n=_chunkS7NKHRYEjs.Y.deserialize(t),i=t.deserializeStr(),o=t.deserializeStr(),s=t.deserializeFixedBytes(31),a=Gt.deserialize(t),c=ue.deserialize(t),d=t.deserializeOption("fixedBytes",32);return{address:n,jwt:i,uidKey:o,pepper:s,ephemeralKeyPair:a,proof:c,verificationKeyHash:d}}isExpired(){return this.ephemeralKeyPair.isExpired()}signWithAuthenticator(t){let n=new B(this.sign(t)),i=new N(this.publicKey);return new oe(i,n)}signTransactionWithAuthenticator(t){let n=new B(this.signTransaction(t)),i=new N(this.publicKey);return new oe(i,n)}async waitForProofFetch(){this.proofOrPromise instanceof Promise&&await this.proofOrPromise}async checkKeylessAccountValidity(t){if(this.isExpired())throw E.fromErrorType({type:0});if(await this.waitForProofFetch(),this.proof===void 0)throw E.fromErrorType({type:2});let n=_jwtdecode.jwtDecode.call(void 0, this.jwt,{header:!0});if(n.kid===void 0)throw E.fromErrorType({type:12,details:"checkKeylessAccountValidity failed. JWT is missing 'kid' in header. This should never happen."});if(this.verificationKeyHash!==void 0){let{verificationKey:i}=await Xt({cedraConfig:t});if(_chunkS7NKHRYEjs.j.hexInputToString(i.hash())!==_chunkS7NKHRYEjs.j.hexInputToString(this.verificationKeyHash))throw E.fromErrorType({type:4})}else console.warn("[Cedra SDK] The verification key hash was not set. Proof may be invalid if the verification key has rotated.");await rr.fetchJWK({cedraConfig:t,publicKey:this.publicKey,kid:n.kid})}sign(t){let{expiryDateSecs:n}=this.ephemeralKeyPair;if(this.isExpired())throw E.fromErrorType({type:0});if(this.proof===void 0)throw E.fromErrorType({type:1,details:"Proof not found - make sure to call `await account.checkKeylessAccountValidity()` before signing."});let i=this.ephemeralKeyPair.getPublicKey(),o=this.ephemeralKeyPair.sign(t);return new ie({jwtHeader:_chunkS7NKHRYEjs.ea.call(void 0, this.jwt.split(".")[0]),ephemeralCertificate:new jt(this.proof,0),expiryDateSecs:n,ephemeralPublicKey:i,ephemeralSignature:o})}signTransaction(t){if(this.proof===void 0)throw E.fromErrorType({type:1,details:"Proof not found - make sure to call `await account.checkKeylessAccountValidity()` before signing."});let n=fn(t),o=new An(n,this.proof.proof).hash();return this.sign(o)}getSigningMessage(t){if(this.proof===void 0)throw E.fromErrorType({type:1,details:"Proof not found - make sure to call `await account.checkKeylessAccountValidity()` before signing."});let n=fn(t);return new An(n,this.proof.proof).hash()}verifySignature(t){return this.publicKey.verifySignature(t)}async verifySignatureAsync(t){return this.publicKey.verifySignatureAsync({...t})}static async fetchJWK(t){return fi(t)}};rr.PEPPER_LENGTH=31;var me=rr,An= exports.TransactionAndProof =class extends _chunkS7NKHRYEjs.l{constructor(t,n){super();this.domainSeparator="CEDRA::TransactionAndProof";this.transaction=t,this.proof=n}serialize(t){t.serializeFixedBytes(this.transaction.bcsToBytes()),t.serializeOption(this.proof)}hash(){return ft(this.bcsToBytes(),this.domainSeparator)}};var it=class r extends me{constructor(e){let t=K.create(e);super({publicKey:t,...e}),this.publicKey=t}serialize(e){super.serialize(e)}static deserialize(e){let{address:t,proof:n,ephemeralKeyPair:i,jwt:o,uidKey:s,pepper:a,verificationKeyHash:c}=me.partialDeserialize(e),{iss:d,aud:f,uidVal:h}=We({jwt:o,uidKey:s});return new r({address:t,proof:n,ephemeralKeyPair:i,iss:d,uidKey:s,uidVal:h,aud:f,pepper:a,jwt:o,verificationKeyHash:c})}static fromBytes(e){return r.deserialize(new R(_chunkS7NKHRYEjs.j.hexInputToUint8Array(e)))}static create(e){let{address:t,proof:n,jwt:i,ephemeralKeyPair:o,pepper:s,uidKey:a="sub",proofFetchCallback:c,verificationKey:d}=e,{iss:f,aud:h,uidVal:l}=We({jwt:i,uidKey:a});return new r({address:t,proof:n,ephemeralKeyPair:o,iss:f,uidKey:a,uidVal:l,aud:h,pepper:s,jwt:i,proofFetchCallback:c,verificationKeyHash:d?d.hash():void 0})}};var Bt=class r extends me{constructor(e){let t=W.create(e);super({publicKey:t,...e}),this.publicKey=t,this.audless=_nullishCoalesce(e.audless, () => (!1))}serialize(e){super.serialize(e),this.publicKey.jwkAddress.serialize(e)}static deserialize(e){let{address:t,proof:n,ephemeralKeyPair:i,jwt:o,uidKey:s,pepper:a,verificationKeyHash:c}=me.partialDeserialize(e),d=_chunkS7NKHRYEjs.Y.deserialize(e),{iss:f,aud:h,uidVal:l}=We({jwt:o,uidKey:s});return new r({address:t,proof:n,ephemeralKeyPair:i,iss:f,uidKey:s,uidVal:l,aud:h,pepper:a,jwt:o,verificationKeyHash:c,jwkAddress:d})}static fromBytes(e){return r.deserialize(R.fromHex(e))}static create(e){let{address:t,proof:n,jwt:i,ephemeralKeyPair:o,pepper:s,jwkAddress:a,uidKey:c="sub",proofFetchCallback:d,verificationKey:f}=e,{iss:h,aud:l,uidVal:p}=We({jwt:i,uidKey:c});return new r({address:t,proof:n,ephemeralKeyPair:o,iss:h,uidKey:c,uidVal:p,aud:l,pepper:s,jwkAddress:_chunkS7NKHRYEjs.Y.from(a),jwt:i,proofFetchCallback:d,verificationKeyHash:f?f.hash():void 0})}};var Ir=class r{constructor(e){this.signingScheme=3;let{multiKey:t,address:n}=e,i=e.signers.map(a=>a instanceof se?Ee.fromEd25519Account(a):a);if(t.signaturesRequired>i.length)throw new Error(`Not enough signers provided to satisfy the required signatures. Need ${t.signaturesRequired} signers, but only ${i.length} provided`);if(t.signaturesRequired<i.length)throw new Error(`More signers provided than required. Need ${t.signaturesRequired} signers, but ${i.length} provided`);this.publicKey=t,this.accountAddress=n?_chunkS7NKHRYEjs.Y.from(n):this.publicKey.authKey().derivedAddress();let o=[];for(let a of i)o.push(this.publicKey.getIndex(a.getAnyPublicKey()));let s=i.map((a,c)=>[a,o[c]]);s.sort((a,c)=>a[1]-c[1]),this.signers=s.map(a=>a[0]),this.signerIndicies=s.map(a=>a[1]),this.signaturesBitmap=this.publicKey.createBitmap({bits:o})}static fromPublicKeysAndSigners(e){let{address:t,publicKeys:n,signaturesRequired:i,signers:o}=e,s=new be({publicKeys:n,signaturesRequired:i});return new r({multiKey:s,signers:o,address:t})}static isMultiKeySigner(e){return e instanceof r}signWithAuthenticator(e){return new Ve(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new Ve(this.publicKey,this.signTransaction(e))}async waitForProofFetch(){let t=this.signers.filter(n=>n instanceof me).map(async n=>n.waitForProofFetch());await Promise.all(t)}async checkKeylessAccountValidity(e){let n=this.signers.filter(i=>i instanceof me).map(i=>i.checkKeylessAccountValidity(e));await Promise.all(n)}sign(e){let t=[];for(let n of this.signers)t.push(n.sign(e));return new we({signatures:t,bitmap:this.signaturesBitmap})}signTransaction(e){let t=[];for(let n of this.signers)t.push(n.signTransaction(e));return new we({signatures:t,bitmap:this.signaturesBitmap})}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return await this.publicKey.verifySignatureAsync(e)}};var Tn=class{constructor(e){this.signingScheme=1;let{signers:t,publicKey:n,address:i}=e;if(this.publicKey=n,this.accountAddress=i?_chunkS7NKHRYEjs.Y.from(i):this.publicKey.authKey().derivedAddress(),n.threshold>t.length)throw new Error(`Not enough signers provided to satisfy the required signatures. Need ${n.threshold} signers, but only ${t.length} provided`);if(n.threshold<t.length)throw new Error(`More signers provided than required. Need ${n.threshold} signers, but ${t.length} provided`);let o=[];for(let a of t)o.push(this.publicKey.getIndex(a.publicKey()));let s=t.map((a,c)=>[a,o[c]]);s.sort((a,c)=>a[1]-c[1]),this.signers=s.map(a=>a[0]),this.signerIndices=s.map(a=>a[1]),this.signaturesBitmap=this.publicKey.createBitmap({bits:o})}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return this.publicKey.verifySignatureAsync({...e,signature:e.signature})}signWithAuthenticator(e){return new Je(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new Je(this.publicKey,this.signTransaction(e))}sign(e){let t=[];for(let n of this.signers)t.push(n.sign(e));return new ke({signatures:t,bitmap:this.signaturesBitmap})}signTransaction(e){return this.sign(ze(e))}};function zo(r){let e=r.deserializeUleb128AsU32();if(!Object.values(_chunkS7NKHRYEjs.U).includes(e))throw new Error(`Deserialization of Account failed: SigningScheme variant ${e} is invalid`);return{address:_chunkS7NKHRYEjs.Y.deserialize(r),signingScheme:e}}function No(r,e){if(e.serializeStr(r.jwt),e.serializeStr(r.uidKey),e.serializeFixedBytes(r.pepper),r.ephemeralKeyPair.serialize(e),r.proof===void 0)throw new Error("Cannot serialize - proof undefined");r.proof.serialize(e),e.serializeOption(r.verificationKeyHash,32)}function Fo(r){let e=r.deserializeStr(),t=r.deserializeStr(),n=r.deserializeFixedBytes(31),i=Gt.deserialize(r),o=ue.deserialize(r),s=r.deserializeOption("fixedBytes",32);return{jwt:e,uidKey:t,pepper:n,ephemeralKeyPair:i,proof:o,verificationKeyHash:s}}var Oo;(h=>{function r(l){let p=new _chunkS7NKHRYEjs.m;switch(p.serializeU32AsUleb128(l.signingScheme),l.accountAddress.serialize(p),l.signingScheme){case 0:return l.privateKey.serialize(p),p.toUint8Array();case 2:{if(!Ai(l))throw new Error("Account is not a SingleKeySigner");let b=l.getAnyPublicKey();switch(p.serializeU32AsUleb128(b.variant),b.variant){case 3:return No(l,p),p.toUint8Array();case 4:{let F=l;return No(F,p),F.publicKey.jwkAddress.serialize(p),p.serializeBool(F.audless),p.toUint8Array()}case 1:case 0:return l.privateKey.serialize(p),p.toUint8Array();default:throw new Error(`Invalid public key variant: ${b.variant}`)}}case 3:{let b=l;return b.publicKey.serialize(p),p.serializeU32AsUleb128(b.signers.length),b.signers.forEach(F=>{p.serializeFixedBytes(r(F))}),p.toUint8Array()}default:throw new Error(`Deserialization of Account failed: invalid signingScheme value ${l.signingScheme}`)}}h.toBytes=r;function e(l){return _chunkS7NKHRYEjs.j.hexInputToStringWithoutPrefix(r(l))}h.toHexStringWithoutPrefix=e;function t(l){return _chunkS7NKHRYEjs.j.hexInputToString(r(l))}h.toHexString=t;function n(l){let{address:p,signingScheme:b}=zo(l);switch(b){case 0:{let F=$.deserialize(l);return new se({privateKey:F,address:p})}case 2:{let F=l.deserializeUleb128AsU32();switch(F){case 0:{let O=$.deserialize(l);return new Ee({privateKey:O,address:p})}case 1:{let O=Qe.deserialize(l);return new Ee({privateKey:O,address:p})}case 3:{let O=Fo(l),Ne=We(O);return new it({...O,...Ne})}case 4:{let O=Fo(l),Ne=_chunkS7NKHRYEjs.Y.deserialize(l),at=l.deserializeBool(),ct=We(O);return new Bt({...O,...ct,jwkAddress:Ne,audless:at})}default:throw new Error(`Unsupported public key variant ${F}`)}}case 3:{let F=be.deserialize(l),O=l.deserializeUleb128AsU32(),Ne=new Array;for(let at=0;at<O;at+=1){let ct=n(l);if(!Ai(ct)&&!(ct instanceof se))throw new Error("Deserialization of MultiKeyAccount failed. Signer is not a SingleKeySigner or Ed25519Account");Ne.push(ct)}return new Ir({multiKey:F,signers:Ne,address:p})}default:throw new Error(`Deserialization of Account failed: invalid signingScheme value ${b}`)}}h.deserialize=n;function i(l){let p=d(l);if(!(p instanceof it))throw new Error("Deserialization of KeylessAccount failed");return p}h.keylessAccountFromHex=i;function o(l){let p=d(l);if(!(p instanceof Bt))throw new Error("Deserialization of FederatedKeylessAccount failed");return p}h.federatedKeylessAccountFromHex=o;function s(l){let p=d(l);if(!(p instanceof Ir))throw new Error("Deserialization of MultiKeyAccount failed");return p}h.multiKeyAccountFromHex=s;function a(l){let p=d(l);if(!(p instanceof Ee))throw new Error("Deserialization of SingleKeyAccount failed");return p}h.singleKeyAccountFromHex=a;function c(l){let p=d(l);if(!(p instanceof se))throw new Error("Deserialization of Ed25519Account failed");return p}h.ed25519AccountFromHex=c;function d(l){return n(R.fromHex(l))}h.fromHex=d;function f(l){return d(l)}h.fromBytes=f})(Oo||(Oo= exports.AccountUtils ={}));var bn=class r extends nt{constructor({signer:t,accountAddress:n,authenticationFunction:i}){super();this.signingScheme=2;if(!_chunkS7NKHRYEjs.la.call(void 0, i))throw new Error(`Invalid authentication function ${i} passed into AbstractedAccount`);this.authenticationFunction=i,this.accountAddress=n,this.publicKey=new Yr(this.accountAddress),this.sign=o=>new gr(t(o))}static fromPermissionedSigner({signer:t,accountAddress:n}){return new r({signer:i=>{let o=new _chunkS7NKHRYEjs.m;return t.publicKey.serialize(o),t.sign(i).serialize(o),o.toUint8Array()},accountAddress:_nullishCoalesce(n, () => (t.accountAddress)),authenticationFunction:"0x1::permissioned_delegation::authenticate"})}signWithAuthenticator(t){return new Kt(this.authenticationFunction,_sha3.sha3_256.call(void 0, t),this.sign(_sha3.sha3_256.call(void 0, t)).toUint8Array())}signTransactionWithAuthenticator(t){return this.signWithAuthenticator(ze(t))}signTransaction(t){return this.sign(ze(t))}setSigner(t){this.sign=n=>new gr(t(n))}};var vr=class vr extends bn{constructor({signer:e,authenticationFunction:t,abstractPublicKey:n}){let i=new (0, _chunkS7NKHRYEjs.Y)(vr.computeAccountAddress(t,n));super({accountAddress:i,signer:e,authenticationFunction:t}),this.abstractPublicKey=n}static computeAccountAddress(e,t){if(!_chunkS7NKHRYEjs.la.call(void 0, e))throw new Error(`Invalid authentication function ${e} passed into DerivableAbstractedAccount`);let[n,i,o]=e.split("::"),s=_sha3.sha3_256.create(),a=new _chunkS7NKHRYEjs.m;_chunkS7NKHRYEjs.Y.fromString(n).serialize(a),a.serializeStr(i),a.serializeStr(o),s.update(a.toUint8Array());let c=new _chunkS7NKHRYEjs.m;return c.serializeBytes(t),s.update(c.toUint8Array()),s.update(new Uint8Array([vr.ADDRESS_DOMAIN_SEPERATOR])),s.digest()}signWithAuthenticator(e){return new Kt(this.authenticationFunction,_sha3.sha3_256.call(void 0, e),this.sign(_sha3.sha3_256.call(void 0, e)).value,this.abstractPublicKey)}};vr.ADDRESS_DOMAIN_SEPERATOR=5;var Bo=vr;var Au=`
    fragment TokenActivitiesFields on token_activities_v2 {
  after_value
  before_value
  entry_function_id_str
  event_account_address
  event_index
  from_address
  is_fungible_v2
  property_version_v1
  to_address
  token_amount
  token_data_id
  token_standard
  transaction_timestamp
  transaction_version
  type
}
    `,hu=`
    fragment AnsTokenFragment on current_cedra_names {
  domain
  expiration_timestamp
  registered_address
  subdomain
  token_standard
  is_primary
  owner_address
  subdomain_expiration_policy
  domain_expiration_timestamp
}
    `,wn=`
    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {
  token_standard
  token_properties_mutated_v1
  token_data_id
  table_type_v1
  storage_id
  property_version_v1
  owner_address
  last_transaction_version
  last_transaction_timestamp
  is_soulbound_v2
  is_fungible_v2
  amount
  current_token_data {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    decimals
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,Mo=`
    query getAccountCoinsCount($address: String) {
  current_fungible_asset_balances_new_aggregate(
    where: {owner_address: {_eq: $address}}
  ) {
    aggregate {
      count
    }
  }
}
    `,Vo=`
    query getAccountCoinsData($where_condition: current_fungible_asset_balances_new_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_new_order_by!]) {
  current_fungible_asset_balances_new(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
    metadata {
      token_standard
      symbol
      supply_aggregator_table_key_v1
      supply_aggregator_table_handle_v1
      project_uri
      name
      last_transaction_version
      last_transaction_timestamp
      icon_uri
      decimals
      creator_address
      asset_type
    }
  }
}
    `,Ho=`
    query getAccountCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {
  current_collection_ownership_v2_view(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      mutable_description
      max_supply
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
    collection_id
    collection_name
    collection_uri
    creator_address
    distinct_tokens
    last_transaction_version
    owner_address
    single_token_uri
  }
}
    `,qo=`
    query getAccountOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${wn}`,sb=`
    query getAccountOwnedTokensByTokenData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${wn}`,Lo=`
    query getAccountOwnedTokensFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${wn}`,$o=`
    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {
  current_token_ownerships_v2_aggregate(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    aggregate {
      count
    }
  }
}
    `,Wo=`
    query getAccountTransactionsCount($address: String) {
  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {
    aggregate {
      count
    }
  }
}
    `,Qo=`
    query getChainTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,jo=`
    query getCollectionData($where_condition: current_collections_v2_bool_exp!) {
  current_collections_v2(where: $where_condition) {
    uri
    total_minted_v2
    token_standard
    table_handle_v1
    mutable_uri
    mutable_description
    max_supply
    collection_id
    collection_name
    creator_address
    current_supply
    description
    last_transaction_timestamp
    last_transaction_version
    cdn_asset_uris {
      cdn_image_uri
      asset_uri
      animation_optimizer_retry_count
      cdn_animation_uri
      cdn_json_uri
      image_optimizer_retry_count
      json_parser_retry_count
      raw_animation_uri
      raw_image_uri
    }
  }
}
    `,Jo=`
    query getCurrentFungibleAssetBalances($where_condition: current_fungible_asset_balances_new_bool_exp, $offset: Int, $limit: Int) {
  current_fungible_asset_balances_new(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
  }
}
    `,Xo=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,Yo=`
    query getEvents($where_condition: events_bool_exp, $offset: Int, $limit: Int, $order_by: [events_order_by!]) {
  events(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    account_address
    creation_number
    data
    event_index
    sequence_number
    transaction_block_height
    transaction_version
    type
    indexed_type
  }
}
    `,Zo=`
    query getFungibleAssetActivities($where_condition: fungible_asset_activities_bool_exp, $offset: Int, $limit: Int) {
  fungible_asset_activities(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    amount
    asset_type
    block_height
    entry_function_id_str
    event_index
    gas_fee_payer_address
    is_frozen
    is_gas_fee
    is_transaction_success
    owner_address
    storage_id
    storage_refund_amount
    token_standard
    transaction_timestamp
    transaction_version
    type
  }
}
    `,es=`
    query getFungibleAssetMetadata($where_condition: fungible_asset_metadata_bool_exp, $offset: Int, $limit: Int) {
  fungible_asset_metadata(where: $where_condition, offset: $offset, limit: $limit) {
    icon_uri
    project_uri
    supply_aggregator_table_handle_v1
    supply_aggregator_table_key_v1
    creator_address
    asset_type
    decimals
    last_transaction_timestamp
    last_transaction_version
    name
    symbol
    token_standard
    supply_v2
    maximum_v2
  }
}
    `,nr=`
    query getNames($offset: Int, $limit: Int, $where_condition: current_cedra_names_bool_exp, $order_by: [current_cedra_names_order_by!]) {
  current_cedra_names(
    limit: $limit
    where: $where_condition
    order_by: $order_by
    offset: $offset
  ) {
    ...AnsTokenFragment
  }
}
    ${hu}`,Ti=`
    query getNumberOfDelegators($where_condition: num_active_delegator_per_pool_bool_exp, $order_by: [num_active_delegator_per_pool_order_by!]) {
  num_active_delegator_per_pool(where: $where_condition, order_by: $order_by) {
    num_active_delegator
    pool_address
  }
}
    `,Sn=`
    query getObjectData($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {
  current_objects(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    allow_ungated_transfer
    state_key_hash
    owner_address
    object_address
    last_transaction_version
    last_guid_creation_num
    is_deleted
  }
}
    `,bi=`
    query getProcessorStatus($where_condition: processor_metadata_processor_status_bool_exp) {
  processor_metadata_processor_status(where: $where_condition) {
    last_success_version
    processor
    last_updated
  }
}
    `,ts=`
    query getTableItemsData($where_condition: table_items_bool_exp!, $offset: Int, $limit: Int, $order_by: [table_items_order_by!]) {
  table_items(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    decoded_key
    decoded_value
    key
    table_handle
    transaction_version
    write_set_change_index
  }
}
    `,rs=`
    query getTableItemsMetadata($where_condition: table_metadatas_bool_exp!, $offset: Int, $limit: Int, $order_by: [table_metadatas_order_by!]) {
  table_metadatas(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    handle
    key_type
    value_type
  }
}
    `,ns=`
    query getTokenActivity($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {
  token_activities_v2(
    where: $where_condition
    order_by: $order_by
    offset: $offset
    limit: $limit
  ) {
    ...TokenActivitiesFields
  }
}
    ${Au}`,wi=`
    query getCurrentTokenOwnership($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${wn}`,is=`
    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {
  current_token_datas_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    decimals
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `;async function Cn(r){let{cedraConfig:e}=r,{data:t}=await G({cedraConfig:e,originMethod:"getLedgerInfo",path:""});return t}async function os(r){let{cedraConfig:e,limit:t}=r;return(await w({cedraConfig:e,query:{query:Qo,variables:{limit:t}},originMethod:"getChainTopUserTransactions"})).user_transactions}async function w(r){let{cedraConfig:e,query:t,originMethod:n}=r,{data:i}=await xo({cedraConfig:e,originMethod:_nullishCoalesce(n, () => ("queryIndexer")),path:"",body:t,overrides:{WITH_CREDENTIALS:!1}});return i}async function Tu(r){let{cedraConfig:e}=r;return(await w({cedraConfig:e,query:{query:bi},originMethod:"getProcessorStatuses"})).processor_metadata_processor_status}async function En(r){let e=await Tu({cedraConfig:r.cedraConfig});return BigInt(e[0].last_success_version)}async function _n(r){let{cedraConfig:e,processorType:t}=r;return(await w({cedraConfig:e,query:{query:bi,variables:{where_condition:{processor:{_eq:t}}}},originMethod:"getProcessorStatus"})).processor_metadata_processor_status[0]}async function Pn(r){let{cedraConfig:e,accountAddress:t}=r,{data:n}=await G({cedraConfig:e,originMethod:"getInfo",path:`accounts/${_chunkS7NKHRYEjs.Y.from(t).toString()}`});return n}async function as(r){return _optionalChain([r, 'access', _60 => _60.options, 'optionalAccess', _61 => _61.ledgerVersion])!==void 0?ss(r):Ge(async()=>ss(r),`module-${r.accountAddress}-${r.moduleName}`,1e3*60*5)()}async function ss(r){let{cedraConfig:e,accountAddress:t,moduleName:n,options:i}=r,{data:o}=await G({cedraConfig:e,originMethod:"getModule",path:`accounts/${_chunkS7NKHRYEjs.Y.from(t).toString()}/module/${n}`,params:{ledger_version:_optionalChain([i, 'optionalAccess', _62 => _62.ledgerVersion])}});return o}async function xn(r){let{cedraConfig:e,handle:t,data:n,options:i}=r;return(await mt({cedraConfig:e,originMethod:"getTableItem",path:`tables/${t}/item`,params:{ledger_version:_optionalChain([i, 'optionalAccess', _63 => _63.ledgerVersion])},body:n})).data}async function cs(r){let{cedraConfig:e,options:t}=r,n={query:ts,variables:{where_condition:_optionalChain([t, 'optionalAccess', _64 => _64.where]),offset:_optionalChain([t, 'optionalAccess', _65 => _65.offset]),limit:_optionalChain([t, 'optionalAccess', _66 => _66.limit]),order_by:_optionalChain([t, 'optionalAccess', _67 => _67.orderBy])}};return(await w({cedraConfig:e,query:n,originMethod:"getTableItemsData"})).table_items}async function us(r){let{cedraConfig:e,options:t}=r,n={query:rs,variables:{where_condition:_optionalChain([t, 'optionalAccess', _68 => _68.where]),offset:_optionalChain([t, 'optionalAccess', _69 => _69.offset]),limit:_optionalChain([t, 'optionalAccess', _70 => _70.limit]),order_by:_optionalChain([t, 'optionalAccess', _71 => _71.orderBy])}};return(await w({cedraConfig:e,query:n,originMethod:"getTableItemsMetadata"})).table_metadatas}async function Ci(r){let{cedraConfig:e,options:t}=r;return an({cedraConfig:e,originMethod:"getTransactions",path:"transactions",params:{start:_optionalChain([t, 'optionalAccess', _72 => _72.offset]),limit:_optionalChain([t, 'optionalAccess', _73 => _73.limit])}})}async function vn(r){let{cedraConfig:e}=r;return Ge(async()=>{let{data:t}=await G({cedraConfig:e,originMethod:"getGasPriceEstimation",path:"estimate_gas_price"});return t},`gas-price-${e.network}`,1e3*60*5)()}async function ds(r){let{cedraConfig:e,ledgerVersion:t}=r,{data:n}=await G({cedraConfig:e,originMethod:"getTransactionByVersion",path:`transactions/by_version/${t}`});return n}async function Kr(r){let{cedraConfig:e,transactionHash:t}=r,{data:n}=await G({cedraConfig:e,path:`transactions/by_hash/${t}`,originMethod:"getTransactionByHash"});return n}async function ls(r){let{cedraConfig:e,transactionHash:t}=r;try{return(await Kr({cedraConfig:e,transactionHash:t})).type==="pending_transaction"}catch(n){if(_optionalChain([n, 'optionalAccess', _74 => _74.status])===404)return!0;throw n}}async function bu(r){let{cedraConfig:e,transactionHash:t}=r,{data:n}=await G({cedraConfig:e,path:`transactions/wait_by_hash/${t}`,originMethod:"longWaitForTransaction"});return n}async function bt(r){let{cedraConfig:e,transactionHash:t,options:n}=r,i=_nullishCoalesce(_optionalChain([n, 'optionalAccess', _75 => _75.timeoutSecs]), () => (20)),o=_nullishCoalesce(_optionalChain([n, 'optionalAccess', _76 => _76.checkSuccess]), () => (!0)),s=!0,a=0,c,d,f=200,h=1.5;function l(p){if(!(p instanceof Te)||(d=p,p.status!==404&&p.status>=400&&p.status<500))throw p}try{c=await Kr({cedraConfig:e,transactionHash:t}),s=c.type==="pending_transaction"}catch(p){l(p)}if(s){let p=Date.now();try{c=await bu({cedraConfig:e,transactionHash:t}),s=c.type==="pending_transaction"}catch(b){l(b)}a=(Date.now()-p)/1e3}for(;s&&!(a>=i);){try{if(c=await Kr({cedraConfig:e,transactionHash:t}),s=c.type==="pending_transaction",!s)break}catch(p){l(p)}await _chunkS7NKHRYEjs.aa.call(void 0, f),a+=f/1e3,f*=h}if(c===void 0)throw d||new In(`Fetching transaction ${t} failed and timed out after ${i} seconds`,c);if(c.type==="pending_transaction")throw new In(`Transaction ${t} timed out in pending state after ${i} seconds`,c);if(!o)return c;if(!c.success)throw new Si(`Transaction ${t} failed with an error: ${c.vm_status}`,c);return c}async function Kn(r){let{cedraConfig:e,processorType:t}=r,n=BigInt(r.minimumLedgerVersion),i=3e3,o=new Date().getTime(),s=BigInt(-1);for(;s<n;){if(new Date().getTime()-o>i)throw new Error("waitForLastSuccessIndexerVersionSync timeout");if(t===void 0?s=await En({cedraConfig:e}):s=(await _n({cedraConfig:e,processorType:t})).last_success_version,s>=n)break;await _chunkS7NKHRYEjs.aa.call(void 0, 200)}}var In=class extends Error{constructor(e,t){super(e),this.lastSubmittedTransaction=t}},Si=class extends Error{constructor(e,t){super(e),this.transaction=t}};async function ps(r){let{cedraConfig:e,ledgerVersion:t,options:n}=r,{data:i}=await G({cedraConfig:e,originMethod:"getBlockByVersion",path:`blocks/by_version/${t}`,params:{with_transactions:_optionalChain([n, 'optionalAccess', _77 => _77.withTransactions])}});return ms({block:i,...r})}async function gs(r){let{cedraConfig:e,blockHeight:t,options:n}=r,{data:i}=await G({cedraConfig:e,originMethod:"getBlockByHeight",path:`blocks/by_height/${t}`,params:{with_transactions:_optionalChain([n, 'optionalAccess', _78 => _78.withTransactions])}});return ms({block:i,...r})}async function ms(r){let{cedraConfig:e,block:t,options:n}=r;if(_optionalChain([n, 'optionalAccess', _79 => _79.withTransactions])){t.transactions=_nullishCoalesce(t.transactions, () => ([]));let i=t.transactions[t.transactions.length-1],o=BigInt(t.first_version),s=BigInt(t.last_version),a=_optionalChain([i, 'optionalAccess', _80 => _80.version]),c;if(a===void 0?c=o-1n:c=BigInt(a),c===s)return t;let d=[],f=100n;for(let l=c+1n;l<s;l+=BigInt(100))d.push(Ci({cedraConfig:e,options:{offset:l,limit:Math.min(Number(f),Number(s-l+1n))}}));let h=await Promise.all(d);for(let l of h)t.transactions.push(...l)}return t}function ys(r){return!!r.match(/^[_a-zA-Z0-9]+$/)}function fs(r){return!!r.match(/\s/)}function wu(r){return!!r.match(/^T[0-9]+$/)}function Su(r){return!!r.match(/^&.+$/)}function Cu(r){switch(r){case"signer":case"address":case"bool":case"u8":case"u16":case"u32":case"u64":case"u128":case"u256":return!0;default:return!1}}function Eu(r,e){let t=e;for(;t<r.length;t+=1){let n=r[t];if(!fs(n))break}return t}var _u=(b=>(b.InvalidTypeTag="unknown type",b.UnexpectedGenericType="unexpected generic type",b.UnexpectedTypeArgumentClose="unexpected '>'",b.UnexpectedWhitespaceCharacter="unexpected whitespace character",b.UnexpectedComma="unexpected ','",b.TypeArgumentCountMismatch="type argument count doesn't match expected amount",b.MissingTypeArgumentClose="no matching '>' for '<'",b.MissingTypeArgument="no type argument before ','",b.UnexpectedPrimitiveTypeArguments="primitive types not expected to have type arguments",b.UnexpectedVectorTypeArgumentCount="vector type expected to have exactly one type argument",b.UnexpectedStructFormat="unexpected struct format, must be of the form 0xaddress::module_name::struct_name",b.InvalidModuleNameCharacter="module name must only contain alphanumeric or '_' characters",b.InvalidStructNameCharacter="struct name must only contain alphanumeric or '_' characters",b.InvalidAddress="struct address must be valid",b))(_u||{}),Q= exports.TypeTagParserError =class extends Error{constructor(e,t){super(`Failed to parse typeTag '${e}', ${t}`)}};function ye(r,e){let t=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _81 => _81.allowGenerics]), () => (!1)),n=[],i=[],o=[],s=0,a="",c=1;for(;s<r.length;){let d=r[s];if(d==="<")n.push({savedExpectedTypes:c,savedStr:a,savedTypes:o}),a="",o=[],c=1;else if(d===">"){if(a!==""){let b=Rr(a,i,t);o.push(b)}let f=n.pop();if(f===void 0)throw new Q(r,"unexpected '>'");if(c!==o.length)throw new Q(r,"type argument count doesn't match expected amount");let{savedStr:h,savedTypes:l,savedExpectedTypes:p}=f;i=o,o=l,a=h,c=p}else if(d===","){if(n.length===0)throw new Q(r,"unexpected ','");if(a.length===0)throw new Q(r,"no type argument before ','");let f=Rr(a,i,t);i=[],o.push(f),a="",c+=1}else if(fs(d)){let f=!1;if(a.length!==0){let l=Rr(a,i,t);i=[],o.push(l),a="",f=!0}s=Eu(r,s);let h=r[s];if(s<r.length&&f&&h!==","&&h!==">")throw new Q(r,"unexpected whitespace character");continue}else a+=d;s+=1}if(n.length>0)throw new Q(r,"no matching '>' for '<'");switch(o.length){case 0:return Rr(a,i,t);case 1:if(a==="")return o[0];throw new Q(r,"unexpected ','");default:throw new Q(r,"unexpected whitespace character")}}function Rr(r,e,t){let n=r.trim(),i=n.toLowerCase();if(Cu(i)&&e.length>0)throw new Q(r,"primitive types not expected to have type arguments");switch(n.toLowerCase()){case"signer":return new Ut;case"bool":return new L;case"address":return new M;case"u8":return new pe;case"u16":return new Xe;case"u32":return new Ye;case"u64":return new X;case"u128":return new Ze;case"u256":return new et;case"vector":if(e.length!==1)throw new Q(r,"vector type expected to have exactly one type argument");return new v(e[0]);default:if(Su(n)){let a=n.substring(1);return new ln(Rr(a,e,t))}if(wu(n)){if(t)return new V(Number(n.split("T")[1]));throw new Q(r,"unexpected generic type")}if(!n.match(/:/))throw new Q(r,"unknown type");let o=n.split("::");if(o.length!==3)throw new Q(r,"unexpected struct format, must be of the form 0xaddress::module_name::struct_name");let s;try{s=_chunkS7NKHRYEjs.Y.fromString(o[0])}catch (e4){throw new Q(r,"struct address must be valid")}if(!ys(o[1]))throw new Q(r,"module name must only contain alphanumeric or '_' characters");if(!ys(o[2]))throw new Q(r,"struct name must only contain alphanumeric or '_' characters");return new A(new He(s,new U(o[1]),new U(o[2]),e))}}function As(r){return typeof r=="boolean"}function ot(r){return typeof r=="string"}function Pu(r){return typeof r=="number"}function Rn(r){if(Pu(r))return r;if(ot(r)&&r!=="")return Number.parseInt(r,10)}function Un(r){return typeof r=="number"||typeof r=="bigint"||typeof r=="string"}function hs(r){return r==null}function Ts(r){return Ei(r)||Pi(r)||xi(r)||Ii(r)||vi(r)||Ki(r)||Ri(r)||kn(r)||_i(r)||xu(r)||r instanceof S||r instanceof Z}function Ei(r){return r instanceof z}function kn(r){return r instanceof _chunkS7NKHRYEjs.Y}function _i(r){return r instanceof P}function xu(r){return r instanceof Pe}function Pi(r){return r instanceof Y}function xi(r){return r instanceof xe}function Ii(r){return r instanceof Ie}function vi(r){return r instanceof j}function Ki(r){return r instanceof ve}function Ri(r){return r instanceof Ae}function bs(r){return"bytecode"in r}function D(r,e){throw new Error(`Type mismatch for argument ${e}, expected '${r}'`)}function ws(r){let e=r.params.findIndex(t=>t!=="signer"&&t!=="&signer");return e<0?r.params.length:e}var Iu=new TextEncoder;function Dn(r){return _nullishCoalesce(_optionalChain([r, 'optionalAccess', _82 => _82.map, 'call', _83 => _83(e=>ot(e)?ye(e):e)]), () => ([]))}async function vu(r,e,t){return(await zn({cedraConfig:t,accountAddress:r,moduleName:e})).abi}async function ki(r,e,t,n){let i=await vu(r,e,n);if(!i)throw new Error(`Could not find module ABI for '${r}::${e}'`);return i.exposed_functions.find(o=>o.name===t)}async function jb(r,e,t,n){let i=await ki(r,e,t,n);if(!i)throw new Error(`Could not find function ABI for '${r}::${e}::${t}'`);let o=[];for(let s=0;s<i.params.length;s+=1)o.push(ye(i.params[s],{allowGenerics:!0}));return{typeParameters:i.generic_type_params,parameters:o}}async function Ss(r,e,t,n){let i=await ki(r,e,t,n);if(!i)throw new Error(`Could not find entry function ABI for '${r}::${e}::${t}'`);if(!i.is_entry)throw new Error(`'${r}::${e}::${t}' is not an entry function`);let o=ws(i),s=[];for(let a=o;a<i.params.length;a+=1)s.push(ye(i.params[a],{allowGenerics:!0}));return{signers:o,typeParameters:i.generic_type_params,parameters:s}}async function Cs(r,e,t,n){let i=await ki(r,e,t,n);if(!i)throw new Error(`Could not find view function ABI for '${r}::${e}::${t}'`);if(!i.is_view)throw new Error(`'${r}::${e}::${t}' is not an view function`);let o=[];for(let a=0;a<i.params.length;a+=1)o.push(ye(i.params[a],{allowGenerics:!0}));let s=[];for(let a=0;a<i.return.length;a+=1)s.push(ye(i.return[a],{allowGenerics:!0}));return{typeParameters:i.generic_type_params,parameters:o,returnTypes:s}}function Di(r,e,t,n,i,o){let s;if("exposed_functions"in e){let a=e.exposed_functions.find(c=>c.name===r);if(!a)throw new Error(`Could not find function ABI for '${e.address}::${e.name}::${r}'`);if(n>=a.params.length)throw new Error(`Too many arguments for '${r}', expected ${a.params.length}`);s=ye(a.params[n],{allowGenerics:!0})}else{if(n>=e.parameters.length)throw new Error(`Too many arguments for '${r}', expected ${e.parameters.length}`);s=e.parameters[n]}return Mt(t,s,n,i,"exposed_functions"in e?e:void 0,o)}function Mt(r,e,t,n,i,o){return Ts(r)?(Ui(e,r,t),r):Ku(r,e,t,n,i,o)}function Ku(r,e,t,n,i,o){if(e.isBool()){if(As(r))return new z(r);if(ot(r)){if(r==="true")return new z(!0);if(r==="false")return new z(!1)}D("boolean",t)}if(e.isAddress()){if(ot(r))return _chunkS7NKHRYEjs.Y.fromString(r);D("string | AccountAddress",t)}if(e.isU8()){let s=Rn(r);if(s!==void 0)return new Y(s);D("number | string",t)}if(e.isU16()){let s=Rn(r);if(s!==void 0)return new xe(s);D("number | string",t)}if(e.isU32()){let s=Rn(r);if(s!==void 0)return new Ie(s);D("number | string",t)}if(e.isU64()){if(Un(r))return new j(BigInt(r));D("bigint | number | string",t)}if(e.isU128()){if(Un(r))return new ve(BigInt(r));D("bigint | number | string",t)}if(e.isU256()){if(Un(r))return new Ae(BigInt(r));D("bigint | number | string",t)}if(e.isGeneric()){let s=e.value;if(s<0||s>=n.length)throw new Error(`Generic argument ${e.toString()} is invalid for argument ${t}`);return Mt(r,n[s],t,n,i)}if(e.isVector()){if(e.value.isU8()){if(ot(r))return S.U8(Iu.encode(r));if(r instanceof Uint8Array)return S.U8(r);if(r instanceof ArrayBuffer)return S.U8(new Uint8Array(r))}if(ot(r)&&r.startsWith("["))return Mt(JSON.parse(r),e,t,n);if(Array.isArray(r))return new S(r.map(s=>Mt(s,e.value,t,n,i)));throw new Error(`Type mismatch for argument ${t}, type '${e.toString()}'`)}if(e.isStruct()){if(e.isString()){if(ot(r))return new P(r);D("string",t)}if(e.isObject()){if(ot(r))return _chunkS7NKHRYEjs.Y.fromString(r);D("string | AccountAddress",t)}if(e.isDelegationKey()||e.isRateLimiter()){if(r instanceof Uint8Array)return new Pe(r);D("Uint8Array",t)}if(e.isOption()){if(hs(r)){let a=e.value.typeArgs[0];return a instanceof L?new Z(null):a instanceof M?new Z(null):a instanceof pe?new Z(null):a instanceof Xe?new Z(null):a instanceof Ye?new Z(null):a instanceof X?new Z(null):a instanceof Ze?new Z(null):a instanceof et?new Z(null):new Z(null)}return new Z(Mt(r,e.value.typeArgs[0],t,n,i))}if(_optionalChain([i, 'optionalAccess', _84 => _84.structs, 'access', _85 => _85.find, 'call', _86 => _86(a=>a.name===e.value.name.identifier), 'optionalAccess', _87 => _87.fields, 'access', _88 => _88.length])===0&&r instanceof Uint8Array)return new Pe(r);if(r instanceof Uint8Array&&_optionalChain([o, 'optionalAccess', _89 => _89.allowUnknownStructs]))return console.warn(`Unsupported struct input type for argument ${t}. Continuing since 'allowUnknownStructs' is enabled.`),new Pe(r);throw new Error(`Unsupported struct input type for argument ${t}, type '${e.toString()}'`)}throw new Error(`Type mismatch for argument ${t}, type '${e.toString()}'`)}function Ui(r,e,t){if(r.isBool()){if(Ei(e))return;D("Bool",t)}if(r.isAddress()){if(kn(e))return;D("AccountAddress",t)}if(r.isU8()){if(Pi(e))return;D("U8",t)}if(r.isU16()){if(xi(e))return;D("U16",t)}if(r.isU32()){if(Ii(e))return;D("U32",t)}if(r.isU64()){if(vi(e))return;D("U64",t)}if(r.isU128()){if(Ki(e))return;D("U128",t)}if(r.isU256()){if(Ri(e))return;D("U256",t)}if(r.isVector()){if(e instanceof S){e.values.length>0&&Ui(r.value,e.values[0],t);return}D("MoveVector",t)}if(r instanceof A){if(r.isString()){if(_i(e))return;D("MoveString",t)}if(r.isObject()){if(kn(e))return;D("AccountAddress",t)}if(r.isOption()){if(e instanceof Z){e.value!==void 0&&Ui(r.value.typeArgs[0],e.value,t);return}D("MoveOption",t)}}throw new Error(`Type mismatch for argument ${t}, expected '${r.toString()}'`)}async function Nn(r){if(bs(r))return Du(r);let{moduleAddress:e,moduleName:t,functionName:n}=_chunkS7NKHRYEjs.ka.call(void 0, r.function),i=await xs({key:"entry-function",moduleAddress:e,moduleName:t,functionName:n,cedraConfig:r.cedraConfig,abi:r.abi,fetch:Ss});return Uu({...r,abi:i})}function Uu(r){let e=r.abi,{moduleAddress:t,moduleName:n,functionName:i}=_chunkS7NKHRYEjs.ka.call(void 0, r.function),o=Dn(r.typeArguments);if(o.length!==e.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${e.typeParameters.length}, received ${o.length}`);let s=r.functionArguments.map((c,d)=>Di(r.function,e,c,d,o));if(s.length!==e.parameters.length)throw new Error(`Too few arguments for '${t}::${n}::${i}', expected ${e.parameters.length} but got ${s.length}`);let a=kt.build(`${t}::${n}`,i,o,s);if("multisigAddress"in r){let c=_chunkS7NKHRYEjs.Y.from(r.multisigAddress);return new Er(new Pr(c,new xr(a)))}return new Cr(a)}async function Es(r){let{moduleAddress:e,moduleName:t,functionName:n}=_chunkS7NKHRYEjs.ka.call(void 0, r.function),i=await xs({key:"view-function",moduleAddress:e,moduleName:t,functionName:n,cedraConfig:r.cedraConfig,abi:r.abi,fetch:Cs});return ku({abi:i,...r})}function ku(r){let e=r.abi,{moduleAddress:t,moduleName:n,functionName:i}=_chunkS7NKHRYEjs.ka.call(void 0, r.function),o=Dn(r.typeArguments);if(o.length!==e.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${e.typeParameters.length}, received ${o.length}`);let s=_nullishCoalesce(_optionalChain([r, 'optionalAccess', _90 => _90.functionArguments, 'optionalAccess', _91 => _91.map, 'call', _92 => _92((a,c)=>Di(r.function,e,a,c,o))]), () => ([]));if(s.length!==e.parameters.length)throw new Error(`Too few arguments for '${t}::${n}::${i}', expected ${e.parameters.length} but got ${s.length}`);return kt.build(`${t}::${n}`,i,o,s)}function Du(r){return new Sr(new _r(_chunkS7NKHRYEjs.j.fromHexInput(r.bytecode).toUint8Array(),Dn(r.typeArguments),r.functionArguments))}async function zu(r){let{cedraConfig:e,sender:t,payload:n,options:i,feePayerAddress:o}=r,s=async()=>ii[e.network]?{chainId:ii[e.network]}:{chainId:(await Cn({cedraConfig:e})).chain_id},a=async()=>_optionalChain([i, 'optionalAccess', _93 => _93.gasUnitPrice])?{gasEstimate:i.gasUnitPrice}:{gasEstimate:(await vn({cedraConfig:e})).gas_estimate},c=async()=>{let O=async()=>_optionalChain([i, 'optionalAccess', _94 => _94.accountSequenceNumber])!==void 0?i.accountSequenceNumber:(await Pn({cedraConfig:e,accountAddress:t})).sequence_number;if(o&&_chunkS7NKHRYEjs.Y.from(o).equals(_chunkS7NKHRYEjs.Y.ZERO))try{return await O()}catch (e5){return 0}else return O()},[{chainId:d},{gasEstimate:f},h]=await Promise.all([s(),a(),c()]),{maxGasAmount:l,gasUnitPrice:p,expireTimestamp:b,faAddress:F}={maxGasAmount:_optionalChain([i, 'optionalAccess', _95 => _95.maxGasAmount])?BigInt(i.maxGasAmount):BigInt(2e5),gasUnitPrice:_nullishCoalesce(_optionalChain([i, 'optionalAccess', _96 => _96.gasUnitPrice]), () => (BigInt(f))),expireTimestamp:_nullishCoalesce(_optionalChain([i, 'optionalAccess', _97 => _97.expireTimestamp]), () => (BigInt(Math.floor(Date.now()/1e3)+20))),faAddress:_optionalChain([i, 'optionalAccess', _98 => _98.faAddress])};return new Ce(_chunkS7NKHRYEjs.Y.from(t),BigInt(h),n,BigInt(l),BigInt(p),BigInt(b),new Rt(d),_nullishCoalesce(F, () => (ye("0x1::cedra_coin::CedraCoin"))))}async function zi(r){let{cedraConfig:e,sender:t,payload:n,options:i,feePayerAddress:o}=r,s=await zu({cedraConfig:e,sender:t,payload:n,options:i,feePayerAddress:o});if("secondarySignerAddresses"in r){let a=_nullishCoalesce(_optionalChain([r, 'access', _99 => _99.secondarySignerAddresses, 'optionalAccess', _100 => _100.map, 'call', _101 => _101(c=>_chunkS7NKHRYEjs.Y.from(c))]), () => ([]));return new yn(s,a,r.feePayerAddress?_chunkS7NKHRYEjs.Y.from(r.feePayerAddress):void 0)}return new mn(s,r.feePayerAddress?_chunkS7NKHRYEjs.Y.from(r.feePayerAddress):void 0)}function _s(r){let{signerPublicKey:e,transaction:t,secondarySignersPublicKeys:n,feePayerPublicKey:i}=r,o=ir(e);if(t.feePayerAddress){let a=new zt(t.rawTransaction,_nullishCoalesce(t.secondarySignerAddresses, () => ([])),t.feePayerAddress),c=[];t.secondarySignerAddresses&&(n?c=n.map(h=>ir(h)):c=Array.from({length:t.secondarySignerAddresses.length},()=>ir(void 0)));let d=ir(i),f=new Ot(o,_nullishCoalesce(t.secondarySignerAddresses, () => ([])),c,{address:t.feePayerAddress,authenticator:d});return new rt(a.raw_txn,f).bcsToBytes()}if(t.secondarySignerAddresses){let a=new Dt(t.rawTransaction,t.secondarySignerAddresses),c=[];n?c=n.map(f=>ir(f)):c=Array.from({length:t.secondarySignerAddresses.length},()=>ir(void 0));let d=new Ft(o,t.secondarySignerAddresses,c);return new rt(a.raw_txn,d).bcsToBytes()}let s;if(o instanceof De)s=new Nt(o.public_key,o.signature);else if(o instanceof oe||o instanceof Ve)s=new Tt(o);else if(o instanceof Zt)s=new Tt(o);else throw new Error("Invalid public key");return new rt(t.rawTransaction,s).bcsToBytes()}function ir(r){if(!r)return new Zt;let t=K.isInstance(r)||W.isInstance(r)||Ue.isInstance(r)?new N(r):r,n=new I(new Uint8Array(64));if(x.isInstance(t))return new De(t,n);if(N.isInstance(t))return K.isInstance(t.publicKey)?new oe(t,new B(ie.getSimulationSignature())):new oe(t,new B(n));if(be.isInstance(t))return new Ve(t,new we({signatures:t.publicKeys.map(i=>K.isInstance(i.publicKey)||W.isInstance(i.publicKey)?new B(ie.getSimulationSignature()):new B(n)),bitmap:t.createBitmap({bits:Array(t.publicKeys.length).fill(0).map((i,o)=>o)})}));throw new Error("Unsupported PublicKey used for simulations")}function Ni(r){let{transaction:e,feePayerAuthenticator:t,additionalSignersAuthenticators:n}=r,i=_o(J,r.senderAuthenticator),o;if(e.feePayerAddress){if(!t)throw new Error("Must provide a feePayerAuthenticator argument to generate a signed fee payer transaction");o=new Ot(i,_nullishCoalesce(e.secondarySignerAddresses, () => ([])),_nullishCoalesce(n, () => ([])),{address:e.feePayerAddress,authenticator:t})}else if(e.secondarySignerAddresses){if(!n)throw new Error("Must provide a additionalSignersAuthenticators argument to generate a signed multi agent transaction");o=new Ft(i,e.secondarySignerAddresses,n)}else i instanceof De?o=new Nt(i.public_key,i.signature):i instanceof Je?o=new er(i.public_key,i.signature):o=new Tt(i);return new rt(e.rawTransaction,o).bcsToBytes()}function Ps(r){let e=_sha3.sha3_256.create();for(let t of r)e.update(t);return e.digest()}var Nu=Ps(["CEDRA::Transaction"]);function Sw(r){let e=Ni(r);return new (0, _chunkS7NKHRYEjs.j)(Ps([Nu,new Uint8Array([0]),e])).toString()}async function xs({key:r,moduleAddress:e,moduleName:t,functionName:n,cedraConfig:i,abi:o,fetch:s}){return o!==void 0?o:Ge(async()=>s(e,t,n,i),`${r}-${i.network}-${e}-${t}-${n}`,1e3*60*5)()}async function T(r){let e=await Fu(r);return Ou(r,e)}async function Fu(r){let{cedraConfig:e,data:t}=r,n,i;return"bytecode"in t?i=await Nn(t):"multisigAddress"in t?(n={cedraConfig:e,multisigAddress:t.multisigAddress,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments,abi:t.abi},i=await Nn(n)):(n={cedraConfig:e,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments,abi:t.abi},i=await Nn(n)),i}async function Ou(r,e){let{cedraConfig:t,sender:n,options:i}=r,o;if(Gu(r)&&(o=_chunkS7NKHRYEjs.Y.ZERO.toString()),Bu(r)){let{secondarySignerAddresses:s}=r;return zi({cedraConfig:t,sender:n,payload:e,options:i,secondarySignerAddresses:s,feePayerAddress:o})}return zi({cedraConfig:t,sender:n,payload:e,options:i,feePayerAddress:o})}function Gu(r){return r.withFeePayer===!0}function Bu(r){return"secondarySignerAddresses"in r}function Is(r){let{transaction:e}=r;return ze(e)}function Fn(r){let{signer:e,transaction:t}=r;return e.signTransactionWithAuthenticator(t)}function On(r){let{signer:e,transaction:t}=r;if(!t.feePayerAddress)throw new Error(`Transaction ${t} is not a Fee Payer transaction`);return t.feePayerAddress=e.accountAddress,Fn({signer:e,transaction:t})}async function Fi(r){let{cedraConfig:e,transaction:t,signerPublicKey:n,secondarySignersPublicKeys:i,feePayerPublicKey:o,options:s}=r,a=_s({transaction:t,signerPublicKey:n,secondarySignersPublicKeys:i,feePayerPublicKey:o,options:s}),{data:c}=await mt({cedraConfig:e,body:a,path:"transactions/simulate",params:{estimate_gas_unit_price:_nullishCoalesce(_optionalChain([r, 'access', _102 => _102.options, 'optionalAccess', _103 => _103.estimateGasUnitPrice]), () => (!1)),estimate_max_gas_amount:_nullishCoalesce(_optionalChain([r, 'access', _104 => _104.options, 'optionalAccess', _105 => _105.estimateMaxGasAmount]), () => (!1)),estimate_prioritized_gas_unit_price:_nullishCoalesce(_optionalChain([r, 'access', _106 => _106.options, 'optionalAccess', _107 => _107.estimatePrioritizedGasUnitPrice]), () => (!1))},originMethod:"simulateTransaction",contentType:"application/x.cedra.signed_transaction+bcs"});return c}async function Ur(r){let{cedraConfig:e}=r,t=Ni({...r});try{let{data:n}=await mt({cedraConfig:e,body:t,path:"transactions",originMethod:"submitTransaction",contentType:"application/x.cedra.signed_transaction+bcs"});return n}catch(n){let i=rt.deserialize(new R(t));throw i.authenticator.isSingleSender()&&i.authenticator.sender.isSingleKey()&&(i.authenticator.sender.public_key.publicKey instanceof K||i.authenticator.sender.public_key.publicKey instanceof W)&&await me.fetchJWK({cedraConfig:e,publicKey:i.authenticator.sender.public_key.publicKey,kid:i.authenticator.sender.signature.signature.getJwkKid()}),n}}async function wt(r){let{cedraConfig:e,signer:t,feePayer:n,transaction:i}=r;hn(t)&&await t.checkKeylessAccountValidity(e),hn(n)&&await n.checkKeylessAccountValidity(e);let o=r.feePayerAuthenticator||n&&On({signer:n,transaction:i}),s=Fn({signer:t,transaction:i});return Ur({cedraConfig:e,transaction:i,senderAuthenticator:s,feePayerAuthenticator:o})}async function vs(r){let{cedraConfig:e,senderAuthenticator:t,feePayer:n,transaction:i}=r;hn(n)&&await n.checkKeylessAccountValidity(e);let o=On({signer:n,transaction:i});return Ur({cedraConfig:e,transaction:i,senderAuthenticator:t,feePayerAuthenticator:o})}var Mu={typeParameters:[],parameters:[v.u8(),new v(v.u8())]};async function Ks(r){let{cedraConfig:e,account:t,metadataBytes:n,moduleBytecode:i,options:o}=r,s=i.map(a=>S.U8(a));return T({cedraConfig:e,sender:_chunkS7NKHRYEjs.Y.from(t),data:{function:"0x1::code::publish_package_txn",functionArguments:[S.U8(n),new S(s)],abi:Mu},options:o})}async function Vt(r){return Pn(r)}async function Us(r){let{cedraConfig:e,accountAddress:t,options:n}=r;return ai({cedraConfig:e,originMethod:"getModules",path:`accounts/${_chunkS7NKHRYEjs.Y.from(t).toString()}/modules`,params:{ledger_version:_optionalChain([n, 'optionalAccess', _108 => _108.ledgerVersion]),limit:_nullishCoalesce(_optionalChain([n, 'optionalAccess', _109 => _109.limit]), () => (1e3))}})}async function ks(r){let{cedraConfig:e,accountAddress:t,options:n}=r,{response:i,cursor:o}=await cn({cedraConfig:e,originMethod:"getModulesPage",path:`accounts/${_chunkS7NKHRYEjs.Y.from(t).toString()}/modules`,params:{ledger_version:_optionalChain([n, 'optionalAccess', _110 => _110.ledgerVersion]),cursor:_optionalChain([n, 'optionalAccess', _111 => _111.cursor]),limit:_nullishCoalesce(_optionalChain([n, 'optionalAccess', _112 => _112.limit]), () => (100))}});return{modules:i.data,cursor:o}}async function zn(r){return as(r)}async function Ds(r){let{cedraConfig:e,accountAddress:t,options:n}=r;return an({cedraConfig:e,originMethod:"getTransactions",path:`accounts/${_chunkS7NKHRYEjs.Y.from(t).toString()}/transactions`,params:{start:_optionalChain([n, 'optionalAccess', _113 => _113.offset]),limit:_optionalChain([n, 'optionalAccess', _114 => _114.limit])}})}async function zs(r){let{cedraConfig:e,accountAddress:t,options:n}=r;return ai({cedraConfig:e,originMethod:"getResources",path:`accounts/${_chunkS7NKHRYEjs.Y.from(t).toString()}/resources`,params:{ledger_version:_optionalChain([n, 'optionalAccess', _115 => _115.ledgerVersion]),limit:_nullishCoalesce(_optionalChain([n, 'optionalAccess', _116 => _116.limit]), () => (999))}})}async function Ns(r){let{cedraConfig:e,accountAddress:t,options:n}=r,{response:i,cursor:o}=await cn({cedraConfig:e,originMethod:"getResourcesPage",path:`accounts/${_chunkS7NKHRYEjs.Y.from(t).toString()}/resources`,params:{ledger_version:_optionalChain([n, 'optionalAccess', _117 => _117.ledgerVersion]),cursor:_optionalChain([n, 'optionalAccess', _118 => _118.cursor]),limit:_nullishCoalesce(_optionalChain([n, 'optionalAccess', _119 => _119.limit]), () => (100))}});return{resources:i.data,cursor:o}}async function Gi(r){let{cedraConfig:e,accountAddress:t,resourceType:n,options:i}=r,{data:o}=await G({cedraConfig:e,originMethod:"getResource",path:`accounts/${_chunkS7NKHRYEjs.Y.from(t).toString()}/resource/${n}`,params:{ledger_version:_optionalChain([i, 'optionalAccess', _120 => _120.ledgerVersion])}});return o.data}async function or(r){let{cedraConfig:e,authenticationKey:t,options:n}=r,i=await Gi({cedraConfig:e,accountAddress:"0x1",resourceType:"0x1::account::OriginatingAddress",options:n}),{address_map:{handle:o}}=i,s=_chunkS7NKHRYEjs.Y.from(t);try{let a=await xn({cedraConfig:e,handle:o,data:{key:s.toString(),key_type:"address",value_type:"address"},options:n});return _chunkS7NKHRYEjs.Y.from(a)}catch(a){if(a instanceof Te&&a.data.error_code==="table_item_not_found")return s;throw a}}async function Fs(r){let{cedraConfig:e,accountAddress:t}=r,i={owner_address:{_eq:_chunkS7NKHRYEjs.Y.from(t).toStringLong()},amount:{_gt:0}},s=await w({cedraConfig:e,query:{query:$o,variables:{where_condition:i}},originMethod:"getAccountTokensCount"});return s.current_token_ownerships_v2_aggregate.aggregate?s.current_token_ownerships_v2_aggregate.aggregate.count:0}async function Os(r){let{cedraConfig:e,accountAddress:t,options:n}=r,o={owner_address:{_eq:_chunkS7NKHRYEjs.Y.from(t).toStringLong()},amount:{_gt:0}};_optionalChain([n, 'optionalAccess', _121 => _121.tokenStandard])&&(o.token_standard={_eq:_optionalChain([n, 'optionalAccess', _122 => _122.tokenStandard])});let s={query:qo,variables:{where_condition:o,offset:_optionalChain([n, 'optionalAccess', _123 => _123.offset]),limit:_optionalChain([n, 'optionalAccess', _124 => _124.limit]),order_by:_optionalChain([n, 'optionalAccess', _125 => _125.orderBy])}};return(await w({cedraConfig:e,query:s,originMethod:"getAccountOwnedTokens"})).current_token_ownerships_v2}async function Gs(r){let{cedraConfig:e,accountAddress:t,collectionAddress:n,options:i}=r,o=_chunkS7NKHRYEjs.Y.from(t).toStringLong(),s=_chunkS7NKHRYEjs.Y.from(n).toStringLong(),a={owner_address:{_eq:o},current_token_data:{collection_id:{_eq:s}},amount:{_gt:0}};_optionalChain([i, 'optionalAccess', _126 => _126.tokenStandard])&&(a.token_standard={_eq:_optionalChain([i, 'optionalAccess', _127 => _127.tokenStandard])});let c={query:Lo,variables:{where_condition:a,offset:_optionalChain([i, 'optionalAccess', _128 => _128.offset]),limit:_optionalChain([i, 'optionalAccess', _129 => _129.limit]),order_by:_optionalChain([i, 'optionalAccess', _130 => _130.orderBy])}};return(await w({cedraConfig:e,query:c,originMethod:"getAccountOwnedTokensFromCollectionAddress"})).current_token_ownerships_v2}async function Bs(r){let{cedraConfig:e,accountAddress:t,options:n}=r,o={owner_address:{_eq:_chunkS7NKHRYEjs.Y.from(t).toStringLong()}};_optionalChain([n, 'optionalAccess', _131 => _131.tokenStandard])&&(o.current_collection={token_standard:{_eq:_optionalChain([n, 'optionalAccess', _132 => _132.tokenStandard])}});let s={query:Ho,variables:{where_condition:o,offset:_optionalChain([n, 'optionalAccess', _133 => _133.offset]),limit:_optionalChain([n, 'optionalAccess', _134 => _134.limit]),order_by:_optionalChain([n, 'optionalAccess', _135 => _135.orderBy])}};return(await w({cedraConfig:e,query:s,originMethod:"getAccountCollectionsWithOwnedTokens"})).current_collection_ownership_v2_view}async function Ms(r){let{cedraConfig:e,accountAddress:t}=r,n=_chunkS7NKHRYEjs.Y.from(t).toStringLong(),o=await w({cedraConfig:e,query:{query:Wo,variables:{address:n}},originMethod:"getAccountTransactionsCount"});return o.account_transactions_aggregate.aggregate?o.account_transactions_aggregate.aggregate.count:0}async function Vs(r){let{cedraConfig:e,accountAddress:t,options:n}=r,i=_chunkS7NKHRYEjs.Y.from(t).toStringLong(),o={..._optionalChain([n, 'optionalAccess', _136 => _136.where]),owner_address:{_eq:i}},s={query:Vo,variables:{where_condition:o,offset:_optionalChain([n, 'optionalAccess', _137 => _137.offset]),limit:_optionalChain([n, 'optionalAccess', _138 => _138.limit]),order_by:_optionalChain([n, 'optionalAccess', _139 => _139.orderBy])}};return(await w({cedraConfig:e,query:s,originMethod:"getAccountCoinsData"})).current_fungible_asset_balances_new}async function Hs(r){let{cedraConfig:e,accountAddress:t}=r,n=_chunkS7NKHRYEjs.Y.from(t).toStringLong(),o=await w({cedraConfig:e,query:{query:Mo,variables:{address:n}},originMethod:"getAccountCoinsCount"});if(!o.current_fungible_asset_balances_new_aggregate.aggregate)throw Error("Failed to get the count of account coins");return o.current_fungible_asset_balances_new_aggregate.aggregate.count}async function qs(r){let{cedraConfig:e,accountAddress:t,options:n}=r,o={owner_address:{_eq:_chunkS7NKHRYEjs.Y.from(t).toStringLong()}},s={query:Sn,variables:{where_condition:o,offset:_optionalChain([n, 'optionalAccess', _140 => _140.offset]),limit:_optionalChain([n, 'optionalAccess', _141 => _141.limit]),order_by:_optionalChain([n, 'optionalAccess', _142 => _142.orderBy])}};return(await w({cedraConfig:e,query:s,originMethod:"getAccountOwnedObjects"})).current_objects}async function Ls(r){let{cedraConfig:e,privateKey:t}=r,n=new N(t.publicKey());if(t instanceof Qe){let o=H.fromPublicKey({publicKey:n}).derivedAddress();return nt.fromPrivateKey({privateKey:t,address:o})}if(t instanceof $){let i=H.fromPublicKey({publicKey:n.publicKey});if(await Rs({authKey:i,cedraConfig:e})){let c=i.derivedAddress();return nt.fromPrivateKey({privateKey:t,address:c,legacy:!0})}let s=H.fromPublicKey({publicKey:n});if(await Rs({authKey:s,cedraConfig:e})){let c=s.derivedAddress();return nt.fromPrivateKey({privateKey:t,address:c,legacy:!1})}}throw new Error(`Can't derive account from private key ${t}`)}async function Rs(r){let{cedraConfig:e,authKey:t}=r,n=await or({cedraConfig:e,authenticationKey:t.derivedAddress()});try{return await Vt({cedraConfig:e,accountAddress:n}),!0}catch(i){if(i.status===404)return!1;throw new Error(`Error while looking for an account info ${n.toString()}`)}}var Vu={typeParameters:[],parameters:[new pe,v.u8(),new pe,v.u8(),v.u8(),v.u8()]};async function $s(r){let{cedraConfig:e,fromAccount:t,dangerouslySkipVerification:n}=r;if("toNewPrivateKey"in r)return Oi({cedraConfig:e,fromAccount:t,toNewPrivateKey:r.toNewPrivateKey});let i;if("toAccount"in r){if(r.toAccount instanceof se)return Oi({cedraConfig:e,fromAccount:t,toNewPrivateKey:r.toAccount.privateKey});if(r.toAccount instanceof Tn)return Oi({cedraConfig:e,fromAccount:t,toAccount:r.toAccount});i=r.toAccount.publicKey.authKey()}else if("toAuthKey"in r)i=r.toAuthKey;else throw new Error("Invalid arguments");let o=await qu({cedraConfig:e,fromAccount:t,toAuthKey:i});if(n===!0)return o;let s=await bt({cedraConfig:e,transactionHash:o.hash});if(!s.success)throw new Error(`Failed to rotate authentication key - ${s}`);let a=await T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x1::account::set_originating_address",functionArguments:[]}});return wt({cedraConfig:e,signer:r.toAccount,transaction:a})}async function Oi(r){let{cedraConfig:e,fromAccount:t}=r,n=await Vt({cedraConfig:e,accountAddress:t.accountAddress}),i;"toNewPrivateKey"in r?i=nt.fromPrivateKey({privateKey:r.toNewPrivateKey,legacy:!0}):i=r.toAccount;let s=new gn({sequenceNumber:BigInt(n.sequence_number),originator:t.accountAddress,currentAuthKey:_chunkS7NKHRYEjs.Y.from(n.authentication_key),newPublicKey:i.publicKey}).bcsToBytes(),a=t.sign(s),c=i.sign(s),d=await T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new Y(t.signingScheme),S.U8(t.publicKey.toUint8Array()),new Y(i.signingScheme),S.U8(i.publicKey.toUint8Array()),S.U8(a.toUint8Array()),S.U8(c.toUint8Array())],abi:Vu}});return wt({cedraConfig:e,signer:t,transaction:d})}var Hu={typeParameters:[],parameters:[v.u8()]};async function qu(r){let{cedraConfig:e,fromAccount:t,toAuthKey:n}=r,i=n,o=await T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x1::account::rotate_authentication_key_call",functionArguments:[S.U8(i.toUint8Array())],abi:Hu}});return wt({cedraConfig:e,signer:t,transaction:o})}async function C(r){r.minimumLedgerVersion!==void 0&&await Kn({cedraConfig:r.config,minimumLedgerVersion:r.minimumLedgerVersion,processorType:r.processorType})}async function ae(r){let{cedraConfig:e,payload:t,options:n}=r,i=await Es({...t,cedraConfig:e}),o=new _chunkS7NKHRYEjs.m;i.serialize(o);let s=o.toUint8Array(),{data:a}=await mt({cedraConfig:e,path:"view",originMethod:"view",contentType:"application/x.cedra.view_function+bcs",params:{ledger_version:_optionalChain([n, 'optionalAccess', _143 => _143.ledgerVersion])},body:s});return a}async function Ws(r){let{cedraConfig:e,payload:t,options:n}=r,{data:i}=await mt({cedraConfig:e,originMethod:"viewJson",path:"view",params:{ledger_version:_optionalChain([n, 'optionalAccess', _144 => _144.ledgerVersion])},body:{function:t.function,type_arguments:_nullishCoalesce(t.typeArguments, () => ([])),arguments:_nullishCoalesce(t.functionArguments, () => ([]))}});return i}async function Qs(r){let{cedraConfig:e,options:t}=r,{data:n}=await G({cedraConfig:e,path:"whitelist",originMethod:"getWhitelist",contentType:"application/x.cedra.view_function+bcs",params:{ledger_version:_optionalChain([t, 'optionalAccess', _145 => _145.ledgerVersion])}});return n}async function js(r){let{cedraConfig:e,sender:t,authenticationFunction:n,options:i}=r,{moduleAddress:o,moduleName:s,functionName:a}=_chunkS7NKHRYEjs.ka.call(void 0, n);return T({cedraConfig:e,sender:t,data:{function:"0x1::account_abstraction::add_authentication_function",typeArguments:[],functionArguments:[o,s,a],abi:{typeParameters:[],parameters:[new M,new A(_()),new A(_())]}},options:i})}async function Js(r){let{cedraConfig:e,sender:t,authenticationFunction:n,options:i}=r,{moduleAddress:o,moduleName:s,functionName:a}=_chunkS7NKHRYEjs.ka.call(void 0, n);return T({cedraConfig:e,sender:t,data:{function:"0x1::account_abstraction::remove_authentication_function",typeArguments:[],functionArguments:[o,s,a],abi:{typeParameters:[],parameters:[new M,new A(_()),new A(_())]}},options:i})}async function Xs(r){let{cedraConfig:e,sender:t,options:n}=r;return T({cedraConfig:e,sender:t,data:{function:"0x1::account_abstraction::remove_authenticator",typeArguments:[],functionArguments:[],abi:{typeParameters:[],parameters:[]}},options:n})}var Ht=class{constructor(e){this.config=e;this.isAccountAbstractionEnabled=async e=>{let t=await this.getAuthenticationFunction(e),{moduleAddress:n,moduleName:i,functionName:o}=_chunkS7NKHRYEjs.ka.call(void 0, e.authenticationFunction);return _nullishCoalesce(_optionalChain([t, 'optionalAccess', _146 => _146.some, 'call', _147 => _147(s=>_chunkS7NKHRYEjs.Y.fromString(n).equals(s.moduleAddress)&&i===s.moduleName&&o===s.functionName)]), () => (!1))};this.enableAccountAbstractionTransaction=this.addAuthenticationFunctionTransaction;this.disableAccountAbstractionTransaction=async e=>{let{accountAddress:t,authenticationFunction:n,options:i}=e;return n?this.removeAuthenticationFunctionTransaction({accountAddress:t,authenticationFunction:n,options:i}):this.removeDispatchableAuthenticatorTransaction({accountAddress:t,options:i})}}async addAuthenticationFunctionTransaction(e){let{accountAddress:t,authenticationFunction:n,options:i}=e;return js({cedraConfig:this.config,authenticationFunction:n,sender:t,options:i})}async removeAuthenticationFunctionTransaction(e){let{accountAddress:t,authenticationFunction:n,options:i}=e;return Js({cedraConfig:this.config,sender:t,authenticationFunction:n,options:i})}async removeDispatchableAuthenticatorTransaction(e){let{accountAddress:t,options:n}=e;return Xs({cedraConfig:this.config,sender:t,options:n})}async getAuthenticationFunction(e){let{accountAddress:t}=e,[{vec:n}]=await ae({cedraConfig:this.config,payload:{function:"0x1::account_abstraction::dispatchable_authenticator",functionArguments:[_chunkS7NKHRYEjs.Y.from(t)],abi:{typeParameters:[],parameters:[new M],returnTypes:[]}}});if(n.length!==0)return n[0].map(i=>({moduleAddress:_chunkS7NKHRYEjs.Y.fromString(i.module_address),moduleName:i.module_name,functionName:i.function_name}))}};var kr=class{constructor(e){this.config=e;this.abstraction=new Ht(e)}async getAccountInfo(e){return Vt({cedraConfig:this.config,...e})}async getAccountModules(e){return Us({cedraConfig:this.config,...e})}async getAccountModulesPage(e){return ks({cedraConfig:this.config,...e})}async getAccountModule(e){return zn({cedraConfig:this.config,...e})}async getAccountTransactions(e){return Ds({cedraConfig:this.config,...e})}async getAccountResources(e){return zs({cedraConfig:this.config,...e})}async getAccountResourcesPage(e){return Ns({cedraConfig:this.config,...e})}async getAccountResource(e){return Gi({cedraConfig:this.config,...e})}async lookupOriginalAccountAddress(e){return or({cedraConfig:this.config,...e})}async getAccountTokensCount(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"account_transactions_processor"}),Fs({cedraConfig:this.config,...e})}async getAccountOwnedTokens(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),Os({cedraConfig:this.config,...e})}async getAccountOwnedTokensFromCollectionAddress(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),Gs({cedraConfig:this.config,...e})}async getAccountCollectionsWithOwnedTokens(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),Bs({cedraConfig:this.config,...e})}async getAccountTransactionsCount(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"account_transactions_processor"}),Ms({cedraConfig:this.config,...e})}async getAccountCoinsData(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Vs({cedraConfig:this.config,...e})}async getAccountCoinsCount(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Hs({cedraConfig:this.config,...e})}async getAccountCEDRAAmount(e){return this.getAccountCoinAmount({coinType:It,faMetadataAddress:So,...e})}async getAccountCoinAmount(e){let{accountAddress:t,coinType:n,faMetadataAddress:i,minimumLedgerVersion:o}=e;o&&console.warn(`minimumLedgerVersion is not used anymore, here for backward 
        compatibility see https://github.com/cedra-labs/cedra-ts-sdk/pull/519, 
        will be removed in the near future`);let s=n;n===void 0&&i!==void 0&&(s=await Ge(async()=>{try{let d=(await ae({cedraConfig:this.config,payload:{function:"0x1::coin::paired_coin",functionArguments:[i]}})).at(0);if(d.vec.length>0&&_chunkS7NKHRYEjs.ja.call(void 0, d.vec[0]))return _chunkS7NKHRYEjs.ia.call(void 0, d.vec[0])}catch (e6){}},`coin-mapping-${i.toString()}`,1e3*60*5)());let a;if(n!==void 0&&i!==void 0)a=_chunkS7NKHRYEjs.Y.from(i).toStringLong();else if(n!==void 0&&i===void 0)n===It?a=_chunkS7NKHRYEjs.Y.A.toStringLong():a=_chunkS7NKHRYEjs.Z.call(void 0, _chunkS7NKHRYEjs.Y.A,n).toStringLong();else if(n===void 0&&i!==void 0){let d=_chunkS7NKHRYEjs.Y.from(i);a=d.toStringLong(),d===_chunkS7NKHRYEjs.Y.A&&(s=It)}else throw new Error("Either coinType, faMetadataAddress, or both must be provided");if(s!==void 0){let[d]=await ae({cedraConfig:this.config,payload:{function:"0x1::coin::balance",typeArguments:[s],functionArguments:[t]}});return parseInt(d,10)}let[c]=await ae({cedraConfig:this.config,payload:{function:"0x1::primary_fungible_store::balance",typeArguments:["0x1::object::ObjectCore"],functionArguments:[t,a]}});return parseInt(c,10)}async getAccountOwnedObjects(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"default_processor"}),qs({cedraConfig:this.config,...e})}async deriveAccountFromPrivateKey(e){return Ls({cedraConfig:this.config,...e})}};var _cedraclient = require('@cedra-labs/cedra-client'); var _cedraclient2 = _interopRequireDefault(_cedraclient);var Gn=class{constructor(e){if(_optionalChain([e, 'optionalAccess', _148 => _148.fullnode])||_optionalChain([e, 'optionalAccess', _149 => _149.indexer])||_optionalChain([e, 'optionalAccess', _150 => _150.faucet])||_optionalChain([e, 'optionalAccess', _151 => _151.pepper])||_optionalChain([e, 'optionalAccess', _152 => _152.prover])){if(_optionalChain([e, 'optionalAccess', _153 => _153.network])==="custom")console.info("Note: using CUSTOM network will require queries to lookup ChainId");else if(!_optionalChain([e, 'optionalAccess', _154 => _154.network]))throw new Error("Custom endpoints require a network to be specified")}this.network=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _155 => _155.network]), () => ("devnet")),this.fullnode=_optionalChain([e, 'optionalAccess', _156 => _156.fullnode]),this.faucet=_optionalChain([e, 'optionalAccess', _157 => _157.faucet]),this.pepper=_optionalChain([e, 'optionalAccess', _158 => _158.pepper]),this.prover=_optionalChain([e, 'optionalAccess', _159 => _159.prover]),this.indexer=_optionalChain([e, 'optionalAccess', _160 => _160.indexer]),this.client=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _161 => _161.client]), () => ({provider:_cedraclient2.default})),this.clientConfig=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _162 => _162.clientConfig]), () => ({})),this.fullnodeConfig=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _163 => _163.fullnodeConfig]), () => ({})),this.indexerConfig=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _164 => _164.indexerConfig]), () => ({})),this.faucetConfig=_nullishCoalesce(_optionalChain([e, 'optionalAccess', _165 => _165.faucetConfig]), () => ({}))}getRequestUrl(e){switch(e){case"Fullnode":if(this.fullnode!==void 0)return this.fullnode;if(this.network==="custom")throw new Error("Please provide a custom full node url");return ho[this.network];case"Faucet":if(this.faucet!==void 0)return this.faucet;if(this.network==="mainnet")throw new Error("There is no mainnet faucet");if(this.network==="custom")throw new Error("Please provide a custom faucet url");return To[this.network];case"Indexer":if(this.indexer!==void 0)return this.indexer;if(this.network==="custom")throw new Error("Please provide a custom indexer url");return Ao[this.network];case"Pepper":if(this.pepper!==void 0)return this.pepper;if(this.network==="custom")throw new Error("Please provide a custom pepper service url");return ti[this.network];case"Prover":if(this.prover!==void 0)return this.prover;if(this.network==="custom")throw new Error("Please provide a custom prover service url");return ri[this.network];default:throw Error(`apiType ${e} is not supported`)}}isPepperServiceRequest(e){return ti[this.network]===e}isProverServiceRequest(e){return ri[this.network]===e}};var $u={typeParameters:[{constraints:[]}],parameters:[new M,new X]};async function Ys(r){let{cedraConfig:e,sender:t,recipient:n,amount:i,coinType:o,options:s}=r;return T({cedraConfig:e,sender:t,data:{function:"0x1::cedra_account::transfer_coins",typeArguments:[_nullishCoalesce(o, () => (It))],functionArguments:[n,i],abi:$u},options:s})}var Dr=class{constructor(e){this.config=e}async transferCoinTransaction(e){return Ys({cedraConfig:this.config,...e})}};var St={BOOLEAN:"bool",U8:"u8",U16:"u16",U32:"u32",U64:"u64",U128:"u128",U256:"u256",ADDRESS:"address",STRING:"0x1::string::String",ARRAY:"vector<u8>"},_e="0x4::token::Token";async function Zs(r){let{cedraConfig:e,digitalAssetAddress:t}=r,n={token_data_id:{_eq:_chunkS7NKHRYEjs.Y.from(t).toStringLong()}};return(await w({cedraConfig:e,query:{query:is,variables:{where_condition:n}},originMethod:"getDigitalAssetData"})).current_token_datas_v2[0]}async function ea(r){let{cedraConfig:e,digitalAssetAddress:t}=r,n={token_data_id:{_eq:_chunkS7NKHRYEjs.Y.from(t).toStringLong()},amount:{_gt:0}};return(await w({cedraConfig:e,query:{query:wi,variables:{where_condition:n}},originMethod:"getCurrentDigitalAssetOwnership"})).current_token_ownerships_v2[0]}async function ta(r){let{cedraConfig:e,ownerAddress:t,options:n}=r,i={owner_address:{_eq:_chunkS7NKHRYEjs.Y.from(t).toStringLong()},amount:{_gt:0}},o={query:wi,variables:{where_condition:i,offset:_optionalChain([n, 'optionalAccess', _166 => _166.offset]),limit:_optionalChain([n, 'optionalAccess', _167 => _167.limit]),order_by:_optionalChain([n, 'optionalAccess', _168 => _168.orderBy])}};return(await w({cedraConfig:e,query:o,originMethod:"getOwnedDigitalAssets"})).current_token_ownerships_v2}async function ra(r){let{cedraConfig:e,digitalAssetAddress:t,options:n}=r,i={token_data_id:{_eq:_chunkS7NKHRYEjs.Y.from(t).toStringLong()}},o={query:ns,variables:{where_condition:i,offset:_optionalChain([n, 'optionalAccess', _169 => _169.offset]),limit:_optionalChain([n, 'optionalAccess', _170 => _170.limit]),order_by:_optionalChain([n, 'optionalAccess', _171 => _171.orderBy])}};return(await w({cedraConfig:e,query:o,originMethod:"getDigitalAssetActivity"})).token_activities_v2}var Wu={typeParameters:[],parameters:[new A(_()),new X,new A(_()),new A(_()),new L,new L,new L,new L,new L,new L,new L,new L,new L,new X,new X]};async function na(r){let{cedraConfig:e,options:t,creator:n}=r;return T({cedraConfig:e,sender:n.accountAddress,data:{function:"0x4::cedra_token::create_collection",functionArguments:[new P(r.description),new j(_nullishCoalesce(r.maxSupply, () => (_chunkS7NKHRYEjs.e))),new P(r.name),new P(r.uri),new z(_nullishCoalesce(r.mutableDescription, () => (!0))),new z(_nullishCoalesce(r.mutableRoyalty, () => (!0))),new z(_nullishCoalesce(r.mutableURI, () => (!0))),new z(_nullishCoalesce(r.mutableTokenDescription, () => (!0))),new z(_nullishCoalesce(r.mutableTokenName, () => (!0))),new z(_nullishCoalesce(r.mutableTokenProperties, () => (!0))),new z(_nullishCoalesce(r.mutableTokenURI, () => (!0))),new z(_nullishCoalesce(r.tokensBurnableByCreator, () => (!0))),new z(_nullishCoalesce(r.tokensFreezableByCreator, () => (!0))),new j(_nullishCoalesce(r.royaltyNumerator, () => (0))),new j(_nullishCoalesce(r.royaltyDenominator, () => (1)))],abi:Wu},options:t})}async function sr(r){let{cedraConfig:e,options:t}=r,n=_optionalChain([t, 'optionalAccess', _172 => _172.where]);_optionalChain([t, 'optionalAccess', _173 => _173.tokenStandard])&&(n.token_standard={_eq:_nullishCoalesce(_optionalChain([t, 'optionalAccess', _174 => _174.tokenStandard]), () => ("v2"))});let i={query:jo,variables:{where_condition:n,offset:_optionalChain([t, 'optionalAccess', _175 => _175.offset]),limit:_optionalChain([t, 'optionalAccess', _176 => _176.limit])}};return(await w({cedraConfig:e,query:i,originMethod:"getCollectionData"})).current_collections_v2[0]}async function ia(r){let{cedraConfig:e,creatorAddress:t,collectionName:n,options:i}=r,o=_chunkS7NKHRYEjs.Y.from(t),s={collection_name:{_eq:n},creator_address:{_eq:o.toStringLong()}};return _optionalChain([i, 'optionalAccess', _177 => _177.tokenStandard])&&(s.token_standard={_eq:_nullishCoalesce(_optionalChain([i, 'optionalAccess', _178 => _178.tokenStandard]), () => ("v2"))}),sr({cedraConfig:e,options:{...i,where:s}})}async function oa(r){let{cedraConfig:e,creatorAddress:t,options:n}=r,o={creator_address:{_eq:_chunkS7NKHRYEjs.Y.from(t).toStringLong()}};return _optionalChain([n, 'optionalAccess', _179 => _179.tokenStandard])&&(o.token_standard={_eq:_nullishCoalesce(_optionalChain([n, 'optionalAccess', _180 => _180.tokenStandard]), () => ("v2"))}),sr({cedraConfig:e,options:{...n,where:o}})}async function sa(r){let{cedraConfig:e,collectionId:t,options:n}=r,o={collection_id:{_eq:_chunkS7NKHRYEjs.Y.from(t).toStringLong()}};return _optionalChain([n, 'optionalAccess', _181 => _181.tokenStandard])&&(o.token_standard={_eq:_nullishCoalesce(_optionalChain([n, 'optionalAccess', _182 => _182.tokenStandard]), () => ("v2"))}),sr({cedraConfig:e,options:{...n,where:o}})}async function aa(r){let{creatorAddress:e,collectionName:t,options:n,cedraConfig:i}=r,o=_chunkS7NKHRYEjs.Y.from(e),s={collection_name:{_eq:t},creator_address:{_eq:o.toStringLong()}};return _optionalChain([n, 'optionalAccess', _183 => _183.tokenStandard])&&(s.token_standard={_eq:_nullishCoalesce(_optionalChain([n, 'optionalAccess', _184 => _184.tokenStandard]), () => ("v2"))}),(await sr({cedraConfig:i,options:{where:s}})).collection_id}var Qu={typeParameters:[],parameters:[new A(_()),new A(_()),new A(_()),new A(_()),new v(new A(_())),new v(new A(_())),new v(v.u8())]};async function ca(r){let{cedraConfig:e,options:t,creator:n,collection:i,description:o,name:s,uri:a,propertyKeys:c,propertyTypes:d,propertyValues:f}=r,h=_optionalChain([d, 'optionalAccess', _185 => _185.map, 'call', _186 => _186(l=>St[l])]);return T({cedraConfig:e,sender:n.accountAddress,data:{function:"0x4::cedra_token::mint",functionArguments:[new P(i),new P(o),new P(s),new P(a),S.MoveString(_nullishCoalesce(c, () => ([]))),S.MoveString(_nullishCoalesce(h, () => ([]))),Sa(_nullishCoalesce(f, () => ([])),_nullishCoalesce(h, () => ([])))],abi:Qu},options:t})}var ju={typeParameters:[{constraints:["key"]}],parameters:[new A(ge(new V(0))),new M]};async function ua(r){let{cedraConfig:e,sender:t,digitalAssetAddress:n,recipient:i,digitalAssetType:o,options:s}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x1::object::transfer",typeArguments:[_nullishCoalesce(o, () => (_e))],functionArguments:[_chunkS7NKHRYEjs.Y.from(n),_chunkS7NKHRYEjs.Y.from(i)],abi:ju},options:s})}var Ju={typeParameters:[],parameters:[new A(_()),new A(_()),new A(_()),new A(_()),new v(new A(_())),new v(new A(_())),new v(v.u8()),new M]};async function da(r){let{cedraConfig:e,account:t,collection:n,description:i,name:o,uri:s,recipient:a,propertyKeys:c,propertyTypes:d,propertyValues:f,options:h}=r;if(_optionalChain([c, 'optionalAccess', _187 => _187.length])!==_optionalChain([f, 'optionalAccess', _188 => _188.length]))throw new Error("Property keys and property values counts do not match");if(_optionalChain([d, 'optionalAccess', _189 => _189.length])!==_optionalChain([f, 'optionalAccess', _190 => _190.length]))throw new Error("Property types and property values counts do not match");let l=_optionalChain([d, 'optionalAccess', _191 => _191.map, 'call', _192 => _192(p=>St[p])]);return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x4::cedra_token::mint_soul_bound",functionArguments:[n,i,o,s,S.MoveString(_nullishCoalesce(c, () => ([]))),S.MoveString(_nullishCoalesce(l, () => ([]))),Sa(_nullishCoalesce(f, () => ([])),_nullishCoalesce(l, () => ([]))),a],abi:Ju},options:h})}var Xu={typeParameters:[{constraints:["key"]}],parameters:[new A(ge(new V(0)))]};async function la(r){let{cedraConfig:e,creator:t,digitalAssetAddress:n,digitalAssetType:i,options:o}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x4::cedra_token::burn",typeArguments:[_nullishCoalesce(i, () => (_e))],functionArguments:[_chunkS7NKHRYEjs.Y.from(n)],abi:Xu},options:o})}var Yu={typeParameters:[{constraints:["key"]}],parameters:[new A(ge(new V(0)))]};async function pa(r){let{cedraConfig:e,creator:t,digitalAssetAddress:n,digitalAssetType:i,options:o}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x4::cedra_token::freeze_transfer",typeArguments:[_nullishCoalesce(i, () => (_e))],functionArguments:[n],abi:Yu},options:o})}var Zu={typeParameters:[{constraints:["key"]}],parameters:[new A(ge(new V(0)))]};async function ga(r){let{cedraConfig:e,creator:t,digitalAssetAddress:n,digitalAssetType:i,options:o}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x4::cedra_token::unfreeze_transfer",typeArguments:[_nullishCoalesce(i, () => (_e))],functionArguments:[n],abi:Zu},options:o})}var ed={typeParameters:[{constraints:["key"]}],parameters:[new A(ge(new V(0))),new A(_())]};async function ma(r){let{cedraConfig:e,creator:t,description:n,digitalAssetAddress:i,digitalAssetType:o,options:s}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x4::cedra_token::set_description",typeArguments:[_nullishCoalesce(o, () => (_e))],functionArguments:[_chunkS7NKHRYEjs.Y.from(i),new P(n)],abi:ed},options:s})}var td={typeParameters:[{constraints:["key"]}],parameters:[new A(ge(new V(0))),new A(_())]};async function ya(r){let{cedraConfig:e,creator:t,name:n,digitalAssetAddress:i,digitalAssetType:o,options:s}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x4::cedra_token::set_name",typeArguments:[_nullishCoalesce(o, () => (_e))],functionArguments:[_chunkS7NKHRYEjs.Y.from(i),new P(n)],abi:td},options:s})}var rd={typeParameters:[{constraints:["key"]}],parameters:[new A(ge(new V(0))),new A(_())]};async function fa(r){let{cedraConfig:e,creator:t,uri:n,digitalAssetAddress:i,digitalAssetType:o,options:s}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x4::cedra_token::set_uri",typeArguments:[_nullishCoalesce(o, () => (_e))],functionArguments:[_chunkS7NKHRYEjs.Y.from(i),new P(n)],abi:rd},options:s})}var nd={typeParameters:[{constraints:["key"]}],parameters:[new A(ge(new V(0))),new A(_()),new A(_()),v.u8()]};async function Aa(r){let{cedraConfig:e,creator:t,propertyKey:n,propertyType:i,propertyValue:o,digitalAssetAddress:s,digitalAssetType:a,options:c}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x4::cedra_token::add_property",typeArguments:[_nullishCoalesce(a, () => (_e))],functionArguments:[_chunkS7NKHRYEjs.Y.from(s),new P(n),new P(St[i]),S.U8(Bi(o,St[i]))],abi:nd},options:c})}var id={typeParameters:[{constraints:["key"]}],parameters:[new A(ge(new V(0))),new A(_())]};async function ha(r){let{cedraConfig:e,creator:t,propertyKey:n,digitalAssetAddress:i,digitalAssetType:o,options:s}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x4::cedra_token::remove_property",typeArguments:[_nullishCoalesce(o, () => (_e))],functionArguments:[_chunkS7NKHRYEjs.Y.from(i),new P(n)],abi:id},options:s})}var od={typeParameters:[{constraints:["key"]}],parameters:[new A(ge(new V(0))),new A(_()),new A(_()),v.u8()]};async function Ta(r){let{cedraConfig:e,creator:t,propertyKey:n,propertyType:i,propertyValue:o,digitalAssetAddress:s,digitalAssetType:a,options:c}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x4::cedra_token::update_property",typeArguments:[_nullishCoalesce(a, () => (_e))],functionArguments:[_chunkS7NKHRYEjs.Y.from(s),new P(n),new P(St[i]),Bi(o,St[i])],abi:od},options:c})}var sd={typeParameters:[{constraints:["key"]},{constraints:[]}],parameters:[new A(ge(new V(0))),new A(_()),new V(1)]};async function ba(r){let{cedraConfig:e,creator:t,propertyKey:n,propertyType:i,propertyValue:o,digitalAssetAddress:s,digitalAssetType:a,options:c}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x4::cedra_token::add_typed_property",typeArguments:[_nullishCoalesce(a, () => (_e)),St[i]],functionArguments:[_chunkS7NKHRYEjs.Y.from(s),new P(n),o],abi:sd},options:c})}var ad={typeParameters:[{constraints:["key"]},{constraints:[]}],parameters:[new A(ge(new V(0))),new A(_()),new V(1)]};async function wa(r){let{cedraConfig:e,creator:t,propertyKey:n,propertyType:i,propertyValue:o,digitalAssetAddress:s,digitalAssetType:a,options:c}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x4::cedra_token::update_typed_property",typeArguments:[_nullishCoalesce(a, () => (_e)),St[i]],functionArguments:[_chunkS7NKHRYEjs.Y.from(s),new P(n),o],abi:ad},options:c})}function Sa(r,e){let t=new Array;return e.forEach((n,i)=>{t.push(Bi(r[i],n))}),t}function Bi(r,e){let t=ye(e);return Mt(r,t,0,[]).bcsToBytes()}var zr=class{constructor(e){this.config=e}async getCollectionData(e){await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"});let{creatorAddress:t,collectionName:n,options:i}=e,o=_chunkS7NKHRYEjs.Y.from(t),s={collection_name:{_eq:n},creator_address:{_eq:o.toStringLong()}};return _optionalChain([i, 'optionalAccess', _193 => _193.tokenStandard])&&(s.token_standard={_eq:_nullishCoalesce(_optionalChain([i, 'optionalAccess', _194 => _194.tokenStandard]), () => ("v2"))}),sr({cedraConfig:this.config,options:{where:s}})}async getCollectionDataByCreatorAddressAndCollectionName(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),ia({cedraConfig:this.config,...e})}async getCollectionDataByCreatorAddress(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),oa({cedraConfig:this.config,...e})}async getCollectionDataByCollectionId(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),sa({cedraConfig:this.config,...e})}async getCollectionId(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),aa({cedraConfig:this.config,...e})}async getDigitalAssetData(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),Zs({cedraConfig:this.config,...e})}async getCurrentDigitalAssetOwnership(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),ea({cedraConfig:this.config,...e})}async getOwnedDigitalAssets(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),ta({cedraConfig:this.config,...e})}async getDigitalAssetActivity(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"token_v2_processor"}),ra({cedraConfig:this.config,...e})}async createCollectionTransaction(e){return na({cedraConfig:this.config,...e})}async mintDigitalAssetTransaction(e){return ca({cedraConfig:this.config,...e})}async transferDigitalAssetTransaction(e){return ua({cedraConfig:this.config,...e})}async mintSoulBoundTransaction(e){return da({cedraConfig:this.config,...e})}async burnDigitalAssetTransaction(e){return la({cedraConfig:this.config,...e})}async freezeDigitalAssetTransaferTransaction(e){return pa({cedraConfig:this.config,...e})}async unfreezeDigitalAssetTransaferTransaction(e){return ga({cedraConfig:this.config,...e})}async setDigitalAssetDescriptionTransaction(e){return ma({cedraConfig:this.config,...e})}async setDigitalAssetNameTransaction(e){return ya({cedraConfig:this.config,...e})}async setDigitalAssetURITransaction(e){return fa({cedraConfig:this.config,...e})}async addDigitalAssetPropertyTransaction(e){return Aa({cedraConfig:this.config,...e})}async removeDigitalAssetPropertyTransaction(e){return ha({cedraConfig:this.config,...e})}async updateDigitalAssetPropertyTransaction(e){return Ta({cedraConfig:this.config,...e})}async addDigitalAssetTypedPropertyTransaction(e){return ba({cedraConfig:this.config,...e})}async updateDigitalAssetTypedPropertyTransaction(e){return wa({cedraConfig:this.config,...e})}};var Ca=300,cd=r=>{if(r&&r.length>Ca)throw new Error(`Event type length exceeds the maximum length of ${Ca}`)};async function Ea(r){let{cedraConfig:e,eventType:t,options:n}=r,i={_or:[{account_address:{_eq:t.split("::")[0]}},{account_address:{_eq:"0x0000000000000000000000000000000000000000000000000000000000000000"},sequence_number:{_eq:0},creation_number:{_eq:0}}],indexed_type:{_eq:t}};return Nr({cedraConfig:e,options:{...n,where:i}})}async function _a(r){let{accountAddress:e,cedraConfig:t,creationNumber:n,options:i}=r,s={account_address:{_eq:_chunkS7NKHRYEjs.Y.from(e).toStringLong()},creation_number:{_eq:n}};return Nr({cedraConfig:t,options:{...i,where:s}})}async function Pa(r){let{accountAddress:e,cedraConfig:t,eventType:n,options:i}=r,s={account_address:{_eq:_chunkS7NKHRYEjs.Y.from(e).toStringLong()},indexed_type:{_eq:n}};return Nr({cedraConfig:t,options:{...i,where:s}})}async function Nr(r){let{cedraConfig:e,options:t}=r;cd(_optionalChain([t, 'optionalAccess', _195 => _195.where, 'optionalAccess', _196 => _196.indexed_type, 'optionalAccess', _197 => _197._eq]));let n={query:Yo,variables:{where_condition:_optionalChain([t, 'optionalAccess', _198 => _198.where]),offset:_optionalChain([t, 'optionalAccess', _199 => _199.offset]),limit:_optionalChain([t, 'optionalAccess', _200 => _200.limit]),order_by:_optionalChain([t, 'optionalAccess', _201 => _201.orderBy])}};return(await w({cedraConfig:e,query:n,originMethod:"getEvents"})).events}var Fr=class{constructor(e){this.config=e}async getModuleEventsByEventType(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"events_processor"}),Ea({cedraConfig:this.config,...e})}async getAccountEventsByCreationNumber(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"events_processor"}),_a({cedraConfig:this.config,...e})}async getAccountEventsByEventType(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"events_processor"}),Pa({cedraConfig:this.config,...e})}async getEvents(e){return await C({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _202 => _202.minimumLedgerVersion]),processorType:"events_processor"}),Nr({cedraConfig:this.config,...e})}};async function xa(r){let{cedraConfig:e,accountAddress:t,amount:n,options:i}=r,o=_optionalChain([i, 'optionalAccess', _203 => _203.timeoutSecs])||20,{data:s}=await Io({cedraConfig:e,path:"fund",body:{address:_chunkS7NKHRYEjs.Y.from(t).toString(),amount:n},originMethod:"fundAccount"}),a=s.txn_hashes[0],c=await bt({cedraConfig:e,transactionHash:a,options:{timeoutSecs:o,checkSuccess:_optionalChain([i, 'optionalAccess', _204 => _204.checkSuccess])}});if(c.type==="user_transaction")return c;throw new Error(`Unexpected transaction received for fund account: ${c.type}`)}var Or=class{constructor(e){this.config=e}async fundAccount(e){let t=await xa({cedraConfig:this.config,...e});return(_optionalChain([e, 'access', _205 => _205.options, 'optionalAccess', _206 => _206.waitForIndexer])===void 0||_optionalChain([e, 'access', _207 => _207.options, 'optionalAccess', _208 => _208.waitForIndexer]))&&await Kn({cedraConfig:this.config,minimumLedgerVersion:BigInt(t.version),processorType:"fungible_asset_processor"}),t}};async function Bn(r){let{cedraConfig:e,options:t}=r,n={query:es,variables:{where_condition:_optionalChain([t, 'optionalAccess', _209 => _209.where]),limit:_optionalChain([t, 'optionalAccess', _210 => _210.limit]),offset:_optionalChain([t, 'optionalAccess', _211 => _211.offset])}};return(await w({cedraConfig:e,query:n,originMethod:"getFungibleAssetMetadata"})).fungible_asset_metadata}async function Ia(r){let{cedraConfig:e,options:t}=r,n={query:Zo,variables:{where_condition:_optionalChain([t, 'optionalAccess', _212 => _212.where]),limit:_optionalChain([t, 'optionalAccess', _213 => _213.limit]),offset:_optionalChain([t, 'optionalAccess', _214 => _214.offset])}};return(await w({cedraConfig:e,query:n,originMethod:"getFungibleAssetActivities"})).fungible_asset_activities}async function va(r){let{cedraConfig:e,options:t}=r,n={query:Jo,variables:{where_condition:_optionalChain([t, 'optionalAccess', _215 => _215.where]),limit:_optionalChain([t, 'optionalAccess', _216 => _216.limit]),offset:_optionalChain([t, 'optionalAccess', _217 => _217.offset])}};return(await w({cedraConfig:e,query:n,originMethod:"getCurrentFungibleAssetBalances"})).current_fungible_asset_balances_new}var Ka={typeParameters:[{constraints:[]}],parameters:[ye("0x1::object::Object"),new M,new X]};async function Ra(r){let{cedraConfig:e,sender:t,fungibleAssetMetadataAddress:n,recipient:i,amount:o,options:s}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x1::primary_fungible_store::transfer",typeArguments:["0x1::fungible_asset::Metadata"],functionArguments:[n,i,o],abi:Ka},options:s})}async function Ua(r){let{cedraConfig:e,sender:t,fromStore:n,toStore:i,amount:o,options:s}=r;return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x1::dispatchable_fungible_asset::transfer",typeArguments:["0x1::fungible_asset::FungibleStore"],functionArguments:[n,i,o],abi:Ka},options:s})}var Gr=class{constructor(e){this.config=e}async getFungibleAssetMetadata(e){return await C({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _218 => _218.minimumLedgerVersion]),processorType:"fungible_asset_processor"}),Bn({cedraConfig:this.config,...e})}async getFungibleAssetMetadataByAssetType(e){return await C({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _219 => _219.minimumLedgerVersion]),processorType:"fungible_asset_processor"}),(await Bn({cedraConfig:this.config,options:{where:{asset_type:{_eq:e.assetType}}}}))[0]}async getFungibleAssetMetadataByCreatorAddress(e){return await C({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _220 => _220.minimumLedgerVersion]),processorType:"fungible_asset_processor"}),await Bn({cedraConfig:this.config,options:{where:{creator_address:{_eq:_chunkS7NKHRYEjs.Y.from(e.creatorAddress).toStringLong()}}}})}async getFungibleAssetActivities(e){return await C({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _221 => _221.minimumLedgerVersion]),processorType:"fungible_asset_processor"}),Ia({cedraConfig:this.config,...e})}async getCurrentFungibleAssetBalances(e){return await C({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _222 => _222.minimumLedgerVersion]),processorType:"fungible_asset_processor"}),va({cedraConfig:this.config,...e})}async transferFungibleAsset(e){return Ra({cedraConfig:this.config,...e})}async transferFungibleAssetBetweenStores(e){return Ua({cedraConfig:this.config,...e})}};var Br=class{constructor(e){this.config=e}async getLedgerInfo(){return Cn({cedraConfig:this.config})}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getBlockByVersion(e){return ps({cedraConfig:this.config,...e})}async getBlockByHeight(e){return gs({cedraConfig:this.config,...e})}async view(e){return ae({cedraConfig:this.config,...e})}async viewJson(e){return Ws({cedraConfig:this.config,...e})}async get_whitelist(e){return Qs({cedraConfig:this.config,...e})}async getChainTopUserTransactions(e){return os({cedraConfig:this.config,...e})}async queryIndexer(e){return w({cedraConfig:this.config,...e})}async getIndexerLastSuccessVersion(){return En({cedraConfig:this.config})}async getProcessorStatus(e){return _n({cedraConfig:this.config,processorType:e})}};var ka=["A name must be between 3 and 63 characters long,","and can only contain lowercase a-z, 0-9, and hyphens.","A name may not start or end with a hyphen."].join(" ");function Da(r){return!(!r||r.length<3||r.length>63||!/^[a-z\d][a-z\d-]{1,61}[a-z\d]$/.test(r))}function Ct(r){let[e,t,...n]=r.replace(/\.cedra$/,"").split(".");if(n.length>0)throw new Error(`${r} is invalid. A name can only have two parts, a domain and a subdomain separated by a "."`);if(!Da(e))throw new Error(`${e} is not valid. ${ka}`);if(t&&!Da(t))throw new Error(`${t} is not valid. ${ka}`);return{domainName:t||e,subdomainName:t?e:void 0}}function za(r){if(!r)return!1;let e=new Date(r.domain_expiration_timestamp).getTime()<Date.now(),t=new Date(r.expiration_timestamp).getTime()<Date.now();return r.subdomain&&e?!1:r.subdomain&&r.subdomain_expiration_policy===1?!0:!t}var ud="0x585fc9f0f0c54183b039ffc770ca282ebd87307916c215a3e692f2f8e4305e82",dd={testnet:"0x5f8fd2347449685cf41d4db97926ec3a096eaf381332be4f1318ad4d16a8497c",mainnet:"0x867ed1f6bf916171b1de3ee92849b8978b7d1b9e0a8cc982a3d19d535dfd9c0c",local:ud,custom:null,devnet:null};function st(r){let e=dd[r.network];if(!e)throw new Error(`The ANS contract is not deployed to ${r.network}`);return e}var Mn=r=>{if(r&&typeof r=="object"&&"vec"in r&&Array.isArray(r.vec))return r.vec[0]};async function Na(r){let{cedraConfig:e,name:t}=r,n=st(e),{domainName:i,subdomainName:o}=Ct(t),s=await ae({cedraConfig:e,payload:{function:`${n}::router::get_owner_addr`,functionArguments:[i,o]}}),a=Mn(s[0]);return a?_chunkS7NKHRYEjs.Y.from(a):void 0}async function Fa(r){let{cedraConfig:e,expiration:t,name:n,sender:i,targetAddress:o,toAddress:s,options:a,transferable:c}=r,d=st(e),{domainName:f,subdomainName:h}=Ct(n),l=t.policy==="subdomain:independent"||t.policy==="subdomain:follow-domain";if(h&&!l)throw new Error("Subdomains must have an expiration policy of either 'subdomain:independent' or 'subdomain:follow-domain'");if(l&&!h)throw new Error(`Policy is set to ${t.policy} but no subdomain was provided`);if(t.policy==="domain"){let O=_nullishCoalesce(t.years, () => (1));if(O!==1)throw new Error("For now, names can only be registered for 1 year at a time");let at=O*31536e3;return await T({cedraConfig:e,sender:i.accountAddress.toString(),data:{function:`${d}::router::register_domain`,functionArguments:[f,at,o,s]},options:a})}if(!h)throw new Error(`${t.policy} requires a subdomain to be provided.`);let p=await Mi({cedraConfig:e,name:f});if(!p)throw new Error("The domain does not exist");let b=t.policy==="subdomain:independent"?t.expirationDate:p;if(b>p)throw new Error("The subdomain expiration time cannot be greater than the domain expiration time");return await T({cedraConfig:e,sender:i.accountAddress.toString(),data:{function:`${d}::router::register_subdomain`,functionArguments:[f,h,Math.round(b/1e3),t.policy==="subdomain:follow-domain"?1:0,!!c,o,s]},options:a})}async function Mi(r){let{cedraConfig:e,name:t}=r,n=st(e),{domainName:i,subdomainName:o}=Ct(t);try{let s=await ae({cedraConfig:e,payload:{function:`${n}::router::get_expiration`,functionArguments:[i,o]}});return Number(s[0])*1e3}catch (e7){return}}async function Oa(r){let{cedraConfig:e,address:t}=r,n=st(e),i=await ae({cedraConfig:e,payload:{function:`${n}::router::get_primary_name`,functionArguments:[_chunkS7NKHRYEjs.Y.from(t).toString()]}}),o=Mn(i[1]),s=Mn(i[0]);if(o)return[s,o].filter(Boolean).join(".")}async function Ga(r){let{cedraConfig:e,sender:t,name:n,options:i}=r,o=st(e);if(!n)return await T({cedraConfig:e,sender:t.accountAddress.toString(),data:{function:`${o}::router::clear_primary_name`,functionArguments:[]},options:i});let{domainName:s,subdomainName:a}=Ct(n);return await T({cedraConfig:e,sender:t.accountAddress.toString(),data:{function:`${o}::router::set_primary_name`,functionArguments:[s,a]},options:i})}async function Ba(r){let{cedraConfig:e,name:t}=r,n=st(e),{domainName:i,subdomainName:o}=Ct(t),s=await ae({cedraConfig:e,payload:{function:`${n}::router::get_target_addr`,functionArguments:[i,o]}}),a=Mn(s[0]);return a?_chunkS7NKHRYEjs.Y.from(a):void 0}async function Ma(r){let{cedraConfig:e,sender:t,name:n,address:i,options:o}=r,s=st(e),{domainName:a,subdomainName:c}=Ct(n);return await T({cedraConfig:e,sender:t.accountAddress.toString(),data:{function:`${s}::router::set_target_addr`,functionArguments:[a,c,i]},options:o})}async function Va(r){let{cedraConfig:e,name:t}=r,{domainName:n,subdomainName:i=""}=Ct(t),a=(await w({cedraConfig:e,query:{query:nr,variables:{where_condition:{domain:{_eq:n},subdomain:{_eq:i}},limit:1}},originMethod:"getName"})).current_cedra_names[0];return a&&(a=Mr(a)),za(a)?a:void 0}async function Ha(r){let{cedraConfig:e,options:t,accountAddress:n}=r,i=await Vi({cedraConfig:e});return(await w({cedraConfig:e,originMethod:"getAccountNames",query:{query:nr,variables:{limit:_optionalChain([t, 'optionalAccess', _223 => _223.limit]),offset:_optionalChain([t, 'optionalAccess', _224 => _224.offset]),order_by:_optionalChain([t, 'optionalAccess', _225 => _225.orderBy]),where_condition:{..._nullishCoalesce(_optionalChain([r, 'access', _226 => _226.options, 'optionalAccess', _227 => _227.where]), () => ({})),owner_address:{_eq:n.toString()},expiration_timestamp:{_gte:i}}}}})).current_cedra_names.map(Mr)}async function qa(r){let{cedraConfig:e,options:t,accountAddress:n}=r,i=await Vi({cedraConfig:e});return(await w({cedraConfig:e,originMethod:"getAccountDomains",query:{query:nr,variables:{limit:_optionalChain([t, 'optionalAccess', _228 => _228.limit]),offset:_optionalChain([t, 'optionalAccess', _229 => _229.offset]),order_by:_optionalChain([t, 'optionalAccess', _230 => _230.orderBy]),where_condition:{..._nullishCoalesce(_optionalChain([r, 'access', _231 => _231.options, 'optionalAccess', _232 => _232.where]), () => ({})),owner_address:{_eq:n.toString()},expiration_timestamp:{_gte:i},subdomain:{_eq:""}}}}})).current_cedra_names.map(Mr)}async function La(r){let{cedraConfig:e,options:t,accountAddress:n}=r,i=await Vi({cedraConfig:e});return(await w({cedraConfig:e,originMethod:"getAccountSubdomains",query:{query:nr,variables:{limit:_optionalChain([t, 'optionalAccess', _233 => _233.limit]),offset:_optionalChain([t, 'optionalAccess', _234 => _234.offset]),order_by:_optionalChain([t, 'optionalAccess', _235 => _235.orderBy]),where_condition:{..._nullishCoalesce(_optionalChain([r, 'access', _236 => _236.options, 'optionalAccess', _237 => _237.where]), () => ({})),owner_address:{_eq:n.toString()},expiration_timestamp:{_gte:i},subdomain:{_neq:""}}}}})).current_cedra_names.map(Mr)}async function $a(r){let{cedraConfig:e,options:t,domain:n}=r;return(await w({cedraConfig:e,originMethod:"getDomainSubdomains",query:{query:nr,variables:{limit:_optionalChain([t, 'optionalAccess', _238 => _238.limit]),offset:_optionalChain([t, 'optionalAccess', _239 => _239.offset]),order_by:_optionalChain([t, 'optionalAccess', _240 => _240.orderBy]),where_condition:{..._nullishCoalesce(_optionalChain([r, 'access', _241 => _241.options, 'optionalAccess', _242 => _242.where]), () => ({})),domain:{_eq:n},subdomain:{_neq:""}}}}})).current_cedra_names.map(Mr).filter(za)}async function Vi(r){let{cedraConfig:e}=r,t=st(e),[n]=await ae({cedraConfig:e,payload:{function:`${t}::config::reregistration_grace_sec`,functionArguments:[]}}),i=n/60/60/24,o=()=>new Date;return new Date(o().setDate(o().getDate()-i)).toISOString()}async function Wa(r){let{cedraConfig:e,sender:t,name:n,years:i=1,options:o}=r,s=st(e),a=i*31536e3,{domainName:c,subdomainName:d}=Ct(n);if(d)throw new Error("Subdomains cannot be renewed");if(i!==1)throw new Error("Currently, only 1 year renewals are supported");return await T({cedraConfig:e,sender:t.accountAddress.toString(),data:{function:`${s}::router::renew_domain`,functionArguments:[c,a]},options:o})}function Mr(r){return{...r,expiration_timestamp:new Date(r.expiration_timestamp).getTime()}}var Vr=class{constructor(e){this.config=e}async getOwnerAddress(e){return Na({cedraConfig:this.config,...e})}async getExpiration(e){return Mi({cedraConfig:this.config,...e})}async getTargetAddress(e){return Ba({cedraConfig:this.config,...e})}async setTargetAddress(e){return Ma({cedraConfig:this.config,...e})}async getPrimaryName(e){return Oa({cedraConfig:this.config,...e})}async setPrimaryName(e){return Ga({cedraConfig:this.config,...e})}async registerName(e){return Fa({cedraConfig:this.config,...e})}async renewDomain(e){return Wa({cedraConfig:this.config,...e})}async getName(e){return Va({cedraConfig:this.config,...e})}async getAccountNames(e){return Ha({cedraConfig:this.config,...e})}async getAccountDomains(e){return qa({cedraConfig:this.config,...e})}async getAccountSubdomains(e){return La({cedraConfig:this.config,...e})}async getDomainSubdomains(e){return $a({cedraConfig:this.config,...e})}};async function Qa(r){let{cedraConfig:e,poolAddress:t}=r,n=_chunkS7NKHRYEjs.Y.from(t).toStringLong(),o=await w({cedraConfig:e,query:{query:Ti,variables:{where_condition:{pool_address:{_eq:n}}}}});return o.num_active_delegator_per_pool[0]?o.num_active_delegator_per_pool[0].num_active_delegator:0}async function ja(r){let{cedraConfig:e,options:t}=r,n={query:Ti,variables:{order_by:_optionalChain([t, 'optionalAccess', _243 => _243.orderBy])}};return(await w({cedraConfig:e,query:n})).num_active_delegator_per_pool}async function Ja(r){let{cedraConfig:e,delegatorAddress:t,poolAddress:n}=r,i={query:Xo,variables:{delegatorAddress:_chunkS7NKHRYEjs.Y.from(t).toStringLong(),poolAddress:_chunkS7NKHRYEjs.Y.from(n).toStringLong()}};return(await w({cedraConfig:e,query:i})).delegated_staking_activities}var Hr=class{constructor(e){this.config=e}async getNumberOfDelegators(e){return await C({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _244 => _244.minimumLedgerVersion]),processorType:"stake_processor"}),Qa({cedraConfig:this.config,...e})}async getNumberOfDelegatorsForAllPools(e){return await C({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _245 => _245.minimumLedgerVersion]),processorType:"stake_processor"}),ja({cedraConfig:this.config,...e})}async getDelegatedStakingActivities(e){return await C({config:this.config,minimumLedgerVersion:_optionalChain([e, 'optionalAccess', _246 => _246.minimumLedgerVersion]),processorType:"stake_processor"}),Ja({cedraConfig:this.config,...e})}};var Vn=class{constructor(e){this.config=e}async simple(e){return T({cedraConfig:this.config,...e})}async multiAgent(e){return T({cedraConfig:this.config,...e})}};function Hi(r,e,t){let n=t.value;return t.value=async function(...i){let[o]=i;if(o.transaction.feePayerAddress&&!o.feePayerAuthenticator)throw new Error("You are submitting a Fee Payer transaction but missing the feePayerAuthenticator");return n.apply(this,i)},t}function qi(r,e,t){let n=t.value;return t.value=async function(...i){return n.apply(this,i)},t}var ar=class{constructor(e){this.config=e}async simple(e){return Fi({cedraConfig:this.config,...e})}async multiAgent(e){return Fi({cedraConfig:this.config,...e})}};_chunkS7NKHRYEjs.a.call(void 0, [qi],ar.prototype,"simple",1),_chunkS7NKHRYEjs.a.call(void 0, [qi],ar.prototype,"multiAgent",1);var cr=class{constructor(e){this.config=e}async simple(e){return Ur({cedraConfig:this.config,...e})}async multiAgent(e){return Ur({cedraConfig:this.config,...e})}};_chunkS7NKHRYEjs.a.call(void 0, [Hi],cr.prototype,"simple",1),_chunkS7NKHRYEjs.a.call(void 0, [Hi],cr.prototype,"multiAgent",1);var Hn=class{constructor(e,t,n,i,o){this.lastUncommintedNumber=null;this.currentNumber=null;this.lock=!1;this.cedraConfig=e,this.account=t,this.maxWaitTime=n,this.maximumInFlight=i,this.sleepTime=o}async nextSequenceNumber(){for(;this.lock;)await _chunkS7NKHRYEjs.aa.call(void 0, this.sleepTime);this.lock=!0;let e=BigInt(0);try{if((this.lastUncommintedNumber===null||this.currentNumber===null)&&await this.initialize(),this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight){await this.update();let t=_chunkS7NKHRYEjs.ca.call(void 0, );for(;this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight;)await _chunkS7NKHRYEjs.aa.call(void 0, this.sleepTime),_chunkS7NKHRYEjs.ca.call(void 0, )-t>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, re-syncing ${this.account.accountAddress.toString()}`),await this.initialize()):await this.update()}e=this.currentNumber,this.currentNumber+=BigInt(1)}catch(t){console.error("error in getting next sequence number for this account",t)}finally{this.lock=!1}return e}async initialize(){let{sequence_number:e}=await Vt({cedraConfig:this.cedraConfig,accountAddress:this.account.accountAddress});this.currentNumber=BigInt(e),this.lastUncommintedNumber=BigInt(e)}async update(){let{sequence_number:e}=await Vt({cedraConfig:this.cedraConfig,accountAddress:this.account.accountAddress});return this.lastUncommintedNumber=BigInt(e),this.lastUncommintedNumber}async synchronize(){if(this.lastUncommintedNumber!==this.currentNumber){for(;this.lock;)await _chunkS7NKHRYEjs.aa.call(void 0, this.sleepTime);this.lock=!0;try{await this.update();let e=_chunkS7NKHRYEjs.ca.call(void 0, );for(;this.lastUncommintedNumber!==this.currentNumber;)_chunkS7NKHRYEjs.ca.call(void 0, )-e>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, re-syncing ${this.account.accountAddress.toString()}`),await this.initialize()):(await _chunkS7NKHRYEjs.aa.call(void 0, this.sleepTime),await this.update())}catch(e){console.error("error in synchronizing this account sequence number with the one on chain",e)}finally{this.lock=!1}}}};var ur=class{constructor(){this.queue=[];this.pendingDequeue=[];this.cancelled=!1}enqueue(e){if(this.cancelled=!1,this.pendingDequeue.length>0){_optionalChain([this, 'access', _247 => _247.pendingDequeue, 'access', _248 => _248.shift, 'call', _249 => _249(), 'optionalAccess', _250 => _250.resolve, 'call', _251 => _251(e)]);return}this.queue.push(e)}async dequeue(){return this.queue.length>0?Promise.resolve(this.queue.shift()):new Promise((e,t)=>{this.pendingDequeue.push({resolve:e,reject:t})})}isEmpty(){return this.queue.length===0}cancel(){this.cancelled=!0,this.pendingDequeue.forEach(async({reject:e})=>{e(new dr("Task cancelled"))}),this.pendingDequeue=[],this.queue.length=0}isCancelled(){return this.cancelled}pendingDequeueLength(){return this.pendingDequeue.length}},dr=class extends Error{};var Xa="fulfilled",Ya= exports.TransactionWorkerEventsEnum =(o=>(o.TransactionSent="transactionSent",o.TransactionSendFailed="transactionSendFailed",o.TransactionExecuted="transactionExecuted",o.TransactionExecutionFailed="transactionExecutionFailed",o.ExecutionFinish="executionFinish",o))(Ya||{}),qn= exports.TransactionWorker =class extends _eventemitter32.default{constructor(t,n,i=30,o=100,s=10){super();this.taskQueue=new ur;this.transactionsQueue=new ur;this.outstandingTransactions=new ur;this.sentTransactions=[];this.executedTransactions=[];this.cedraConfig=t,this.account=n,this.started=!1,this.accountSequnceNumber=new Hn(t,n,i,o,s)}async submitNextTransaction(){try{for(;;){let t=await this.accountSequnceNumber.nextSequenceNumber();if(t===null)return;let n=await this.generateNextTransaction(this.account,t);if(!n)return;let i=wt({cedraConfig:this.cedraConfig,transaction:n,signer:this.account});await this.outstandingTransactions.enqueue([i,t])}}catch(t){if(t instanceof dr)return;throw new Error(`Submit transaction failed for ${this.account.accountAddress.toString()} with error ${t}`)}}async processTransactions(){try{for(;;){let t=[],n=[],[i,o]=await this.outstandingTransactions.dequeue();for(t.push(i),n.push(o);!this.outstandingTransactions.isEmpty();)[i,o]=await this.outstandingTransactions.dequeue(),t.push(i),n.push(o);let s=await Promise.allSettled(t);for(let a=0;a<s.length&&a<n.length;a+=1){let c=s[a];o=n[a],c.status===Xa?(this.sentTransactions.push([c.value.hash,o,null]),this.emit("transactionSent",{message:`transaction hash ${c.value.hash} has been committed to chain`,transactionHash:c.value.hash}),await this.checkTransaction(c,o)):(this.sentTransactions.push([c.status,o,c.reason]),this.emit("transactionSendFailed",{message:`failed to commit transaction ${this.sentTransactions.length} with error ${c.reason}`,error:c.reason}))}this.emit("executionFinish",{message:`execute ${s.length} transactions finished`})}}catch(t){if(t instanceof dr)return;throw new Error(`Process execution failed for ${this.account.accountAddress.toString()} with error ${t}`)}}async checkTransaction(t,n){try{let i=[];i.push(bt({cedraConfig:this.cedraConfig,transactionHash:t.value.hash}));let o=await Promise.allSettled(i);for(let s=0;s<o.length;s+=1){let a=o[s];a.status===Xa?(this.executedTransactions.push([a.value.hash,n,null]),this.emit("transactionExecuted",{message:`transaction hash ${a.value.hash} has been executed on chain`,transactionHash:t.value.hash})):(this.executedTransactions.push([a.status,n,a.reason]),this.emit("transactionExecutionFailed",{message:`failed to execute transaction ${this.executedTransactions.length} with error ${a.reason}`,error:a.reason}))}}catch(i){throw new Error(`Check transaction failed for ${this.account.accountAddress.toString()} with error ${i}`)}}async push(t,n){this.transactionsQueue.enqueue([t,n])}async generateNextTransaction(t,n){if(this.transactionsQueue.isEmpty())return;let[i,o]=await this.transactionsQueue.dequeue();return T({cedraConfig:this.cedraConfig,sender:t.accountAddress,data:i,options:{...o,accountSequenceNumber:n}})}async run(){try{for(;!this.taskQueue.isCancelled();)await(await this.taskQueue.dequeue())()}catch(t){throw new Error(`Unable to start transaction batching: ${t}`)}}start(){if(this.started)throw new Error("worker has already started");this.started=!0,this.taskQueue.enqueue(()=>this.submitNextTransaction()),this.taskQueue.enqueue(()=>this.processTransactions()),this.run()}stop(){if(this.taskQueue.isCancelled())throw new Error("worker has already stopped");this.started=!1,this.taskQueue.cancel()}};var Ln=class extends _eventemitter32.default{constructor(e){super(),this.config=e}start(e){let{sender:t}=e;this.account=t,this.transactionWorker=new qn(this.config,t),this.transactionWorker.start(),this.registerToEvents()}push(e){let{data:t,options:n}=e;for(let i of t)this.transactionWorker.push(i,n)}registerToEvents(){this.transactionWorker.on("transactionSent",async e=>{this.emit("transactionSent",e)}),this.transactionWorker.on("transactionSendFailed",async e=>{this.emit("transactionSendFailed",e)}),this.transactionWorker.on("transactionExecuted",async e=>{this.emit("transactionExecuted",e)}),this.transactionWorker.on("transactionExecutionFailed",async e=>{this.emit("transactionExecutionFailed",e)}),this.transactionWorker.on("executionFinish",async e=>{this.emit("executionFinish",e)})}forSingleAccount(e){try{let{sender:t,data:n,options:i}=e;this.start({sender:t}),this.push({data:n,options:i})}catch(t){throw new Error(`failed to submit transactions with error: ${t}`)}}};var qr=class{constructor(e){this.config=e,this.build=new Vn(this.config),this.simulate=new ar(this.config),this.submit=new cr(this.config),this.batch=new Ln(this.config)}async getTransactions(e){return Ci({cedraConfig:this.config,...e})}async getTransactionByVersion(e){return ds({cedraConfig:this.config,...e})}async getTransactionByHash(e){return Kr({cedraConfig:this.config,...e})}async isPendingTransaction(e){return ls({cedraConfig:this.config,...e})}async waitForTransaction(e){return bt({cedraConfig:this.config,...e})}async getGasPriceEstimation(){return vn({cedraConfig:this.config})}getSigningMessage(e){return Is(e)}async publishPackageTransaction(e){return Ks({cedraConfig:this.config,...e})}async rotateAuthKey(e){return $s({cedraConfig:this.config,...e})}sign(e){return Fn({...e})}signAsFeePayer(e){return On({...e})}async batchTransactionsForSingleAccount(e){try{let{sender:t,data:n,options:i}=e;this.batch.forSingleAccount({sender:t,data:n,options:i})}catch(t){throw new Error(`failed to submit transactions with error: ${t}`)}}async signAndSubmitTransaction(e){return wt({cedraConfig:this.config,...e})}async signAndSubmitAsFeePayer(e){return vs({cedraConfig:this.config,...e})}};var Lr=class{constructor(e){this.config=e}async getTableItem(e){return xn({cedraConfig:this.config,...e})}async getTableItemsData(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"default_processor"}),cs({cedraConfig:this.config,...e})}async getTableItemsMetadata(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"default_processor"}),us({cedraConfig:this.config,...e})}};async function $n(r){let{cedraConfig:e,jwt:t,ephemeralKeyPair:n,uidKey:i="sub",derivationPath:o}=r,s={jwt_b64:t,epk:n.getPublicKey().bcsToHex().toStringWithoutPrefix(),exp_date_secs:n.expiryDateSecs,epk_blinder:_chunkS7NKHRYEjs.j.fromHexInput(n.blinder).toStringWithoutPrefix(),uid_key:i,derivation_path:o},{data:a}=await vo({cedraConfig:e,path:"fetch",body:s,originMethod:"getPepper",overrides:{WITH_CREDENTIALS:!1}});return _chunkS7NKHRYEjs.j.fromHexInput(a.pepper).toUint8Array()}async function Li(r){let{cedraConfig:e,jwt:t,ephemeralKeyPair:n,pepper:i=await $n(r),uidKey:o="sub",maxExpHorizonSecs:s=(await Xt({cedraConfig:e})).maxExpHorizonSecs}=r;if(_chunkS7NKHRYEjs.j.fromHexInput(i).toUint8Array().length!==it.PEPPER_LENGTH)throw new Error(`Pepper needs to be ${it.PEPPER_LENGTH} bytes`);let a=_jwtdecode.jwtDecode.call(void 0, t);if(typeof a.iat!="number")throw new Error("iat was not found");if(s<n.expiryDateSecs-a.iat)throw Error(`The EphemeralKeyPair is too long lived.  It's lifespan must be less than ${s}`);let c={jwt_b64:t,epk:n.getPublicKey().bcsToHex().toStringWithoutPrefix(),epk_blinder:_chunkS7NKHRYEjs.j.fromHexInput(n.blinder).toStringWithoutPrefix(),exp_date_secs:n.expiryDateSecs,exp_horizon_secs:s,pepper:_chunkS7NKHRYEjs.j.fromHexInput(i).toStringWithoutPrefix(),uid_key:o},{data:d}=await Ko({cedraConfig:e,path:"prove",body:c,originMethod:"getProof",overrides:{WITH_CREDENTIALS:!1}}),f=d.proof,h=new yt({a:f.a,b:f.b,c:f.c});return new ue({proof:new Jt(h,0),trainingWheelsSignature:Fe.fromHex(d.training_wheels_signature),expHorizonSecs:s})}async function Za(r){let{cedraConfig:e,jwt:t,jwkAddress:n,uidKey:i,proofFetchCallback:o,pepper:s=await $n(r)}=r,{verificationKey:a,maxExpHorizonSecs:c}=await Xt({cedraConfig:e}),d=Li({...r,pepper:s,maxExpHorizonSecs:c}),f=o?d:await d;if(n!==void 0){let p=W.fromJwtAndPepper({jwt:t,pepper:s,jwkAddress:n,uidKey:i}),b=await or({cedraConfig:e,authenticationKey:p.authKey().derivedAddress()});return Bt.create({...r,address:b,proof:f,pepper:s,proofFetchCallback:o,jwkAddress:n,verificationKey:a})}let h=K.fromJwtAndPepper({jwt:t,pepper:s,uidKey:i}),l=await or({cedraConfig:e,authenticationKey:h.authKey().derivedAddress()});return it.create({...r,address:l,proof:f,pepper:s,proofFetchCallback:o,verificationKey:a})}async function ec(r){let{cedraConfig:e,sender:t,iss:n,options:i}=r,{jwksUrl:o}=r;o===void 0&&(Eo.test(n)?o="https://www.googleapis.com/service_accounts/v1/jwk/securetoken@system.gserviceaccount.com":o=n.endsWith("/")?`${n}.well-known/jwks.json`:`${n}/.well-known/jwks.json`);let s;try{if(s=await fetch(o),!s.ok)throw new Error(`${s.status} ${s.statusText}`)}catch(c){let d;throw c instanceof Error?d=`${c.message}`:d=`error unknown - ${c}`,E.fromErrorType({type:14,details:`Failed to fetch JWKS at ${o}: ${d}`})}let a=await s.json();return T({cedraConfig:e,sender:t.accountAddress,data:{function:"0x1::jwks::update_federated_jwk_set",functionArguments:[n,S.MoveString(a.keys.map(c=>c.kid)),S.MoveString(a.keys.map(c=>c.alg)),S.MoveString(a.keys.map(c=>c.e)),S.MoveString(a.keys.map(c=>c.n))]},options:i})}var $r=class{constructor(e){this.config=e}async getPepper(e){return $n({cedraConfig:this.config,...e})}async getProof(e){return Li({cedraConfig:this.config,...e})}async deriveKeylessAccount(e){return Za({cedraConfig:this.config,...e})}async updateFederatedKeylessJwkSetTransaction(e){return ec({cedraConfig:this.config,...e})}};async function md(r){let{cedraConfig:e,options:t}=r,n={query:Sn,variables:{where_condition:_optionalChain([t, 'optionalAccess', _252 => _252.where]),offset:_optionalChain([t, 'optionalAccess', _253 => _253.offset]),limit:_optionalChain([t, 'optionalAccess', _254 => _254.limit]),order_by:_optionalChain([t, 'optionalAccess', _255 => _255.orderBy])}};return(await w({cedraConfig:e,query:n,originMethod:"getObjectData"})).current_objects}async function tc(r){let{cedraConfig:e,objectAddress:t,options:n}=r,o={object_address:{_eq:_chunkS7NKHRYEjs.Y.from(t).toStringLong()}};return(await md({cedraConfig:e,options:{...n,where:o}}))[0]}var Wr=class{constructor(e){this.config=e}async getObjectDataByObjectAddress(e){return await C({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"objects_processor"}),tc({cedraConfig:this.config,...e})}};var ee=class{constructor(e){this.config=new Gn(e),this.account=new kr(this.config),this.abstraction=new Ht(this.config),this.ans=new Vr(this.config),this.coin=new Dr(this.config),this.digitalAsset=new zr(this.config),this.event=new Fr(this.config),this.faucet=new Or(this.config),this.fungibleAsset=new Gr(this.config),this.general=new Br(this.config),this.staking=new Hr(this.config),this.transaction=new qr(this.config),this.table=new Lr(this.config),this.keyless=new $r(this.config),this.object=new Wr(this.config)}};function ce(r,e,t){Object.getOwnPropertyNames(e.prototype).forEach(n=>{let i=Object.getOwnPropertyDescriptor(e.prototype,n);i&&(i.value=function(...o){return this[t][n](...o)},Object.defineProperty(r.prototype,n,i))})}ce(ee,kr,"account");ce(ee,Ht,"abstraction");ce(ee,Vr,"ans");ce(ee,Dr,"coin");ce(ee,zr,"digitalAsset");ce(ee,Fr,"event");ce(ee,Or,"faucet");ce(ee,Gr,"fungibleAsset");ce(ee,Br,"general");ce(ee,Hr,"staking");ce(ee,qr,"transaction");ce(ee,Lr,"table");ce(ee,$r,"keyless");ce(ee,Wr,"object");exports.AbstractKeylessAccount = me; exports.AbstractMultiKey = br; exports.AbstractPublicKey = Yr; exports.AbstractSignature = gr; exports.AbstractedAccount = bn; exports.Account = nt; exports.AccountAddress = _chunkS7NKHRYEjs.Y; exports.AccountAuthenticator = J; exports.AccountAuthenticatorAbstraction = Kt; exports.AccountAuthenticatorEd25519 = De; exports.AccountAuthenticatorMultiEd25519 = Je; exports.AccountAuthenticatorMultiKey = Ve; exports.AccountAuthenticatorNoAccountAuthenticator = Zt; exports.AccountAuthenticatorSingleKey = oe; exports.AccountAuthenticatorVariant = _chunkS7NKHRYEjs.w; exports.AccountPublicKey = ne; exports.AccountSequenceNumber = Hn; exports.AccountUtils = Oo; exports.AddressInvalidReason = _chunkS7NKHRYEjs.X; exports.AnyPublicKey = N; exports.AnyPublicKeyVariant = _chunkS7NKHRYEjs.y; exports.AnySignature = B; exports.AnySignatureVariant = _chunkS7NKHRYEjs.z; exports.AuthenticationKey = H; exports.Bool = z; exports.CEDRA_BIP44_REGEX = mc; exports.CEDRA_COIN = It; exports.CEDRA_FA = So; exports.CEDRA_HARDENED_REGEX = gc; exports.CKDPriv = go; exports.Cedra = ee; exports.CedraApiError = Te; exports.CedraApiType = Qt; exports.CedraConfig = Gn; exports.ChainId = Rt; exports.CommissionRawTransaction = Do; exports.DEFAULT_MAX_GAS_AMOUNT = bo; exports.DEFAULT_TXN_EXP_SEC_FROM_NOW = wo; exports.DEFAULT_TXN_TIMEOUT_SEC = rn; exports.DerivableAbstractedAccount = Bo; exports.DeriveScheme = _chunkS7NKHRYEjs.W; exports.Deserializer = R; exports.EPK_HORIZON_SECS = jc; exports.Ed25519Account = se; exports.Ed25519PrivateKey = $; exports.Ed25519PublicKey = x; exports.Ed25519Signature = I; exports.EntryFunction = kt; exports.EntryFunctionBytes = Xr; exports.EphemeralCertificate = jt; exports.EphemeralCertificateVariant = _chunkS7NKHRYEjs.C; exports.EphemeralKeyPair = Gt; exports.EphemeralPublicKey = gt; exports.EphemeralPublicKeyVariant = _chunkS7NKHRYEjs.A; exports.EphemeralSignature = Fe; exports.EphemeralSignatureVariant = _chunkS7NKHRYEjs.B; exports.FIREBASE_AUTH_ISS_PATTERN = Eo; exports.FederatedKeylessAccount = Bt; exports.FederatedKeylessPublicKey = W; exports.FeePayerRawTransaction = zt; exports.FixedBytes = Pe; exports.Groth16ProofAndStatement = li; exports.Groth16VerificationKey = gi; exports.Groth16Zkp = yt; exports.HARDENED_OFFSET = uo; exports.Hex = _chunkS7NKHRYEjs.j; exports.HexInvalidReason = _chunkS7NKHRYEjs.i; exports.Identifier = U; exports.KeyType = yc; exports.KeylessAccount = it; exports.KeylessConfiguration = pi; exports.KeylessError = E; exports.KeylessErrorCategory = Bc; exports.KeylessErrorResolutionTip = Mc; exports.KeylessErrorType = nn; exports.KeylessPublicKey = K; exports.KeylessSignature = ie; exports.MAX_AUD_VAL_BYTES = ui; exports.MAX_COMMITED_EPK_BYTES = tu; exports.MAX_EXTRA_FIELD_BYTES = Zc; exports.MAX_ISS_VAL_BYTES = Yc; exports.MAX_JWT_HEADER_B64_BYTES = eu; exports.MAX_UID_KEY_BYTES = Jc; exports.MAX_UID_VAL_BYTES = Xc; exports.MimeType = _chunkS7NKHRYEjs.q; exports.ModuleId = wr; exports.MoveAbility = _chunkS7NKHRYEjs.S; exports.MoveFunctionVisibility = _chunkS7NKHRYEjs.R; exports.MoveJWK = mi; exports.MoveOption = Z; exports.MoveString = P; exports.MoveVector = S; exports.MultiAgentRawTransaction = Dt; exports.MultiAgentTransaction = yn; exports.MultiEd25519Account = Tn; exports.MultiEd25519PublicKey = At; exports.MultiEd25519Signature = ke; exports.MultiKey = be; exports.MultiKeyAccount = Ir; exports.MultiKeySignature = we; exports.MultiSig = Pr; exports.MultiSigTransactionPayload = xr; exports.Network = ni; exports.NetworkToChainId = ii; exports.NetworkToFaucetAPI = To; exports.NetworkToIndexerAPI = Ao; exports.NetworkToNetworkName = xp; exports.NetworkToNodeAPI = ho; exports.NetworkToPepperAPI = ti; exports.NetworkToProverAPI = ri; exports.ParsingError = _chunkS7NKHRYEjs.h; exports.PrivateKey = lt; exports.PrivateKeyVariants = _chunkS7NKHRYEjs.x; exports.ProcessorType = Le; exports.PublicKey = _t; exports.RAW_TRANSACTION_SALT = Co; exports.RAW_TRANSACTION_WITH_DATA_SALT = oi; exports.RawTransaction = Ce; exports.RawTransactionWithData = pn; exports.RoleType = _chunkS7NKHRYEjs.T; exports.RotationProofChallenge = gn; exports.Script = _r; exports.ScriptTransactionArgumentVariants = _chunkS7NKHRYEjs.s; exports.Secp256k1PrivateKey = Qe; exports.Secp256k1PublicKey = Ue; exports.Secp256k1Signature = je; exports.Serializable = _chunkS7NKHRYEjs.l; exports.Serialized = pr; exports.Serializer = _chunkS7NKHRYEjs.m; exports.Signature = q; exports.SignedTransaction = rt; exports.SigningScheme = _chunkS7NKHRYEjs.U; exports.SigningSchemeInput = _chunkS7NKHRYEjs.V; exports.SimpleTransaction = mn; exports.SingleKeyAccount = Ee; exports.StructTag = He; exports.TransactionAndProof = An; exports.TransactionAuthenticator = tt; exports.TransactionAuthenticatorEd25519 = Nt; exports.TransactionAuthenticatorFeePayer = Ot; exports.TransactionAuthenticatorMultiAgent = Ft; exports.TransactionAuthenticatorMultiEd25519 = er; exports.TransactionAuthenticatorSingleSender = Tt; exports.TransactionAuthenticatorVariant = _chunkS7NKHRYEjs.v; exports.TransactionPayload = ht; exports.TransactionPayloadEntryFunction = Cr; exports.TransactionPayloadMultiSig = Er; exports.TransactionPayloadScript = Sr; exports.TransactionPayloadVariants = _chunkS7NKHRYEjs.t; exports.TransactionResponseType = _chunkS7NKHRYEjs.E; exports.TransactionVariants = _chunkS7NKHRYEjs.u; exports.TransactionWorker = qn; exports.TransactionWorkerEventsEnum = Ya; exports.TypeTag = k; exports.TypeTagAddress = M; exports.TypeTagBool = L; exports.TypeTagGeneric = V; exports.TypeTagParserError = Q; exports.TypeTagParserErrorType = _u; exports.TypeTagReference = ln; exports.TypeTagSigner = Ut; exports.TypeTagStruct = A; exports.TypeTagU128 = Ze; exports.TypeTagU16 = Xe; exports.TypeTagU256 = et; exports.TypeTagU32 = Ye; exports.TypeTagU64 = X; exports.TypeTagU8 = pe; exports.TypeTagVariants = _chunkS7NKHRYEjs.r; exports.TypeTagVector = v; exports.U128 = ve; exports.U16 = xe; exports.U256 = Ae; exports.U32 = Ie; exports.U64 = j; exports.U8 = Y; exports.ZeroKnowledgeSig = ue; exports.ZkProof = Jt; exports.ZkpVariant = _chunkS7NKHRYEjs.D; exports.base64UrlDecode = _chunkS7NKHRYEjs.ea; exports.base64UrlToBytes = _chunkS7NKHRYEjs.fa; exports.bigIntToBytesLE = ei; exports.buildTransaction = zi; exports.bytesToBigIntLE = Pt; exports.cedraCoinStructTag = tf; exports.cedraRequest = on; exports.checkOrConvertArgument = Mt; exports.convertAmountFromHumanReadableToOnChain = _chunkS7NKHRYEjs.ga; exports.convertAmountFromOnChainToHumanReadable = _chunkS7NKHRYEjs.ha; exports.convertArgument = Di; exports.convertNumber = Rn; exports.createObjectAddress = _chunkS7NKHRYEjs.Z; exports.createResourceAddress = _chunkS7NKHRYEjs._; exports.createTokenAddress = _chunkS7NKHRYEjs.$; exports.deriveKey = Xn; exports.deriveTransactionType = fn; exports.deserializeFromScriptArgument = du; exports.deserializePublicKey = iy; exports.deserializeSignature = oy; exports.ensureBoolean = _chunkS7NKHRYEjs.n; exports.fetchEntryFunctionAbi = Ss; exports.fetchFunctionAbi = ki; exports.fetchJWK = fi; exports.fetchModuleAbi = vu; exports.fetchMoveFunctionAbi = jb; exports.fetchViewFunctionAbi = Cs; exports.findFirstNonSignerArg = ws; exports.floorToWholeHour = _chunkS7NKHRYEjs.da; exports.generateRawTransaction = zu; exports.generateSignedTransaction = Ni; exports.generateSignedTransactionForSimulation = _s; exports.generateSigningMessage = ft; exports.generateSigningMessageForSerializable = yA; exports.generateSigningMessageForTransaction = ze; exports.generateTransactionPayload = Nn; exports.generateTransactionPayloadWithABI = Uu; exports.generateUserTransactionHash = Sw; exports.generateViewFunctionPayload = Es; exports.generateViewFunctionPayloadWithABI = ku; exports.get = sn; exports.getAuthenticatorForSimulation = ir; exports.getCedraFullNode = G; exports.getCedraPepperService = eg; exports.getErrorMessage = _chunkS7NKHRYEjs.ba; exports.getFunctionParts = _chunkS7NKHRYEjs.ka; exports.getIssAudAndUidVal = We; exports.getKeylessConfig = Xt; exports.getKeylessJWKs = ou; exports.getPageWithObfuscatedCursor = cn; exports.hashStrToField = Oe; exports.hashValues = Ps; exports.hexToAsciiString = _chunkS7NKHRYEjs.k; exports.isBcsAddress = kn; exports.isBcsBool = Ei; exports.isBcsFixedBytes = xu; exports.isBcsString = _i; exports.isBcsU128 = Ki; exports.isBcsU16 = xi; exports.isBcsU256 = Ri; exports.isBcsU32 = Ii; exports.isBcsU64 = vi; exports.isBcsU8 = Pi; exports.isBlockEpilogueTransactionResponse = _chunkS7NKHRYEjs.L; exports.isBlockMetadataTransactionResponse = _chunkS7NKHRYEjs.I; exports.isBool = As; exports.isCanonicalEd25519Signature = Ac; exports.isEd25519Signature = _chunkS7NKHRYEjs.M; exports.isEmptyOption = hs; exports.isEncodedEntryFunctionArgument = Ts; exports.isEncodedStruct = _chunkS7NKHRYEjs.ja; exports.isFeePayerSignature = _chunkS7NKHRYEjs.P; exports.isGenesisTransactionResponse = _chunkS7NKHRYEjs.H; exports.isKeylessSigner = hn; exports.isLargeNumber = Un; exports.isMultiAgentSignature = _chunkS7NKHRYEjs.O; exports.isMultiEd25519Signature = _chunkS7NKHRYEjs.Q; exports.isNumber = Pu; exports.isPendingTransactionResponse = _chunkS7NKHRYEjs.F; exports.isScriptDataInput = bs; exports.isSecp256k1Signature = _chunkS7NKHRYEjs.N; exports.isSingleKeySigner = Ai; exports.isStateCheckpointTransactionResponse = _chunkS7NKHRYEjs.J; exports.isString = ot; exports.isUserTransactionResponse = _chunkS7NKHRYEjs.G; exports.isValidBIP44Path = lo; exports.isValidFunctionInfo = _chunkS7NKHRYEjs.la; exports.isValidHardenedPath = po; exports.isValidatorTransactionResponse = _chunkS7NKHRYEjs.K; exports.mnemonicToSeed = Zr; exports.normalizeBundle = _o; exports.nowInSeconds = _chunkS7NKHRYEjs.ca; exports.objectStructTag = ge; exports.optionStructTag = rf; exports.outOfRangeErrorMessage = _chunkS7NKHRYEjs.o; exports.padAndPackBytesWithLen = yr; exports.paginateWithCursor = an; exports.paginateWithObfuscatedCursor = ai; exports.pairedFaMetadataAddress = _chunkS7NKHRYEjs.na; exports.parseEncodedStruct = _chunkS7NKHRYEjs.ia; exports.parseJwtHeader = au; exports.parseTypeTag = ye; exports.poseidonHash = xt; exports.post = fr; exports.postCedraFaucet = Io; exports.postCedraFullNode = mt; exports.postCedraIndexer = xo; exports.postCedraPepperService = vo; exports.postCedraProvingService = Ko; exports.promiseFulfilledStatus = Xa; exports.request = Lc; exports.sleep = _chunkS7NKHRYEjs.aa; exports.splitPath = mo; exports.standardizeTypeTags = Dn; exports.stringStructTag = _; exports.throwTypeMismatch = D; exports.truncateAddress = _chunkS7NKHRYEjs.ma; exports.validateNumberInRange = _chunkS7NKHRYEjs.p; exports.verifyKeylessSignature = yi; exports.verifyKeylessSignatureWithJwkAndConfig = un;
//# sourceMappingURL=index.js.map