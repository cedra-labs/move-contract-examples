import { WalletAccount, WalletWithFeatures, IdentifierRecord, Wallet, WalletsEventsListeners } from '@wallet-standard/core';
export * from '@wallet-standard/core';
import { SigningScheme, AccountAddressInput, PublicKey, Serializable, AccountAddress, Serializer, Deserializer, Network, InputGenerateTransactionPayloadData, Signature, AnyRawTransaction, AccountAuthenticator, TransactionPayload } from '@cedra-labs/ts-sdk';

interface CedraWalletAccount extends WalletAccount {
    readonly signingScheme: SigningScheme;
}

interface AccountInfoInput {
    address: AccountAddressInput;
    publicKey: PublicKey;
    ansName?: string;
}
declare class AccountInfo extends Serializable {
    readonly address: AccountAddress;
    readonly publicKey: PublicKey;
    readonly ansName?: string;
    constructor({ address, publicKey, ansName }: AccountInfoInput);
    serialize(serializer: Serializer): void;
    static deserialize(deserializer: Deserializer): AccountInfo;
}

type ChainsId = `${string}:${string}`;
/** CEDRA Devnet */
declare const CEDRA_DEVNET_CHAIN = "cedra:devnet";
/** CEDRA Testnet */
declare const CEDRA_TESTNET_CHAIN = "cedra:testnet";
/** CEDRA Localnet */
declare const CEDRA_LOCALNET_CHAIN = "cedra:localnet";
/** CEDRA Mainnet */
declare const CEDRA_MAINNET_CHAIN = "cedra:mainnet";
declare const CEDRA_CHAINS: readonly ["cedra:devnet", "cedra:testnet", "cedra:localnet", "cedra:mainnet"];
type CedraChain = typeof CEDRA_DEVNET_CHAIN | typeof CEDRA_TESTNET_CHAIN | typeof CEDRA_LOCALNET_CHAIN | typeof CEDRA_MAINNET_CHAIN;

type TransactionHash = `0x${string}`;
interface NetworkInfo {
    name: Network;
    chainId: number;
    url?: string;
}
declare enum UserResponseStatus {
    APPROVED = "Approved",
    REJECTED = "Rejected"
}
interface UserApproval<TResponseArgs> {
    status: UserResponseStatus.APPROVED;
    args: TResponseArgs;
}
interface UserRejection {
    status: UserResponseStatus.REJECTED;
}
type UserResponse<TResponseArgs> = UserApproval<TResponseArgs> | UserRejection;

/** Version of the feature. */
type CedraSignAndSubmitTransactionVersion = '1.1.0';
/** Name of the feature. */
declare const CedraSignAndSubmitTransactionNamespace = "cedra:signAndSubmitTransaction";
/**
 * A Wallet Standard feature for signing a transaction, and returning the
 * hash of the transaction.
 */
type CedraSignAndSubmitTransactionFeature = {
    /** Namespace for the feature. */
    [CedraSignAndSubmitTransactionNamespace]: {
        /** Version of the feature API. */
        version: CedraSignAndSubmitTransactionVersion;
        signAndSubmitTransaction: CedraSignAndSubmitTransactionMethod;
    };
};
type CedraSignAndSubmitTransactionMethod = (transaction: CedraSignAndSubmitTransactionInput) => Promise<UserResponse<CedraSignAndSubmitTransactionOutput>>;
interface CedraSignAndSubmitTransactionInput {
    gasUnitPrice?: number;
    maxGasAmount?: number;
    payload: InputGenerateTransactionPayloadData;
}
interface CedraSignAndSubmitTransactionOutput {
    hash: string;
}

/** Version of the feature. */
type CedraSignMessageVersion = '1.0.0';
/** Name of the feature. */
declare const CedraSignMessageNamespace = "cedra:signMessage";
type CedraSignMessageFeature = {
    /** Namespace for the feature. */
    [CedraSignMessageNamespace]: {
        /** Version of the feature API. */
        version: CedraSignMessageVersion;
        signMessage: CedraSignMessageMethod;
    };
};
type CedraSignMessageMethod = (input: CedraSignMessageInput) => Promise<UserResponse<CedraSignMessageOutput>>;
type CedraSignMessageInput = {
    address?: boolean;
    application?: boolean;
    chainId?: boolean;
    message: string;
    nonce: string;
};
type CedraSignMessageOutput = {
    address?: string;
    application?: string;
    chainId?: number;
    fullMessage: string;
    message: string;
    nonce: string;
    prefix: 'CEDRA';
    signature: Signature;
};

/** Version of the feature. */
type CedraGetAccountVersion = '1.0.0';
/** Name of the feature. */
declare const CedraGetAccountNamespace = "cedra:account";
type CedraGetAccountFeature = {
    /** Namespace for the feature. */
    [CedraGetAccountNamespace]: {
        /** Version of the feature API. */
        version: CedraGetAccountVersion;
        account: CedraGetAccountMethod;
    };
};
type CedraGetAccountMethod = () => Promise<AptoGetsAccountOutput>;
type AptoGetsAccountOutput = AccountInfo;

/** Version of the feature. */
type CedraConnectVersion = '1.0.0';
/** Name of the feature. */
declare const CedraConnectNamespace = "cedra:connect";
type CedraConnectFeature = {
    /** Namespace for the feature. */
    [CedraConnectNamespace]: {
        /** Version of the feature API. */
        version: CedraConnectVersion;
        connect: CedraConnectMethod;
    };
};
type CedraConnectMethod = (...args: CedraConnectInput) => Promise<UserResponse<CedraConnectOutput>>;
type CedraConnectInput = [silent?: boolean, networkInfo?: NetworkInfo];
type CedraConnectOutput = AccountInfo;

/** Version of the feature. */
type CedraGetNetworkVersion = '1.0.0';
/** Name of the feature. */
declare const CedraGetNetworkNamespace = "cedra:network";
type CedraGetNetworkFeature = {
    /** Namespace for the feature. */
    [CedraGetNetworkNamespace]: {
        /** Version of the feature API. */
        version: CedraGetNetworkVersion;
        network: CedraGetNetworkMethod;
    };
};
type CedraGetNetworkMethod = () => Promise<CedraGetNetworkOutput>;
type CedraGetNetworkOutput = NetworkInfo;

/** Version of the feature. */
type CedraOnAccountChangeVersion = '1.0.0';
/** Name of the feature. */
declare const CedraOnAccountChangeNamespace = "cedra:onAccountChange";
type CedraOnAccountChangeFeature = {
    /** Namespace for the feature. */
    [CedraOnAccountChangeNamespace]: {
        /** Version of the feature API. */
        version: CedraOnAccountChangeVersion;
        onAccountChange: CedraOnAccountChangeMethod;
    };
};
type CedraOnAccountChangeMethod = (input: CedraOnAccountChangeInput) => Promise<void>;
type CedraOnAccountChangeInput = (newAccount: AccountInfo) => void;

/** Version of the feature. */
type CedraOnNetworkChangeVersion = '1.0.0';
/** Name of the feature. */
declare const CedraOnNetworkChangeNamespace = "cedra:onNetworkChange";
type CedraOnNetworkChangeFeature = {
    /** Namespace for the feature. */
    [CedraOnNetworkChangeNamespace]: {
        /** Version of the feature API. */
        version: CedraOnNetworkChangeVersion;
        onNetworkChange: CedraOnNetworkChangeMethod;
    };
};
type CedraOnNetworkChangeMethod = (input: CedraOnNetworkChangeInput) => Promise<void>;
type CedraOnNetworkChangeInput = (newNetwork: NetworkInfo) => void;

/** Name of the feature. */
declare const CedraSignTransactionNamespace = "cedra:signTransaction";
type CedraSignTransactionFeatureV1_0 = {
    [CedraSignTransactionNamespace]: {
        version: '1.0.0';
        signTransaction: CedraSignTransactionMethod;
    };
};
type CedraSignTransactionFeatureV1_1 = {
    [CedraSignTransactionNamespace]: {
        version: '1.1';
        signTransaction: CedraSignTransactionMethod & CedraSignTransactionMethodV1_1;
    };
};
/**
 * A Wallet Standard feature for signing an Cedra transaction, and returning the
 * account authenticator.
 */
type CedraSignTransactionFeature = CedraSignTransactionFeatureV1_0 | CedraSignTransactionFeatureV1_1;
type CedraSignTransactionOutput = AccountAuthenticator;
type CedraSignTransactionMethod = (transaction: AnyRawTransaction, asFeePayer?: boolean) => Promise<UserResponse<CedraSignTransactionOutput>>;
interface AccountInput {
    address: AccountAddress;
    publicKey?: PublicKey;
}
interface CedraSignTransactionInputV1_1 {
    expirationSecondsFromNow?: number;
    expirationTimestamp?: number;
    feePayer?: AccountInput;
    gasUnitPrice?: number;
    maxGasAmount?: number;
    network?: Network;
    payload: TransactionPayload | InputGenerateTransactionPayloadData;
    secondarySigners?: AccountInput[];
    sender?: AccountInput;
    sequenceNumber?: number | bigint;
    signerAddress?: AccountAddress;
}
interface CedraSignTransactionOutputV1_1 {
    authenticator: AccountAuthenticator;
    rawTransaction: AnyRawTransaction;
}
type CedraSignTransactionMethodV1_1 = (input: CedraSignTransactionInputV1_1) => Promise<UserResponse<CedraSignTransactionOutputV1_1>>;

/** Version of the feature. */
type CedraDisconnectVersion = '1.0.0';
/** Name of the feature. */
declare const CedraDisconnectNamespace = "cedra:disconnect";
type CedraDisconnectFeature = {
    /** Namespace for the feature. */
    [CedraDisconnectNamespace]: {
        /** Version of the feature API. */
        version: CedraDisconnectVersion;
        disconnect: CedraDisconnectMethod;
    };
};
type CedraDisconnectMethod = () => Promise<void>;

/** Version of the feature. */
type CedraOpenInMobileAppVersion = '1.0.0';
/** Name of the feature. */
declare const CedraOpenInMobileAppNamespace = "cedra:openInMobileApp";
type CedraOpenInMobileAppFeature = {
    /** Namespace for the feature. */
    [CedraOpenInMobileAppNamespace]: {
        /** Version of the feature API. */
        version: CedraOpenInMobileAppVersion;
        openInMobileApp: CedraOpenInMobileAppMethod;
    };
};
type CedraOpenInMobileAppMethod = () => void;

/** Version of the feature. */
type CedraChangeNetworkVersion = '1.0.0';
/** Name of the feature. */
declare const CedraChangeNetworkNamespace = "cedra:changeNetwork";
type CedraChangeNetworkFeature = {
    /** Namespace for the feature. */
    [CedraChangeNetworkNamespace]: {
        /** Version of the feature API. */
        version: CedraChangeNetworkVersion;
        changeNetwork: CedraChangeNetworkMethod;
    };
};
type CedraChangeNetworkMethod = (input: CedraChangeNetworkInput) => Promise<UserResponse<CedraChangeNetworkOutput>>;
type CedraChangeNetworkInput = NetworkInfo;
interface CedraChangeNetworkOutput {
    success: boolean;
    reason?: string;
}

/**
 * NOTE: This feature is currently experimental and is subject to change.
 *
 * Documentation: [Sign in with Cedra](https://github.com/cedra-foundation/AIPs/pull/556)
 */
/** Version of the feature. */
type CedraSignInVersion = '0.1.0';
/** Name of the feature. */
declare const CedraSignInNamespace = "cedra:signIn";
type CedraSignInFeature = {
    /** Namespace for the feature. */
    [CedraSignInNamespace]: {
        /** Version of the feature API. */
        version: CedraSignInVersion;
        signIn: CedraSignInMethod;
    };
};
type CedraSignInMethod = (input: CedraSignInInput) => Promise<UserResponse<CedraSignInOutput>>;
type CedraSignInInput = {
    address?: string;
    uri?: string;
    version?: string;
    statement?: string;
    nonce: string;
    chainId?: string;
    issuedAt?: string;
    expirationTime?: string;
    notBefore?: string;
    requestId?: string;
    resources?: string[];
};
type CedraSignInRequiredFields = {
    domain: string;
    address: string;
    uri: string;
    version: string;
    chainId: string;
};
type CedraSignInOutput = {
    account: AccountInfo;
    input: CedraSignInInput & CedraSignInRequiredFields;
    plainText: string;
    signingMessage: Uint8Array;
    signature: Signature;
    /**
     * The type of signing scheme used to sign the message.
     *
     * @example 'ed25519' | 'multi_ed25519' | 'single_key' | 'multi_key'
     */
    type: string;
};

/**
 * Wallet Standard features that are unique to Cedra, and that all Cedra wallets are expected to implement.
 */
type CedraFeatures = CedraConnectFeature & CedraGetAccountFeature & CedraGetNetworkFeature & CedraOnAccountChangeFeature & CedraOnNetworkChangeFeature & CedraSignMessageFeature & CedraSignTransactionFeature & Partial<CedraChangeNetworkFeature> & Partial<CedraOpenInMobileAppFeature> & Partial<CedraSignAndSubmitTransactionFeature> & Partial<CedraSignInFeature> & CedraDisconnectFeature;
/**
 * Represents a wallet with all Cedra features.
 */
type WalletWithCedraFeatures = WalletWithFeatures<CedraFeatures>;
/**
 * Represents a wallet with the absolute minimum feature set required to function in the Cedra ecosystem.
 */
type WalletWithRequiredFeatures = WalletWithFeatures<MinimallyRequiredFeatures & IdentifierRecord<unknown>>;
/**
 * Represents the absolute minimum feature set required to function in the Cedra ecosystem.
 */
type MinimallyRequiredFeatures = CedraFeatures;

interface CedraWallet extends WalletWithCedraFeatures {
    /**
     * Website URL of the Wallet
     */
    readonly url: string;
}

declare function isWalletWithRequiredFeatureSet<AdditionalFeatures extends Wallet['features']>(wallet: Wallet, additionalFeatures?: (keyof AdditionalFeatures)[]): wallet is WalletWithFeatures<MinimallyRequiredFeatures & AdditionalFeatures>;
/**
 * Helper function to get only Cedra wallets
 * @returns Cedra compatible wallets and `on` event to listen to wallets register event
 */
declare function getCedraWallets(): {
    cedraWallets: CedraWallet[];
    on: <E extends keyof WalletsEventsListeners>(event: E, listener: WalletsEventsListeners[E]) => () => void;
};

declare enum CedraWalletErrorCode {
    Unauthorized = 4100,
    Unsupported = 4200,
    InternalError = -30001
}
declare const CedraWalletErrors: Readonly<{
    4100: {
        status: string;
        message: string;
    };
    [-30001]: {
        status: string;
        message: string;
    };
    4200: {
        status: string;
        message: string;
    };
}>;
declare class CedraWalletError extends Error {
    readonly code: number;
    readonly status: string;
    constructor(code: number, message?: string);
}

export { AccountInfo, type AccountInfoInput, type AccountInput, type AptoGetsAccountOutput, CEDRA_CHAINS, CEDRA_DEVNET_CHAIN, CEDRA_LOCALNET_CHAIN, CEDRA_MAINNET_CHAIN, CEDRA_TESTNET_CHAIN, type CedraChain, type CedraChangeNetworkFeature, type CedraChangeNetworkInput, type CedraChangeNetworkMethod, CedraChangeNetworkNamespace, type CedraChangeNetworkOutput, type CedraChangeNetworkVersion, type CedraConnectFeature, type CedraConnectInput, type CedraConnectMethod, CedraConnectNamespace, type CedraConnectOutput, type CedraConnectVersion, type CedraDisconnectFeature, type CedraDisconnectMethod, CedraDisconnectNamespace, type CedraDisconnectVersion, type CedraFeatures, type CedraGetAccountFeature, type CedraGetAccountMethod, CedraGetAccountNamespace, type CedraGetAccountVersion, type CedraGetNetworkFeature, type CedraGetNetworkMethod, CedraGetNetworkNamespace, type CedraGetNetworkOutput, type CedraGetNetworkVersion, type CedraOnAccountChangeFeature, type CedraOnAccountChangeInput, type CedraOnAccountChangeMethod, CedraOnAccountChangeNamespace, type CedraOnAccountChangeVersion, type CedraOnNetworkChangeFeature, type CedraOnNetworkChangeInput, type CedraOnNetworkChangeMethod, CedraOnNetworkChangeNamespace, type CedraOnNetworkChangeVersion, type CedraOpenInMobileAppFeature, type CedraOpenInMobileAppMethod, CedraOpenInMobileAppNamespace, type CedraOpenInMobileAppVersion, type CedraSignAndSubmitTransactionFeature, type CedraSignAndSubmitTransactionInput, type CedraSignAndSubmitTransactionMethod, CedraSignAndSubmitTransactionNamespace, type CedraSignAndSubmitTransactionOutput, type CedraSignAndSubmitTransactionVersion, type CedraSignInFeature, type CedraSignInInput, type CedraSignInMethod, CedraSignInNamespace, type CedraSignInOutput, type CedraSignInRequiredFields, type CedraSignInVersion, type CedraSignMessageFeature, type CedraSignMessageInput, type CedraSignMessageMethod, CedraSignMessageNamespace, type CedraSignMessageOutput, type CedraSignMessageVersion, type CedraSignTransactionFeature, type CedraSignTransactionFeatureV1_0, type CedraSignTransactionFeatureV1_1, type CedraSignTransactionInputV1_1, type CedraSignTransactionMethod, type CedraSignTransactionMethodV1_1, CedraSignTransactionNamespace, type CedraSignTransactionOutput, type CedraSignTransactionOutputV1_1, type CedraWallet, type CedraWalletAccount, CedraWalletError, CedraWalletErrorCode, CedraWalletErrors, type ChainsId, type MinimallyRequiredFeatures, type NetworkInfo, type TransactionHash, type UserApproval, type UserRejection, type UserResponse, UserResponseStatus, type WalletWithCedraFeatures, type WalletWithRequiredFeatures, getCedraWallets, isWalletWithRequiredFeatureSet };
